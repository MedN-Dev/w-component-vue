!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e=e||self)["w-json-view"]=r()}(this,function(){"use strict";var e=function(e,r){for(var n=-1,t=null==e?0:e.length;++n<t&&!1!==r(e[n],n,e););return e};var r=function(e){return function(r,n,t){for(var i=-1,a=Object(r),o=t(r),l=o.length;l--;){var u=o[e?l:++i];if(!1===n(a[u],u,a))break}return r}}();var n=function(e,r){for(var n=-1,t=Array(e);++n<e;)t[n]=r(n);return t};function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(e,r){return e(r={exports:{}},r.exports),r.exports}var o="object"==t(i)&&i&&i.Object===Object&&i,l="object"==("undefined"==typeof self?"undefined":t(self))&&self&&self.Object===Object&&self,u=o||l||Function("return this")(),s=u.Symbol,v=Object.prototype,c=v.hasOwnProperty,f=v.toString,d=s?s.toStringTag:void 0;var p=function(e){var r=c.call(e,d),n=e[d];try{e[d]=void 0;var t=!0}catch(e){}var i=f.call(e);return t&&(r?e[d]=n:delete e[d]),i},h=Object.prototype.toString;var m=function(e){return h.call(e)},y="[object Null]",g="[object Undefined]",b=s?s.toStringTag:void 0;var _=function(e){return null==e?void 0===e?g:y:b&&b in Object(e)?p(e):m(e)};var C=function(e){return null!=e&&"object"==t(e)},k="[object Arguments]";var j=function(e){return C(e)&&_(e)==k},x=Object.prototype,w=x.hasOwnProperty,A=x.propertyIsEnumerable,S=j(function(){return arguments}())?j:function(e){return C(e)&&w.call(e,"callee")&&!A.call(e,"callee")},I=Array.isArray;var N=function(){return!1},O=a(function(e,r){var n=r&&!r.nodeType&&r,t=n&&e&&!e.nodeType&&e,i=t&&t.exports===n?u.Buffer:void 0,a=(i?i.isBuffer:void 0)||N;e.exports=a}),H=9007199254740991,T=/^(?:0|[1-9]\d*)$/;var z=function(e,r){var n=t(e);return!!(r=null==r?H:r)&&("number"==n||"symbol"!=n&&T.test(e))&&e>-1&&e%1==0&&e<r},M=9007199254740991;var $=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=M},E={};E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Arguments]"]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object Boolean]"]=E["[object DataView]"]=E["[object Date]"]=E["[object Error]"]=E["[object Function]"]=E["[object Map]"]=E["[object Number]"]=E["[object Object]"]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object WeakMap]"]=!1;var B=function(e){return C(e)&&$(e.length)&&!!E[_(e)]};var D=function(e){return function(r){return e(r)}},P=a(function(e,r){var n=r&&!r.nodeType&&r,t=n&&e&&!e.nodeType&&e,i=t&&t.exports===n&&o.process,a=function(){try{var e=t&&t.require&&t.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a}),R=P&&P.isTypedArray,L=R?D(R):B,U=Object.prototype.hasOwnProperty;var W=function(e,r){var t=I(e),i=!t&&S(e),a=!t&&!i&&O(e),o=!t&&!i&&!a&&L(e),l=t||i||a||o,u=l?n(e.length,String):[],s=u.length;for(var v in e)!r&&!U.call(e,v)||l&&("length"==v||a&&("offset"==v||"parent"==v)||o&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||z(v,s))||u.push(v);return u},F=Object.prototype;var V=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||F)};var J=function(e,r){return function(n){return e(r(n))}}(Object.keys,Object),X=Object.prototype.hasOwnProperty;var q=function(e){if(!V(e))return J(e);var r=[];for(var n in Object(e))X.call(e,n)&&"constructor"!=n&&r.push(n);return r};var Y=function(e){var r=t(e);return null!=e&&("object"==r||"function"==r)},G="[object AsyncFunction]",K="[object Function]",Q="[object GeneratorFunction]",Z="[object Proxy]";var ee=function(e){if(!Y(e))return!1;var r=_(e);return r==K||r==Q||r==G||r==Z};var re=function(e){return null!=e&&$(e.length)&&!ee(e)};var ne=function(e){return re(e)?W(e):q(e)};var te=function(e,r){return function(n,t){if(null==n)return n;if(!re(n))return e(n,t);for(var i=n.length,a=r?i:-1,o=Object(n);(r?a--:++a<i)&&!1!==t(o[a],a,o););return n}}(function(e,n){return e&&r(e,n,ne)});var ie=function(e){return e};var ae=function(e){return"function"==typeof e?e:ie};var oe,le=function(r,n){return(I(r)?e:te)(r,ae(n))},ue=u["__core-js_shared__"],se=(oe=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||""))?"Symbol(src)_1."+oe:"";var ve=function(e){return!!se&&se in e},ce=Function.prototype.toString;var fe=function(e){if(null!=e){try{return ce.call(e)}catch(e){}try{return e+""}catch(e){}}return""},de=/^\[object .+?Constructor\]$/,pe=Function.prototype,he=Object.prototype,me=pe.toString,ye=he.hasOwnProperty,ge=RegExp("^"+me.call(ye).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var be=function(e){return!(!Y(e)||ve(e))&&(ee(e)?ge:de).test(fe(e))};var _e=function(e,r){return null==e?void 0:e[r]};var Ce=function(e,r){var n=_e(e,r);return be(n)?n:void 0},ke=Ce(u,"DataView"),je=Ce(u,"Map"),xe=Ce(u,"Promise"),we=Ce(u,"Set"),Ae=Ce(u,"WeakMap"),Se=fe(ke),Ie=fe(je),Ne=fe(xe),Oe=fe(we),He=fe(Ae),Te=_;(ke&&"[object DataView]"!=Te(new ke(new ArrayBuffer(1)))||je&&"[object Map]"!=Te(new je)||xe&&"[object Promise]"!=Te(xe.resolve())||we&&"[object Set]"!=Te(new we)||Ae&&"[object WeakMap]"!=Te(new Ae))&&(Te=function(e){var r=_(e),n="[object Object]"==r?e.constructor:void 0,t=n?fe(n):"";if(t)switch(t){case Se:return"[object DataView]";case Ie:return"[object Map]";case Ne:return"[object Promise]";case Oe:return"[object Set]";case He:return"[object WeakMap]"}return r});var ze=Te,Me="[object String]";var $e=function(e){return"string"==typeof e||!I(e)&&C(e)&&_(e)==Me};var Ee=function(e){return function(r){return null==r?void 0:r[e]}},Be=Ee("length"),De=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Pe=function(e){return De.test(e)},Re="[\\ud800-\\udfff]",Le="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ue="\\ud83c[\\udffb-\\udfff]",We="[^\\ud800-\\udfff]",Fe="(?:\\ud83c[\\udde6-\\uddff]){2}",Ve="[\\ud800-\\udbff][\\udc00-\\udfff]",Je="(?:"+Le+"|"+Ue+")"+"?",Xe="[\\ufe0e\\ufe0f]?"+Je+("(?:\\u200d(?:"+[We,Fe,Ve].join("|")+")[\\ufe0e\\ufe0f]?"+Je+")*"),qe="(?:"+[We+Le+"?",Le,Fe,Ve,Re].join("|")+")",Ye=RegExp(Ue+"(?="+Ue+")|"+qe+Xe,"g");var Ge=function(e){for(var r=Ye.lastIndex=0;Ye.test(e);)++r;return r};var Ke=function(e){return Pe(e)?Ge(e):Be(e)},Qe="[object Map]",Ze="[object Set]";var er=function(e){if(null==e)return 0;if(re(e))return $e(e)?Ke(e):e.length;var r=ze(e);return r==Qe||r==Ze?e.size:q(e).length},rr="[object Symbol]";var nr=function(e){return"symbol"==t(e)||C(e)&&_(e)==rr},tr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ir=/^\w*$/;var ar=function(e,r){if(I(e))return!1;var n=t(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!nr(e))||(ir.test(e)||!tr.test(e)||null!=r&&e in Object(r))},or=Ce(Object,"create");var lr=function(){this.__data__=or?or(null):{},this.size=0};var ur=function(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r},sr="__lodash_hash_undefined__",vr=Object.prototype.hasOwnProperty;var cr=function(e){var r=this.__data__;if(or){var n=r[e];return n===sr?void 0:n}return vr.call(r,e)?r[e]:void 0},fr=Object.prototype.hasOwnProperty;var dr=function(e){var r=this.__data__;return or?void 0!==r[e]:fr.call(r,e)},pr="__lodash_hash_undefined__";var hr=function(e,r){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=or&&void 0===r?pr:r,this};function mr(e){var r=-1,n=null==e?0:e.length;for(this.clear();++r<n;){var t=e[r];this.set(t[0],t[1])}}mr.prototype.clear=lr,mr.prototype.delete=ur,mr.prototype.get=cr,mr.prototype.has=dr,mr.prototype.set=hr;var yr=mr;var gr=function(){this.__data__=[],this.size=0};var br=function(e,r){return e===r||e!=e&&r!=r};var _r=function(e,r){for(var n=e.length;n--;)if(br(e[n][0],r))return n;return-1},Cr=Array.prototype.splice;var kr=function(e){var r=this.__data__,n=_r(r,e);return!(n<0)&&(n==r.length-1?r.pop():Cr.call(r,n,1),--this.size,!0)};var jr=function(e){var r=this.__data__,n=_r(r,e);return n<0?void 0:r[n][1]};var xr=function(e){return _r(this.__data__,e)>-1};var wr=function(e,r){var n=this.__data__,t=_r(n,e);return t<0?(++this.size,n.push([e,r])):n[t][1]=r,this};function Ar(e){var r=-1,n=null==e?0:e.length;for(this.clear();++r<n;){var t=e[r];this.set(t[0],t[1])}}Ar.prototype.clear=gr,Ar.prototype.delete=kr,Ar.prototype.get=jr,Ar.prototype.has=xr,Ar.prototype.set=wr;var Sr=Ar;var Ir=function(){this.size=0,this.__data__={hash:new yr,map:new(je||Sr),string:new yr}};var Nr=function(e){var r=t(e);return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e};var Or=function(e,r){var n=e.__data__;return Nr(r)?n["string"==typeof r?"string":"hash"]:n.map};var Hr=function(e){var r=Or(this,e).delete(e);return this.size-=r?1:0,r};var Tr=function(e){return Or(this,e).get(e)};var zr=function(e){return Or(this,e).has(e)};var Mr=function(e,r){var n=Or(this,e),t=n.size;return n.set(e,r),this.size+=n.size==t?0:1,this};function $r(e){var r=-1,n=null==e?0:e.length;for(this.clear();++r<n;){var t=e[r];this.set(t[0],t[1])}}$r.prototype.clear=Ir,$r.prototype.delete=Hr,$r.prototype.get=Tr,$r.prototype.has=zr,$r.prototype.set=Mr;var Er=$r,Br="Expected a function";function Dr(e,r){if("function"!=typeof e||null!=r&&"function"!=typeof r)throw new TypeError(Br);var n=function n(){var t=arguments,i=r?r.apply(this,t):t[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,t);return n.cache=a.set(i,o)||a,o};return n.cache=new(Dr.Cache||Er),n}Dr.Cache=Er;var Pr=Dr,Rr=500;var Lr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ur=/\\(\\)?/g,Wr=function(e){var r=Pr(e,function(e){return n.size===Rr&&n.clear(),e}),n=r.cache;return r}(function(e){var r=[];return 46===e.charCodeAt(0)&&r.push(""),e.replace(Lr,function(e,n,t,i){r.push(t?i.replace(Ur,"$1"):n||e)}),r});var Fr=function(e,r){for(var n=-1,t=null==e?0:e.length,i=Array(t);++n<t;)i[n]=r(e[n],n,e);return i},Vr=1/0,Jr=s?s.prototype:void 0,Xr=Jr?Jr.toString:void 0;var qr=function e(r){if("string"==typeof r)return r;if(I(r))return Fr(r,e)+"";if(nr(r))return Xr?Xr.call(r):"";var n=r+"";return"0"==n&&1/r==-Vr?"-0":n};var Yr=function(e){return null==e?"":qr(e)};var Gr=function(e,r){return I(e)?e:ar(e,r)?[e]:Wr(Yr(e))},Kr=1/0;var Qr=function(e){if("string"==typeof e||nr(e))return e;var r=e+"";return"0"==r&&1/e==-Kr?"-0":r};var Zr=function(e,r){for(var n=0,t=(r=Gr(r,e)).length;null!=e&&n<t;)e=e[Qr(r[n++])];return n&&n==t?e:void 0};var en=function(e,r,n){var t=null==e?void 0:Zr(e,r);return void 0===t?n:t};var rn=function(){this.__data__=new Sr,this.size=0};var nn=function(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n};var tn=function(e){return this.__data__.get(e)};var an=function(e){return this.__data__.has(e)},on=200;var ln=function(e,r){var n=this.__data__;if(n instanceof Sr){var t=n.__data__;if(!je||t.length<on-1)return t.push([e,r]),this.size=++n.size,this;n=this.__data__=new Er(t)}return n.set(e,r),this.size=n.size,this};function un(e){var r=this.__data__=new Sr(e);this.size=r.size}un.prototype.clear=rn,un.prototype.delete=nn,un.prototype.get=tn,un.prototype.has=an,un.prototype.set=ln;var sn=un,vn="__lodash_hash_undefined__";var cn=function(e){return this.__data__.set(e,vn),this};var fn=function(e){return this.__data__.has(e)};function dn(e){var r=-1,n=null==e?0:e.length;for(this.__data__=new Er;++r<n;)this.add(e[r])}dn.prototype.add=dn.prototype.push=cn,dn.prototype.has=fn;var pn=dn;var hn=function(e,r){for(var n=-1,t=null==e?0:e.length;++n<t;)if(r(e[n],n,e))return!0;return!1};var mn=function(e,r){return e.has(r)},yn=1,gn=2;var bn=function(e,r,n,t,i,a){var o=n&yn,l=e.length,u=r.length;if(l!=u&&!(o&&u>l))return!1;var s=a.get(e);if(s&&a.get(r))return s==r;var v=-1,c=!0,f=n&gn?new pn:void 0;for(a.set(e,r),a.set(r,e);++v<l;){var d=e[v],p=r[v];if(t)var h=o?t(p,d,v,r,e,a):t(d,p,v,e,r,a);if(void 0!==h){if(h)continue;c=!1;break}if(f){if(!hn(r,function(e,r){if(!mn(f,r)&&(d===e||i(d,e,n,t,a)))return f.push(r)})){c=!1;break}}else if(d!==p&&!i(d,p,n,t,a)){c=!1;break}}return a.delete(e),a.delete(r),c},_n=u.Uint8Array;var Cn=function(e){var r=-1,n=Array(e.size);return e.forEach(function(e,t){n[++r]=[t,e]}),n};var kn=function(e){var r=-1,n=Array(e.size);return e.forEach(function(e){n[++r]=e}),n},jn=1,xn=2,wn="[object Boolean]",An="[object Date]",Sn="[object Error]",In="[object Map]",Nn="[object Number]",On="[object RegExp]",Hn="[object Set]",Tn="[object String]",zn="[object Symbol]",Mn="[object ArrayBuffer]",$n="[object DataView]",En=s?s.prototype:void 0,Bn=En?En.valueOf:void 0;var Dn=function(e,r,n,t,i,a,o){switch(n){case $n:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Mn:return!(e.byteLength!=r.byteLength||!a(new _n(e),new _n(r)));case wn:case An:case Nn:return br(+e,+r);case Sn:return e.name==r.name&&e.message==r.message;case On:case Tn:return e==r+"";case In:var l=Cn;case Hn:var u=t&jn;if(l||(l=kn),e.size!=r.size&&!u)return!1;var s=o.get(e);if(s)return s==r;t|=xn,o.set(e,r);var v=bn(l(e),l(r),t,i,a,o);return o.delete(e),v;case zn:if(Bn)return Bn.call(e)==Bn.call(r)}return!1};var Pn=function(e,r){for(var n=-1,t=r.length,i=e.length;++n<t;)e[i+n]=r[n];return e};var Rn=function(e,r,n){var t=r(e);return I(e)?t:Pn(t,n(e))};var Ln=function(e,r){for(var n=-1,t=null==e?0:e.length,i=0,a=[];++n<t;){var o=e[n];r(o,n,e)&&(a[i++]=o)}return a};var Un=function(){return[]},Wn=Object.prototype.propertyIsEnumerable,Fn=Object.getOwnPropertySymbols,Vn=Fn?function(e){return null==e?[]:(e=Object(e),Ln(Fn(e),function(r){return Wn.call(e,r)}))}:Un;var Jn=function(e){return Rn(e,ne,Vn)},Xn=1,qn=Object.prototype.hasOwnProperty;var Yn=function(e,r,n,t,i,a){var o=n&Xn,l=Jn(e),u=l.length;if(u!=Jn(r).length&&!o)return!1;for(var s=u;s--;){var v=l[s];if(!(o?v in r:qn.call(r,v)))return!1}var c=a.get(e);if(c&&a.get(r))return c==r;var f=!0;a.set(e,r),a.set(r,e);for(var d=o;++s<u;){var p=e[v=l[s]],h=r[v];if(t)var m=o?t(h,p,v,r,e,a):t(p,h,v,e,r,a);if(!(void 0===m?p===h||i(p,h,n,t,a):m)){f=!1;break}d||(d="constructor"==v)}if(f&&!d){var y=e.constructor,g=r.constructor;y!=g&&"constructor"in e&&"constructor"in r&&!("function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g)&&(f=!1)}return a.delete(e),a.delete(r),f},Gn=1,Kn="[object Arguments]",Qn="[object Array]",Zn="[object Object]",et=Object.prototype.hasOwnProperty;var rt=function(e,r,n,t,i,a){var o=I(e),l=I(r),u=o?Qn:ze(e),s=l?Qn:ze(r),v=(u=u==Kn?Zn:u)==Zn,c=(s=s==Kn?Zn:s)==Zn,f=u==s;if(f&&O(e)){if(!O(r))return!1;o=!0,v=!1}if(f&&!v)return a||(a=new sn),o||L(e)?bn(e,r,n,t,i,a):Dn(e,r,u,n,t,i,a);if(!(n&Gn)){var d=v&&et.call(e,"__wrapped__"),p=c&&et.call(r,"__wrapped__");if(d||p){var h=d?e.value():e,m=p?r.value():r;return a||(a=new sn),i(h,m,n,t,a)}}return!!f&&(a||(a=new sn),Yn(e,r,n,t,i,a))};var nt=function e(r,n,t,i,a){return r===n||(null==r||null==n||!C(r)&&!C(n)?r!=r&&n!=n:rt(r,n,t,i,e,a))},tt=1,it=2;var at=function(e,r,n,t){var i=n.length,a=i,o=!t;if(null==e)return!a;for(e=Object(e);i--;){var l=n[i];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){var u=(l=n[i])[0],s=e[u],v=l[1];if(o&&l[2]){if(void 0===s&&!(u in e))return!1}else{var c=new sn;if(t)var f=t(s,v,u,e,r,c);if(!(void 0===f?nt(v,s,tt|it,t,c):f))return!1}}return!0};var ot=function(e){return e==e&&!Y(e)};var lt=function(e){for(var r=ne(e),n=r.length;n--;){var t=r[n],i=e[t];r[n]=[t,i,ot(i)]}return r};var ut=function(e,r){return function(n){return null!=n&&(n[e]===r&&(void 0!==r||e in Object(n)))}};var st=function(e){var r=lt(e);return 1==r.length&&r[0][2]?ut(r[0][0],r[0][1]):function(n){return n===e||at(n,e,r)}};var vt=function(e,r){return null!=e&&r in Object(e)};var ct=function(e,r,n){for(var t=-1,i=(r=Gr(r,e)).length,a=!1;++t<i;){var o=Qr(r[t]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++t!=i?a:!!(i=null==e?0:e.length)&&$(i)&&z(o,i)&&(I(e)||S(e))};var ft=function(e,r){return null!=e&&ct(e,r,vt)},dt=1,pt=2;var ht=function(e,r){return ar(e)&&ot(r)?ut(Qr(e),r):function(n){var t=en(n,e);return void 0===t&&t===r?ft(n,e):nt(r,t,dt|pt)}};var mt=function(e){return function(r){return Zr(r,e)}};var yt=function(e){return ar(e)?Ee(Qr(e)):mt(e)};var gt=function(e){return"function"==typeof e?e:null==e?ie:"object"==t(e)?I(e)?ht(e[0],e[1]):st(e):yt(e)};var bt=function(e){return function(r,n,t){var i=Object(r);if(!re(r)){var a=gt(n);r=ne(r),n=function(e){return a(i[e],e,i)}}var o=e(r,n,t);return o>-1?i[a?r[o]:o]:void 0}};var _t=function(e,r,n,t){for(var i=e.length,a=n+(t?1:-1);t?a--:++a<i;)if(r(e[a],a,e))return a;return-1},Ct=NaN,kt=/^\s+|\s+$/g,jt=/^[-+]0x[0-9a-f]+$/i,xt=/^0b[01]+$/i,wt=/^0o[0-7]+$/i,At=parseInt;var St=function(e){if("number"==typeof e)return e;if(nr(e))return Ct;if(Y(e)){var r="function"==typeof e.valueOf?e.valueOf():e;e=Y(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(kt,"");var n=xt.test(e);return n||wt.test(e)?At(e.slice(2),n?2:8):jt.test(e)?Ct:+e},It=1/0,Nt=17976931348623157e292;var Ot=function(e){return e?(e=St(e))===It||e===-It?(e<0?-1:1)*Nt:e==e?e:0:0===e?e:0};var Ht=function(e){var r=Ot(e),n=r%1;return r==r?n?r-n:r:0},Tt=Math.max;var zt=bt(function(e,r,n){var t=null==e?0:e.length;if(!t)return-1;var i=null==n?0:Ht(n);return i<0&&(i=Tt(t+i,0)),_t(e,gt(r),i)}),Mt=Math.max,$t=Math.min;var Et=bt(function(e,r,n){var t=null==e?0:e.length;if(!t)return-1;var i=t-1;return void 0!==n&&(i=Ht(n),i=n<0?Mt(t+i,0):$t(i,t-1)),_t(e,gt(r),i,!0)}),Bt=function(){return u.Date.now()},Dt="Expected a function",Pt=Math.max,Rt=Math.min;var Lt="[object Number]";var Ut=function(e){return"number"==typeof e||C(e)&&_(e)==Lt},Wt="[object Boolean]";var Ft=function(e){return!0===e||!1===e||C(e)&&_(e)==Wt},Vt={props:{data:{},listHeight:{type:Number,default:400},itemMinHeight:{type:Number,default:24},itemsPreload:{type:Number,default:40},iconColor:{type:String,default:"#999999"},keyColor:{type:String,default:"#666666"},keyNumbersColor:{type:String,default:"#aaaaaa"},numColor:{type:String,default:"#1c00d4"},strColor:{type:String,default:"#ebaf61"},bolColor:{type:String,default:"#ab0d90"},funColor:{type:String,default:"#ca56da"},defaultColor:{type:String,default:"#222222"},defDisplayChildren:{type:Boolean,default:!0}},data:function(){return{lineNumberWidth:0,preItemsHeight:0,aftItemsHeight:0,scrollTop:0,itemsHeight:0,styleLineNumber:{display:"table-cell","padding-right":"10px","text-align":"right","font-size":"0.8rem",color:"#f26","user-select":"none"},items:[],useItems:[]}},mounted:function(){},watch:{data:{immediate:!0,handler:function(e){var r=this,n=r.parseData(r.data),t=13*(Math.ceil(Math.pow(er(n),.1))+1);r.items=n,r.lineNumberWidth=t,r.change()}}},computed:{},methods:{change:function(){this.getUseItems(),this.updateItems(),this.getUseItems()},getUseItems:function(){var e,r=this,n=r.items,t=r.scrollTop,i=t+r.listHeight,a=er(n);e=Et(n,function(e,r){return e.y+e.useHeight<t});var o=en(e,"index",0);o=Math.max(o-r.itemsPreload,0),e=zt(n,function(e,r){return e.y>i});var l=en(e,"index",a);l=Math.min(l+r.itemsPreload,a-1);var u=[],s=0,v=0;le(n,function(e,r){r<o?s+=e.useHeight:r>l?v+=e.useHeight:e.show&&u.push(e)}),r.useItems=u,r.preItemsHeight=s,r.aftItemsHeight=v},updateItems:function(){var e=this.items;le(this.$refs.itemDiv,function(r){var n=Ht(r.getAttribute("index"));if(n>=0&&n<=er(e)-1){var t=r.clientHeight;e[n].height!==t&&(e[n].height=t)}});var r=!1,n=null,t=null;le(e,function(e,i){r||e.displayChildren||(r=!0,n=e.level,t=i),t!==i&&r?e.level>n?!1!==e.show&&(e.show=!1):e.level===n&&(!1!==e.show&&(e.show=!1),r=!1,n=null):!0!==e.show&&(e.show=!0)});var i=0;le(e,function(e){e.y!==i&&(e.y=i),e.show?(i+=e.height,e.useHeight!==e.height&&(e.useHeight=e.height)):0!==e.useHeight&&(e.useHeight=0)}),this.itemsHeight!==i&&(this.itemsHeight=i)},parseData:function(e){var r=this,n=0,t=[];function i(e){if(Ut(e))return{type:"num",value:Yr(e)};if($e(e))return{type:"str",value:'"'.concat(e,'"')};if(Ft(e)){var r="false";return e&&(r="true"),{type:"bol",value:r}}return ee(e)?{type:"fun",value:e.toString()}:{type:"default",value:e}}function a(e){var i=e.level,a=e.key,o=e.keyNumbers,l=e.value,u=e.valueColor,s=e.valueComma,v=e.valueTail,c=e.hasChildren,f=(n+=1)-1;t.push({index:f,lineNumber:n,level:i,paddingLeft:24*i+16,key:a,keyNumbers:o,value:l,valueColor:u,valueComma:s,valueTail:v,hasChildren:c,displayChildren:r.defDisplayChildren,show:!0,height:r.itemMinHeight,useHeight:0,y:f*r.itemMinHeight})}function o(e){var r=e.level,n=e.key,t=e.value,i=e.last,o=er(t),l={type:"arr",n:o},s="[";null!==n&&(s="".concat(n," :  [")),a({level:r,key:s,value:null,valueColor:null,valueTail:"]",keyNumbers:l,valueComma:!1,hasChildren:!0});var v=0;le(t,function(e,n){u({level:r+1,key:n,value:e,last:(v+=1)===o})});var c="],";i&&(c="]"),a({level:r,key:c,value:null,valueColor:null,keyNumbers:null,valueComma:!1,hasChildren:!1})}function l(e){var r=e.level,n=e.key,t=e.value,i=e.last,o=er(ne(t)),l={type:"obj",n:o},s="{";null!==n&&(s="".concat(n," :  {")),a({level:r,key:s,value:null,valueColor:null,valueTail:"}",keyNumbers:l,valueComma:!1,hasChildren:!0});var v=0;le(t,function(e,n){u({level:r+1,key:n,value:e,last:(v+=1)===o})});var c="},";i&&(c="}"),a({level:r,key:c,value:null,valueColor:null,keyNumbers:null,valueComma:!1,hasChildren:!1})}function u(e){var n=e.level,t=e.key,u=e.value,s=e.last;if(I(u))o({level:n,key:t,value:u,last:s});else if(Y(u))l({level:n,key:t,value:u,last:s});else{var v=i(u),c=r["".concat(v.type,"Color")];a({level:n,key:"".concat(t," :  "),value:v.value,valueColor:c,keyNumbers:null,valueComma:!s,hasChildren:!1})}}if(I(e))o({level:0,key:null,value:e,last:!0});else if(Y(e))l({level:0,key:null,value:e,last:!0});else{var s=i(e),v=r["".concat(s.type,"Color")];a({level:0,key:null,value:s.value,valueColor:v,keyNumbers:null,valueComma:null,hasChildren:!1})}return t},toggleItems:function(e){var r=this;r.items[e.index].displayChildren=!r.items[e.index].displayChildren,setTimeout(function(){r.change()},10)},scrollItems:function(e,r,n){var t,i,a,o,l,u,s=0,v=!1,c=!1,f=!0;if("function"!=typeof e)throw new TypeError(Dt);function d(r){var n=t,a=i;return t=i=void 0,s=r,o=e.apply(a,n)}function p(e){var n=e-u;return void 0===u||n>=r||n<0||c&&e-s>=a}function h(){var e=Bt();if(p(e))return m(e);l=setTimeout(h,function(e){var n=r-(e-u);return c?Rt(n,a-(e-s)):n}(e))}function m(e){return l=void 0,f&&t?d(e):(t=i=void 0,o)}function y(){var e=Bt(),n=p(e);if(t=arguments,i=this,u=e,n){if(void 0===l)return function(e){return s=e,l=setTimeout(h,r),v?d(e):o}(u);if(c)return clearTimeout(l),l=setTimeout(h,r),d(u)}return void 0===l&&(l=setTimeout(h,r)),o}return r=St(r)||0,Y(n)&&(v=!!n.leading,a=(c="maxWait"in n)?Pt(St(n.maxWait)||0,r):a,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==l&&clearTimeout(l),s=0,t=u=i=l=void 0},y.flush=function(){return void 0===l?o:m(Bt())},y}(function(e){var r=this;setTimeout(function(){var n=e.target.scrollTop;r.scrollTop=n,r.change()},10)},100)}};var Jt,Xt=function(e,r,n,t,i,a,o,l,u,s){"boolean"!=typeof o&&(u=l,l=o,o=!1);var v,c="function"==typeof n?n.options:n;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,i&&(c.functional=!0)),t&&(c._scopeId=t),a?(v=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,u(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=v):r&&(v=o?function(){r.call(this,s(this.$root.$options.shadowRoot))}:function(e){r.call(this,l(e))}),v)if(c.functional){var f=c.render;c.render=function(e,r){return v.call(r),f(e,r)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,v):[v]}return n},qt="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var Yt={};var Gt=function(e){return function(e,r){return function(e,r){var n=qt?r.media||"default":e,t=Yt[n]||(Yt[n]={ids:new Set,styles:[]});if(!t.ids.has(e)){t.ids.add(e);var i=r.source;if(r.map&&(i+="\n/*# sourceURL="+r.map.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r.map))))+" */"),t.element||(t.element=document.createElement("style"),t.element.type="text/css",r.media&&t.element.setAttribute("media",r.media),void 0===Jt&&(Jt=document.head||document.getElementsByTagName("head")[0]),Jt.appendChild(t.element)),"styleSheet"in t.element)t.styles.push(i),t.element.styleSheet.cssText=t.styles.filter(Boolean).join("\n");else{var a=t.ids.size-1,o=document.createTextNode(i),l=t.element.childNodes;l[a]&&t.element.removeChild(l[a]),l.length?t.element.insertBefore(o,l[a]):t.element.appendChild(o)}}}(e,r)}};const Kt=Vt;var Qt=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{style:[{position:"relative","overflow-y":"auto",height:e.listHeight+"px"}],on:{scroll:e.scrollItems}},[n("div",{style:[{height:e.itemsHeight+"px"}]}),e._v(" "),n("div",{style:[{position:"absolute",top:"0px"}]},[n("div",{style:[{height:e.preItemsHeight+"px"}]}),e._v(" "),e._l(e.useItems,function(r,t){return[r.show?n("div",{key:t,ref:"itemDiv",refInFor:!0,attrs:{index:r.index}},[n("div",{style:[e.styleLineNumber,{width:e.lineNumberWidth+"px"}]},[e._v(e._s(r.lineNumber))]),e._v(" "),n("div",{style:[{display:"table-cell","padding-left":r.paddingLeft+"px"}]},[n("div",{staticStyle:{position:"relative"}},[n("div",{staticStyle:{position:"absolute",top:"0px",left:"0px",transform:"translateX(-100%)"}},[r.hasChildren?n("span",{on:{click:function(n){return e.toggleItems(r)}}},[n("span",{class:[{caretRight:!0,showChildren:r.displayChildren}]},[n("span",{staticClass:"center"},[n("svg",{attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",fill:e.iconColor,width:"11px",height:"11px",x:"0px",y:"0px",viewBox:"0 0 415.346 415.346","xml:space":"preserve"}},[n("g",[n("path",{attrs:{d:"M41.712,415.346c-11.763,0-21.3-9.537-21.3-21.3V21.299C20.412,9.536,29.949,0,41.712,0l346.122,191.697 c0,0,15.975,15.975,0,31.951C371.859,239.622,41.712,415.346,41.712,415.346z"}})])])])])]):n("span",{staticStyle:{display:"inline-block",width:"16px"}})]),e._v(" "),n("div",{staticStyle:{"text-indent":"-2rem","margin-left":"2em"}},[r.key?n("span",{style:[{color:e.keyColor}]},[n("span",[e._v(e._s(r.key))]),e._v(" "),r.keyNumbers?n("span",{style:[{margin:"0px 10px",color:e.keyNumbersColor}]},["arr"===r.keyNumbers.type?n("span",[e._v("["+e._s(r.keyNumbers.n)+"]")]):e._e(),e._v(" "),"obj"===r.keyNumbers.type?n("span",[n("span",[e._v("{")]),n("span",[e._v(e._s(r.keyNumbers.n))]),n("span",[e._v("}")])]):e._e()]):e._e(),e._v(" "),r.displayChildren?e._e():n("span",[n("span",{staticStyle:{"margin-right":"10px"}},[e._v("...")]),e._v(e._s(r.valueTail))])]):e._e(),e._v(" "),r.value?[n("span",{style:[{color:r.valueColor}]},[e._v(e._s(r.value))]),e._v(" "),r.valueComma?n("span",{style:[{color:e.keyColor}]},[e._v(",")]):e._e()]:e._e()],2)])])]):e._e()]}),e._v(" "),n("div",{style:[{height:e.aftItemsHeight+"px"}]})],2)])};Qt._withStripped=!0;return Xt({render:Qt,staticRenderFns:[]},function(e){e&&e("data-v-fb91d8e8_0",{source:"\n.caretRight[data-v-fb91d8e8] {\r\n    transform: translateY(-1px);\r\n    cursor: pointer;\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    margin-right: 5px;\n}\n.center[data-v-fb91d8e8] {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\n}\n.showChildren[data-v-fb91d8e8] {\r\n    transform: rotate(90deg);\n}\r\n",map:{version:3,sources:["D:\\開源-JS-102-3-w-component-vue\\w-component-vue\\src\\components\\WJsonView.vue"],names:[],mappings:";AA+lBA;IACA,2BAAA;IACA,eAAA;IACA,qBAAA;IACA,sBAAA;IACA,iBAAA;AACA;AACA;IACA,aAAA;IACA,mBAAA;IACA,uBAAA;AACA;AACA;IACA,wBAAA;AACA",file:"WJsonView.vue",sourcesContent:["<template>\r\n    <div :style=\"[{'position':'relative','overflow-y':'auto','height':listHeight+'px'}]\" @scroll=\"scrollItems\">\r\n\r\n        <div :style=\"[{'height':itemsHeight+'px'}]\"></div>\r\n\r\n        <div :style=\"[{'position':'absolute','top':'0px'}]\">\r\n\r\n            <div :style=\"[{'height':preItemsHeight+'px'}]\"></div>\r\n\r\n            <template v-for=\"(item,kitem) in useItems\">\r\n                <div ref=\"itemDiv\" :index=\"item.index\" :key=\"kitem\" v-if=\"item.show\">\r\n\r\n                    <div :style=\"[styleLineNumber,{'width':lineNumberWidth+'px'}]\">{{item.lineNumber}}</div>\r\n\r\n                    <div :style=\"[{'display':'table-cell','padding-left':item.paddingLeft+'px'}]\">\r\n\r\n                        <div style=\"position:relative;\">\r\n\r\n                            <div style=\"position:absolute; top:0px; left:0px; transform:translateX(-100%); \">\r\n                                <span v-if=\"item.hasChildren\" @click=\"toggleItems(item)\">\r\n                                    <span :class=\"[{'caretRight':true,'showChildren':item.displayChildren}]\">\r\n                                        <span class=\"center\">\r\n                                            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" :fill=\"iconColor\" width=\"11px\" height=\"11px\" x=\"0px\" y=\"0px\" viewBox=\"0 0 415.346 415.346\" xml:space=\"preserve\"><g><path d=\"M41.712,415.346c-11.763,0-21.3-9.537-21.3-21.3V21.299C20.412,9.536,29.949,0,41.712,0l346.122,191.697 c0,0,15.975,15.975,0,31.951C371.859,239.622,41.712,415.346,41.712,415.346z\"/></g></svg>\r\n                                        </span>\r\n                                    </span>\r\n                                </span>\r\n                                <span style=\"display:inline-block; width:16px;\" v-else></span>\r\n                            </div>\r\n\r\n                            <div style=\"text-indent:-2rem; margin-left:2em;\">\r\n\r\n                                <span :style=\"[{'color':keyColor}]\" v-if=\"item.key\">\r\n\r\n                                    <span>{{item.key}}</span>\r\n\r\n                                    <span :style=\"[{'margin':'0px 10px','color':keyNumbersColor}]\" v-if=\"item.keyNumbers\">\r\n                                        <span v-if=\"item.keyNumbers.type==='arr'\">[{{item.keyNumbers.n}}]</span>\r\n                                        <span v-if=\"item.keyNumbers.type==='obj'\"><span>{</span><span>{{item.keyNumbers.n}}</span><span>}</span></span>\r\n                                    </span>\r\n\r\n                                    <span v-if=\"!item.displayChildren\"><span style=\"margin-right:10px;\">...</span>{{item.valueTail}}</span>\r\n\r\n                                </span>\r\n\r\n                                <template v-if=\"item.value\">\r\n\r\n                                    <span :style=\"[{'color':item.valueColor}]\">{{item.value}}</span>\r\n\r\n                                    <span :style=\"[{'color':keyColor}]\" v-if=\"item.valueComma\">,</span>\r\n\r\n                                </template>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n            </template>\r\n\r\n            <div :style=\"[{'height':aftItemsHeight+'px'}]\"></div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport each from 'lodash/each'\r\nimport size from 'lodash/size'\r\nimport keys from 'lodash/keys'\r\nimport get from 'lodash/get'\r\nimport find from 'lodash/find'\r\nimport findLast from 'lodash/findLast'\r\nimport debounce from 'lodash/debounce'\r\nimport isNumber from 'lodash/isNumber'\r\nimport isString from 'lodash/isString'\r\nimport isBoolean from 'lodash/isBoolean'\r\nimport isArray from 'lodash/isArray'\r\nimport isObject from 'lodash/isObject'\r\nimport isFunction from 'lodash/isFunction'\r\nimport toString from 'lodash/toString'\r\nimport toInteger from 'lodash/toInteger'\r\n\r\n/**\r\n * @vue-prop {*} data 輸入資料陣列或物件\r\n * @vue-prop {Number} [listHeight=400] 輸入顯示區高度，單位為px，預設400\r\n * @vue-prop {Number} [itemMinHeight=24] 輸入各元素顯示高度，單位為px，預設24，會於真實顯示後自動更新高度\r\n * @vue-prop {Number} [itemsPreload=40] 輸入預先載入上下方向的元素數量，預設40\r\n * @vue-prop {String} [iconColor='#999999'] 輸入顯隱icon按鈕顏色字串，預設'#999999'\r\n * @vue-prop {String} [keyColor='#666666'] 輸入鍵值顏色字串，預設'#666666'\r\n * @vue-prop {String} [keyNumbersColor='#aaaaaa'] 輸入鍵值內含子節點數量顏色字串，預設'#aaaaaa'\r\n * @vue-prop {String} [numColor='#1c00d4'] 輸入值為數值時的顏色字串，預設'#1c00d4'\r\n * @vue-prop {String} [strColor='#ebaf61'] 輸入值為字串時的顏色字串，預設'#ebaf61'\r\n * @vue-prop {String} [bolColor='#ab0d90'] 輸入值為布林值時的顏色字串，預設'#ab0d90'\r\n * @vue-prop {String} [funColor='#ca56da'] 輸入值為函數時的顏色字串，預設'#ca56da'\r\n * @vue-prop {String} [defaultColor='#222222'] 輸入值為其他類型時的顏色字串，預設'#222222'\r\n * @vue-prop {Boolean} [defDisplayChildren=true] 輸入是否預先展開全部節點，預設true\r\n */\r\nexport default {\r\n    props: {\r\n        data: {},\r\n        listHeight: {\r\n            type: Number,\r\n            default: 400,\r\n        },\r\n        itemMinHeight: {\r\n            type: Number,\r\n            default: 24,\r\n        },\r\n        itemsPreload: {\r\n            type: Number,\r\n            default: 40,\r\n        },\r\n        iconColor: {\r\n            type: String,\r\n            default: '#999999',\r\n        },\r\n        keyColor: {\r\n            type: String,\r\n            default: '#666666',\r\n        },\r\n        keyNumbersColor: {\r\n            type: String,\r\n            default: '#aaaaaa',\r\n        },\r\n        numColor: {\r\n            type: String,\r\n            default: '#1c00d4',\r\n        },\r\n        strColor: {\r\n            type: String,\r\n            default: '#ebaf61',\r\n        },\r\n        bolColor: {\r\n            type: String,\r\n            default: '#ab0d90',\r\n        },\r\n        funColor: {\r\n            type: String,\r\n            default: '#ca56da',\r\n        },\r\n        defaultColor: {\r\n            type: String,\r\n            default: '#222222',\r\n        },\r\n        defDisplayChildren: {\r\n            type: Boolean,\r\n            default: true,\r\n        },\r\n    },\r\n    data: function() {\r\n        return {\r\n            lineNumberWidth: 0, //列號區寬度\r\n            preItemsHeight: 0, //上方空白區高度\r\n            aftItemsHeight: 0, //下方空白區高度\r\n            scrollTop: 0, //目前捲軸位置\r\n            itemsHeight: 0, //儲存全部項目高度\r\n            styleLineNumber: {\r\n                'display': 'table-cell',\r\n                'padding-right': '10px',\r\n                'text-align': 'right',\r\n                'font-size': '0.8rem',\r\n                'color': '#f26',\r\n                'user-select': 'none',\r\n            },\r\n            items: [],\r\n            useItems: [],\r\n        }\r\n    },\r\n    mounted: function() {\r\n    },\r\n    watch: {\r\n\r\n        data: {\r\n            immediate: true,\r\n            handler(value) {\r\n                //console.log('watch data', value)\r\n\r\n                let vo = this\r\n\r\n                //items\r\n                let items = vo.parseData(vo.data)\r\n\r\n                //lineNumberWidth, 每個字元使用13px寬度\r\n                let lineNumberWidth = (Math.ceil(Math.pow(size(items), 0.1)) + 1) * 13\r\n\r\n                //save\r\n                vo.items = items\r\n                vo.lineNumberWidth = lineNumberWidth\r\n\r\n                //change\r\n                vo.change()\r\n\r\n            }\r\n        }\r\n\r\n    },\r\n    computed: {\r\n    },\r\n    methods: {\r\n\r\n        change: function() {\r\n            //console.log('methods change')\r\n\r\n            let vo = this\r\n\r\n            vo.getUseItems()\r\n            vo.updateItems()\r\n            vo.getUseItems()\r\n\r\n        },\r\n\r\n        getUseItems: function() {\r\n            //console.log('methods getUseItems')\r\n\r\n            let vo = this\r\n\r\n            //items, 直接存取vo.item, 不能用cloneDeep對大數據太耗時\r\n            let items = (vo.items)\r\n\r\n            //y1, y2\r\n            let y1 = vo.scrollTop\r\n            let y2 = y1 + vo.listHeight\r\n\r\n            //indStart, indEnd\r\n            let n = size(items)\r\n            let o\r\n            o = findLast(items, (v, k) => {\r\n                return (v.y + v.useHeight) < y1\r\n            })\r\n            let indStart = get(o, 'index', 0)\r\n            indStart = Math.max(indStart - vo.itemsPreload, 0)\r\n            o = find(items, (v, k) => {\r\n                return v.y > y2\r\n            })\r\n            let indEnd = get(o, 'index', n)\r\n            indEnd = Math.min(indEnd + vo.itemsPreload, n - 1)\r\n\r\n            //useItems\r\n            let useItems = []\r\n            let preItemsHeight = 0\r\n            let aftItemsHeight = 0\r\n            each(items, (v, k) => {\r\n                if (k < indStart) {\r\n                    preItemsHeight += v.useHeight\r\n                }\r\n                else if (k > indEnd) {\r\n                    aftItemsHeight += v.useHeight\r\n                }\r\n                else if (v.show) {\r\n                    useItems.push(v)\r\n                }\r\n            })\r\n\r\n            //save\r\n            vo.useItems = useItems\r\n            vo.preItemsHeight = preItemsHeight\r\n            vo.aftItemsHeight = aftItemsHeight\r\n\r\n        },\r\n\r\n        updateItems: function() {\r\n            //console.log('methods updateItems')\r\n\r\n            let vo = this\r\n\r\n            //items, 直接存取vo.item, 不能用cloneDeep對大數據太耗時\r\n            let items = (vo.items)\r\n\r\n            //update height\r\n            each(vo.$refs.itemDiv, (v) => {\r\n                let index = toInteger(v.getAttribute('index'))\r\n                if (index >= 0 && index <= size(items) - 1) {\r\n                    let h = v.clientHeight\r\n                    if (items[index].height !== h) {\r\n                        items[index].height = h\r\n                    }\r\n                }\r\n            })\r\n\r\n            //update show\r\n            let hide = false\r\n            let level = null\r\n            let ind = null\r\n            each(items, (v, k) => {\r\n\r\n                //detect start\r\n                if (!hide && !v.displayChildren) {\r\n                    hide = true\r\n                    level = v.level\r\n                    ind = k\r\n                }\r\n\r\n                //detect level\r\n                if (ind !== k && hide) {\r\n                    if (v.level > level) {\r\n                        if (v.show !== false) {\r\n                            v.show = false\r\n                        }\r\n                    }\r\n                    else if (v.level === level) {\r\n                        if (v.show !== false) {\r\n                            v.show = false\r\n                        }\r\n                        hide = false\r\n                        level = null\r\n                    }\r\n                }\r\n                else {\r\n                    if (v.show !== true) {\r\n                        v.show = true\r\n                    }\r\n                }\r\n\r\n            })\r\n\r\n            //update y, useHeight\r\n            let y = 0\r\n            each(items, (v) => {\r\n                if (v.y !== y) {\r\n                    v.y = y\r\n                }\r\n                if (v.show) {\r\n                    y += v.height\r\n                    if (v.useHeight !== v.height) {\r\n                        v.useHeight = v.height\r\n                    }\r\n                }\r\n                else {\r\n                    if (v.useHeight !== 0) {\r\n                        v.useHeight = 0\r\n                    }\r\n                }\r\n            })\r\n\r\n            //update itemsHeight\r\n            if (vo.itemsHeight !== y) {\r\n                vo.itemsHeight = y\r\n            }\r\n\r\n        },\r\n\r\n        parseData: function(d) {\r\n            //console.log('methods parseData', d)\r\n\r\n            let vo = this\r\n\r\n            let lineNumber = 0\r\n            let items = []\r\n\r\n            function cValue(v) {\r\n                if (isNumber(v)) {\r\n                    return {\r\n                        type: 'num',\r\n                        value: toString(v),\r\n                    }\r\n                }\r\n                else if (isString(v)) {\r\n                    return {\r\n                        type: 'str',\r\n                        value: `\"${v}\"`,\r\n                    }\r\n                }\r\n                else if (isBoolean(v)) {\r\n                    let c = 'false'\r\n                    if (v) {\r\n                        c = 'true'\r\n                    }\r\n                    return {\r\n                        type: 'bol',\r\n                        value: c,\r\n                    }\r\n                }\r\n                else if (isFunction(v)) {\r\n                    return {\r\n                        type: 'fun',\r\n                        value: v.toString(),\r\n                    }\r\n                }\r\n                return {\r\n                    type: 'default',\r\n                    value: v,\r\n                }\r\n            }\r\n\r\n            function addItem({ level, key, keyNumbers, value, valueColor, valueComma, valueTail, hasChildren }) {\r\n                lineNumber += 1\r\n                let index = lineNumber - 1\r\n                items.push({\r\n                    index, //節點指標\r\n                    lineNumber, //int, 列編號\r\n                    level, //int, 節點層數(縮排)\r\n                    paddingLeft: level * 24 + 16, //num, 給予16px放置顯隱icon\r\n                    key, //str, 鍵\r\n                    keyNumbers, //obj, 鍵值為陣列或物件顯示所含節點數量\r\n                    value, //str, 值\r\n                    valueColor, //str, 數值顏色, 需依照值型別給予\r\n                    valueComma, //bol, 數值後方是否顯示\",\"\r\n                    valueTail, //str, 數值後方結尾符號, 僅用於陣列或物件, 供displayChildren=false時額外顯示出結尾符號\r\n                    hasChildren, //bol, 是否有子節點, 僅陣列或物件才為true\r\n                    displayChildren: vo.defDisplayChildren, //bol, 是否顯示子節點\r\n                    show: true, //bol, 是否顯示此節點\r\n                    height: vo.itemMinHeight, //num, 節點高度, 日後動態更新\r\n                    useHeight: 0, //num, 真實使用高度, 受show影響, 加速用\r\n                    y: index * vo.itemMinHeight, //num, 真實y向位置, 預設先由最小列高計算\r\n                })\r\n            }\r\n\r\n            function pArray({ level, key, value, last }) {\r\n\r\n                let n = size(value)\r\n                let keyNumbers = {\r\n                    type: 'arr',\r\n                    n,\r\n                }\r\n\r\n                let _key = `[`\r\n                if (key !== null) {\r\n                    _key = `${key} :  [`\r\n                }\r\n                addItem({\r\n                    level,\r\n                    key: _key,\r\n                    value: null,\r\n                    valueColor: null,\r\n                    valueTail: ']',\r\n                    keyNumbers,\r\n                    valueComma: false,\r\n                    hasChildren: true,\r\n                })\r\n\r\n                let i = 0\r\n                each(value, (v, k) => {\r\n                    i += 1\r\n                    pSelf({\r\n                        level: level + 1,\r\n                        key: k,\r\n                        value: v,\r\n                        last: i === n,\r\n                    })\r\n                })\r\n\r\n                let cend = `],`\r\n                if (last) {\r\n                    cend = `]`\r\n                }\r\n                addItem({\r\n                    level,\r\n                    key: cend,\r\n                    value: null,\r\n                    valueColor: null,\r\n                    keyNumbers: null,\r\n                    valueComma: false,\r\n                    hasChildren: false,\r\n                })\r\n\r\n            }\r\n\r\n            function pObject({ level, key, value, last }) {\r\n\r\n                let n = size(keys(value))\r\n                let keyNumbers = {\r\n                    type: 'obj',\r\n                    n,\r\n                }\r\n\r\n                let _key = `{`\r\n                if (key !== null) {\r\n                    _key = `${key} :  {`\r\n                }\r\n                addItem({\r\n                    level,\r\n                    key: _key,\r\n                    value: null,\r\n                    valueColor: null,\r\n                    valueTail: '}',\r\n                    keyNumbers,\r\n                    valueComma: false,\r\n                    hasChildren: true,\r\n                })\r\n\r\n                let i = 0\r\n                each(value, (v, k) => {\r\n                    i += 1\r\n                    pSelf({\r\n                        level: level + 1,\r\n                        key: k,\r\n                        value: v,\r\n                        last: i === n,\r\n                    })\r\n                })\r\n\r\n                let cend = `},`\r\n                if (last) {\r\n                    cend = `}`\r\n                }\r\n                addItem({\r\n                    level,\r\n                    key: cend,\r\n                    value: null,\r\n                    valueColor: null,\r\n                    keyNumbers: null,\r\n                    valueComma: false,\r\n                    hasChildren: false,\r\n                })\r\n\r\n            }\r\n\r\n            function pSelf({ level, key, value, last }) {\r\n                if (isArray(value)) {\r\n                    pArray({ level, key, value, last })\r\n                }\r\n                else if (isObject(value)) {\r\n                    pObject({ level, key, value, last })\r\n                }\r\n                else {\r\n                    let r = cValue(value)\r\n                    let c = vo[`${r.type}Color`]\r\n                    addItem({\r\n                        level,\r\n                        key: `${key} :  `,\r\n                        value: r.value,\r\n                        valueColor: c,\r\n                        keyNumbers: null,\r\n                        valueComma: !last,\r\n                        hasChildren: false,\r\n                    })\r\n                }\r\n            }\r\n\r\n            if (isArray(d)) {\r\n                pArray({\r\n                    level: 0,\r\n                    key: null,\r\n                    value: d,\r\n                    last: true,\r\n                })\r\n            }\r\n            else if (isObject(d)) {\r\n                pObject({\r\n                    level: 0,\r\n                    key: null,\r\n                    value: d,\r\n                    last: true,\r\n                })\r\n            }\r\n            else {\r\n                let r = cValue(d)\r\n                let c = vo[`${r.type}Color`]\r\n                addItem({\r\n                    level: 0,\r\n                    key: null,\r\n                    value: r.value,\r\n                    valueColor: c,\r\n                    keyNumbers: null,\r\n                    valueComma: null,\r\n                    hasChildren: false,\r\n                })\r\n            }\r\n\r\n            return items\r\n        },\r\n\r\n        toggleItems: function(item) {\r\n            //console.log('methods toggleItems',item)\r\n\r\n            let vo = this\r\n\r\n            //toggle\r\n            vo.items[item.index].displayChildren = !vo.items[item.index].displayChildren\r\n\r\n            //setTimeout\r\n            setTimeout(() => {\r\n\r\n                //change\r\n                vo.change()\r\n\r\n            }, 10)\r\n\r\n        },\r\n\r\n        scrollItems: debounce(function(e) {\r\n            //console.log('methods scrollItems', e.target.scrollTop)\r\n\r\n            let vo = this\r\n\r\n            //setTimeout\r\n            setTimeout(() => {\r\n\r\n                //save scrollTop\r\n                let scrollTop = e.target.scrollTop\r\n                vo.scrollTop = scrollTop\r\n\r\n                //change\r\n                vo.change()\r\n\r\n            }, 10)\r\n\r\n        }, 100),\r\n\r\n    },\r\n}\r\n<\/script>\r\n\r\n<style scoped>\r\n.caretRight {\r\n    transform: translateY(-1px);\r\n    cursor: pointer;\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    margin-right: 5px;\r\n}\r\n.center {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n.showChildren {\r\n    transform: rotate(90deg);\r\n}\r\n</style>\r\n\r\n"]},media:void 0})},Kt,"data-v-fb91d8e8",!1,void 0,Gt,void 0)});
//# sourceMappingURL=w-json-view.umd.js.map
