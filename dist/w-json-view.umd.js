!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e=e||self)["w-json-view"]=r()}(this,function(){"use strict";function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e,r){return e(r={exports:{}},r.exports),r.exports}var t=n(function(r){var n=function(r){var n,t=Object.prototype,o=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,r,n,t){var o=r&&r.prototype instanceof y?r:y,i=Object.create(o.prototype),a=new O(t||[]);return i._invoke=function(e,r,n){var t=f;return function(o,i){if(t===h)throw new Error("Generator is already running");if(t===p){if("throw"===o)throw i;return N()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=C(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(t===f)throw t=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);t=h;var u=c(e,r,n);if("normal"===u.type){if(t=n.done?p:v,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(t=p,n.method="throw",n.arg=u.arg)}}}(e,n,a),i}function c(e,r,n){try{return{type:"normal",arg:e.call(r,n)}}catch(e){return{type:"throw",arg:e}}}r.wrap=s;var f="suspendedStart",v="suspendedYield",h="executing",p="completed",d={};function y(){}function m(){}function g(){}var b={};b[a]=function(){return this};var w=Object.getPrototypeOf,j=w&&w(w(I([])));j&&j!==t&&o.call(j,a)&&(b=j);var _=g.prototype=y.prototype=Object.create(b);function k(e){["next","throw","return"].forEach(function(r){e[r]=function(e){return this._invoke(r,e)}})}function x(r){var n;this._invoke=function(t,i){function a(){return new Promise(function(n,a){!function n(t,i,a,l){var u=c(r[t],r,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"===e(f)&&o.call(f,"__await")?Promise.resolve(f.__await).then(function(e){n("next",e,a,l)},function(e){n("throw",e,a,l)}):Promise.resolve(f).then(function(e){s.value=e,a(s)},function(e){return n("throw",e,a,l)})}l(u.arg)}(t,i,n,a)})}return n=n?n.then(a,a):a()}}function C(e,r){var t=e.iterator[r.method];if(t===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=n,C(e,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=c(t,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=n),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function A(e){var r={tryLoc:e[0]};1 in e&&(r.catchLoc=e[1]),2 in e&&(r.finallyLoc=e[2],r.afterLoc=e[3]),this.tryEntries.push(r)}function S(e){var r=e.completion||{};r.type="normal",delete r.arg,e.completion=r}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var t=-1,i=function r(){for(;++t<e.length;)if(o.call(e,t))return r.value=e[t],r.done=!1,r;return r.value=n,r.done=!0,r};return i.next=i}}return{next:N}}function N(){return{value:n,done:!0}}return m.prototype=_.constructor=g,g.constructor=m,g[u]=m.displayName="GeneratorFunction",r.isGeneratorFunction=function(e){var r="function"==typeof e&&e.constructor;return!!r&&(r===m||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(_),e},r.awrap=function(e){return{__await:e}},k(x.prototype),x.prototype[l]=function(){return this},r.AsyncIterator=x,r.async=function(e,n,t,o){var i=new x(s(e,n,t,o));return r.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},k(_),_[u]="Generator",_[a]=function(){return this},_.toString=function(){return"[object Generator]"},r.keys=function(e){var r=[];for(var n in e)r.push(n);return r.reverse(),function n(){for(;r.length;){var t=r.pop();if(t in e)return n.value=t,n.done=!1,n}return n.done=!0,n}},r.values=I,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function t(t,o){return l.type="throw",l.arg=e,r.next=t,o&&(r.method="next",r.arg=n),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),s=o.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function(e,r){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.tryLoc<=this.prev&&o.call(t,"finallyLoc")&&this.prev<t.finallyLoc){var i=t;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),d},finish:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var t=n.completion;if("throw"===t.type){var o=t.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,t){return this.delegate={iterator:I(e),resultName:r,nextLoc:t},"next"===this.method&&(this.arg=n),d}},r}(r.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}});function o(e,r,n,t,o,i,a){try{var l=e[i](a),u=l.value}catch(e){return void n(e)}l.done?r(u):Promise.resolve(u).then(t,o)}var i=function(e){return function(){var r=this,n=arguments;return new Promise(function(t,i){var a=e.apply(r,n);function l(e){o(a,t,i,l,u,"next",e)}function u(e){o(a,t,i,l,u,"throw",e)}l(void 0)})}};var a=function(e,r){for(var n=-1,t=null==e?0:e.length;++n<t&&!1!==r(e[n],n,e););return e};var l=function(e){return function(r,n,t){for(var o=-1,i=Object(r),a=t(r),l=a.length;l--;){var u=a[e?l:++o];if(!1===n(i[u],u,i))break}return r}}();var u=function(e,r){for(var n=-1,t=Array(e);++n<e;)t[n]=r(n);return t},s="object"==e(r)&&r&&r.Object===Object&&r,c="object"==("undefined"==typeof self?"undefined":e(self))&&self&&self.Object===Object&&self,f=s||c||Function("return this")(),v=f.Symbol,h=Object.prototype,p=h.hasOwnProperty,d=h.toString,y=v?v.toStringTag:void 0;var m=function(e){var r=p.call(e,y),n=e[y];try{e[y]=void 0;var t=!0}catch(e){}var o=d.call(e);return t&&(r?e[y]=n:delete e[y]),o},g=Object.prototype.toString;var b=function(e){return g.call(e)},w="[object Null]",j="[object Undefined]",_=v?v.toStringTag:void 0;var k=function(e){return null==e?void 0===e?j:w:_&&_ in Object(e)?m(e):b(e)};var x=function(r){return null!=r&&"object"==e(r)},C="[object Arguments]";var A=function(e){return x(e)&&k(e)==C},S=Object.prototype,O=S.hasOwnProperty,I=S.propertyIsEnumerable,N=A(function(){return arguments}())?A:function(e){return x(e)&&O.call(e,"callee")&&!I.call(e,"callee")},H=Array.isArray;var T=function(){return!1},M=n(function(e,r){var n=r&&!r.nodeType&&r,t=n&&e&&!e.nodeType&&e,o=t&&t.exports===n?f.Buffer:void 0,i=(o?o.isBuffer:void 0)||T;e.exports=i}),D=9007199254740991,E=/^(?:0|[1-9]\d*)$/;var L=function(r,n){var t=e(r);return!!(n=null==n?D:n)&&("number"==t||"symbol"!=t&&E.test(r))&&r>-1&&r%1==0&&r<n},P=9007199254740991;var z=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=P},$={};$["[object Float32Array]"]=$["[object Float64Array]"]=$["[object Int8Array]"]=$["[object Int16Array]"]=$["[object Int32Array]"]=$["[object Uint8Array]"]=$["[object Uint8ClampedArray]"]=$["[object Uint16Array]"]=$["[object Uint32Array]"]=!0,$["[object Arguments]"]=$["[object Array]"]=$["[object ArrayBuffer]"]=$["[object Boolean]"]=$["[object DataView]"]=$["[object Date]"]=$["[object Error]"]=$["[object Function]"]=$["[object Map]"]=$["[object Number]"]=$["[object Object]"]=$["[object RegExp]"]=$["[object Set]"]=$["[object String]"]=$["[object WeakMap]"]=!1;var B=function(e){return x(e)&&z(e.length)&&!!$[k(e)]};var R=function(e){return function(r){return e(r)}},F=n(function(e,r){var n=r&&!r.nodeType&&r,t=n&&e&&!e.nodeType&&e,o=t&&t.exports===n&&s.process,i=function(){try{var e=t&&t.require&&t.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}),Y=F&&F.isTypedArray,U=Y?R(Y):B,W=Object.prototype.hasOwnProperty;var V=function(e,r){var n=H(e),t=!n&&N(e),o=!n&&!t&&M(e),i=!n&&!t&&!o&&U(e),a=n||t||o||i,l=a?u(e.length,String):[],s=l.length;for(var c in e)!r&&!W.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||L(c,s))||l.push(c);return l},G=Object.prototype;var J=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||G)};var X=function(e,r){return function(n){return e(r(n))}},q=X(Object.keys,Object),K=Object.prototype.hasOwnProperty;var Q=function(e){if(!J(e))return q(e);var r=[];for(var n in Object(e))K.call(e,n)&&"constructor"!=n&&r.push(n);return r};var Z=function(r){var n=e(r);return null!=r&&("object"==n||"function"==n)},ee="[object AsyncFunction]",re="[object Function]",ne="[object GeneratorFunction]",te="[object Proxy]";var oe=function(e){if(!Z(e))return!1;var r=k(e);return r==re||r==ne||r==ee||r==te};var ie=function(e){return null!=e&&z(e.length)&&!oe(e)};var ae=function(e){return ie(e)?V(e):Q(e)};var le=function(e,r){return function(n,t){if(null==n)return n;if(!ie(n))return e(n,t);for(var o=n.length,i=r?o:-1,a=Object(n);(r?i--:++i<o)&&!1!==t(a[i],i,a););return n}}(function(e,r){return e&&l(e,r,ae)});var ue=function(e){return e};var se=function(e){return"function"==typeof e?e:ue};var ce,fe=function(e,r){return(H(e)?a:le)(e,se(r))},ve=f["__core-js_shared__"],he=(ce=/[^.]+$/.exec(ve&&ve.keys&&ve.keys.IE_PROTO||""))?"Symbol(src)_1."+ce:"";var pe=function(e){return!!he&&he in e},de=Function.prototype.toString;var ye=function(e){if(null!=e){try{return de.call(e)}catch(e){}try{return e+""}catch(e){}}return""},me=/^\[object .+?Constructor\]$/,ge=Function.prototype,be=Object.prototype,we=ge.toString,je=be.hasOwnProperty,_e=RegExp("^"+we.call(je).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ke=function(e){return!(!Z(e)||pe(e))&&(oe(e)?_e:me).test(ye(e))};var xe=function(e,r){return null==e?void 0:e[r]};var Ce=function(e,r){var n=xe(e,r);return ke(n)?n:void 0},Ae=Ce(f,"DataView"),Se=Ce(f,"Map"),Oe=Ce(f,"Promise"),Ie=Ce(f,"Set"),Ne=Ce(f,"WeakMap"),He=ye(Ae),Te=ye(Se),Me=ye(Oe),De=ye(Ie),Ee=ye(Ne),Le=k;(Ae&&"[object DataView]"!=Le(new Ae(new ArrayBuffer(1)))||Se&&"[object Map]"!=Le(new Se)||Oe&&"[object Promise]"!=Le(Oe.resolve())||Ie&&"[object Set]"!=Le(new Ie)||Ne&&"[object WeakMap]"!=Le(new Ne))&&(Le=function(e){var r=k(e),n="[object Object]"==r?e.constructor:void 0,t=n?ye(n):"";if(t)switch(t){case He:return"[object DataView]";case Te:return"[object Map]";case Me:return"[object Promise]";case De:return"[object Set]";case Ee:return"[object WeakMap]"}return r});var Pe=Le,ze="[object String]";var $e=function(e){return"string"==typeof e||!H(e)&&x(e)&&k(e)==ze};var Be=function(e){return function(r){return null==r?void 0:r[e]}},Re=Be("length"),Fe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Ye=function(e){return Fe.test(e)},Ue="[\\ud800-\\udfff]",We="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ve="\\ud83c[\\udffb-\\udfff]",Ge="[^\\ud800-\\udfff]",Je="(?:\\ud83c[\\udde6-\\uddff]){2}",Xe="[\\ud800-\\udbff][\\udc00-\\udfff]",qe="(?:"+We+"|"+Ve+")"+"?",Ke="[\\ufe0e\\ufe0f]?"+qe+("(?:\\u200d(?:"+[Ge,Je,Xe].join("|")+")[\\ufe0e\\ufe0f]?"+qe+")*"),Qe="(?:"+[Ge+We+"?",We,Je,Xe,Ue].join("|")+")",Ze=RegExp(Ve+"(?="+Ve+")|"+Qe+Ke,"g");var er=function(e){for(var r=Ze.lastIndex=0;Ze.test(e);)++r;return r};var rr=function(e){return Ye(e)?er(e):Re(e)},nr="[object Map]",tr="[object Set]";var or=function(e){if(null==e)return 0;if(ie(e))return $e(e)?rr(e):e.length;var r=Pe(e);return r==nr||r==tr?e.size:Q(e).length},ir=function(){return f.Date.now()},ar="[object Symbol]";var lr=function(r){return"symbol"==e(r)||x(r)&&k(r)==ar},ur=NaN,sr=/^\s+|\s+$/g,cr=/^[-+]0x[0-9a-f]+$/i,fr=/^0b[01]+$/i,vr=/^0o[0-7]+$/i,hr=parseInt;var pr=function(e){if("number"==typeof e)return e;if(lr(e))return ur;if(Z(e)){var r="function"==typeof e.valueOf?e.valueOf():e;e=Z(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(sr,"");var n=fr.test(e);return n||vr.test(e)?hr(e.slice(2),n?2:8):cr.test(e)?ur:+e},dr="Expected a function",yr=Math.max,mr=Math.min;var gr=function(e,r,n){var t,o,i,a,l,u,s=0,c=!1,f=!1,v=!0;if("function"!=typeof e)throw new TypeError(dr);function h(r){var n=t,i=o;return t=o=void 0,s=r,a=e.apply(i,n)}function p(e){var n=e-u;return void 0===u||n>=r||n<0||f&&e-s>=i}function d(){var e=ir();if(p(e))return y(e);l=setTimeout(d,function(e){var n=r-(e-u);return f?mr(n,i-(e-s)):n}(e))}function y(e){return l=void 0,v&&t?h(e):(t=o=void 0,a)}function m(){var e=ir(),n=p(e);if(t=arguments,o=this,u=e,n){if(void 0===l)return function(e){return s=e,l=setTimeout(d,r),c?h(e):a}(u);if(f)return clearTimeout(l),l=setTimeout(d,r),h(u)}return void 0===l&&(l=setTimeout(d,r)),a}return r=pr(r)||0,Z(n)&&(c=!!n.leading,i=(f="maxWait"in n)?yr(pr(n.maxWait)||0,r):i,v="trailing"in n?!!n.trailing:v),m.cancel=function(){void 0!==l&&clearTimeout(l),s=0,t=u=o=l=void 0},m.flush=function(){return void 0===l?a:y(ir())},m};var br=function(){this.__data__=[],this.size=0};var wr=function(e,r){return e===r||e!=e&&r!=r};var jr=function(e,r){for(var n=e.length;n--;)if(wr(e[n][0],r))return n;return-1},_r=Array.prototype.splice;var kr=function(e){var r=this.__data__,n=jr(r,e);return!(n<0)&&(n==r.length-1?r.pop():_r.call(r,n,1),--this.size,!0)};var xr=function(e){var r=this.__data__,n=jr(r,e);return n<0?void 0:r[n][1]};var Cr=function(e){return jr(this.__data__,e)>-1};var Ar=function(e,r){var n=this.__data__,t=jr(n,e);return t<0?(++this.size,n.push([e,r])):n[t][1]=r,this};function Sr(e){var r=-1,n=null==e?0:e.length;for(this.clear();++r<n;){var t=e[r];this.set(t[0],t[1])}}Sr.prototype.clear=br,Sr.prototype.delete=kr,Sr.prototype.get=xr,Sr.prototype.has=Cr,Sr.prototype.set=Ar;var Or=Sr;var Ir=function(){this.__data__=new Or,this.size=0};var Nr=function(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n};var Hr=function(e){return this.__data__.get(e)};var Tr=function(e){return this.__data__.has(e)},Mr=Ce(Object,"create");var Dr=function(){this.__data__=Mr?Mr(null):{},this.size=0};var Er=function(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r},Lr="__lodash_hash_undefined__",Pr=Object.prototype.hasOwnProperty;var zr=function(e){var r=this.__data__;if(Mr){var n=r[e];return n===Lr?void 0:n}return Pr.call(r,e)?r[e]:void 0},$r=Object.prototype.hasOwnProperty;var Br=function(e){var r=this.__data__;return Mr?void 0!==r[e]:$r.call(r,e)},Rr="__lodash_hash_undefined__";var Fr=function(e,r){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Mr&&void 0===r?Rr:r,this};function Yr(e){var r=-1,n=null==e?0:e.length;for(this.clear();++r<n;){var t=e[r];this.set(t[0],t[1])}}Yr.prototype.clear=Dr,Yr.prototype.delete=Er,Yr.prototype.get=zr,Yr.prototype.has=Br,Yr.prototype.set=Fr;var Ur=Yr;var Wr=function(){this.size=0,this.__data__={hash:new Ur,map:new(Se||Or),string:new Ur}};var Vr=function(r){var n=e(r);return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r};var Gr=function(e,r){var n=e.__data__;return Vr(r)?n["string"==typeof r?"string":"hash"]:n.map};var Jr=function(e){var r=Gr(this,e).delete(e);return this.size-=r?1:0,r};var Xr=function(e){return Gr(this,e).get(e)};var qr=function(e){return Gr(this,e).has(e)};var Kr=function(e,r){var n=Gr(this,e),t=n.size;return n.set(e,r),this.size+=n.size==t?0:1,this};function Qr(e){var r=-1,n=null==e?0:e.length;for(this.clear();++r<n;){var t=e[r];this.set(t[0],t[1])}}Qr.prototype.clear=Wr,Qr.prototype.delete=Jr,Qr.prototype.get=Xr,Qr.prototype.has=qr,Qr.prototype.set=Kr;var Zr=Qr,en=200;var rn=function(e,r){var n=this.__data__;if(n instanceof Or){var t=n.__data__;if(!Se||t.length<en-1)return t.push([e,r]),this.size=++n.size,this;n=this.__data__=new Zr(t)}return n.set(e,r),this.size=n.size,this};function nn(e){var r=this.__data__=new Or(e);this.size=r.size}nn.prototype.clear=Ir,nn.prototype.delete=Nr,nn.prototype.get=Hr,nn.prototype.has=Tr,nn.prototype.set=rn;var tn=nn,on=function(){try{var e=Ce(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var an=function(e,r,n){"__proto__"==r&&on?on(e,r,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[r]=n},ln=Object.prototype.hasOwnProperty;var un=function(e,r,n){var t=e[r];ln.call(e,r)&&wr(t,n)&&(void 0!==n||r in e)||an(e,r,n)};var sn=function(e,r,n,t){var o=!n;n||(n={});for(var i=-1,a=r.length;++i<a;){var l=r[i],u=t?t(n[l],e[l],l,n,e):void 0;void 0===u&&(u=e[l]),o?an(n,l,u):un(n,l,u)}return n};var cn=function(e,r){return e&&sn(r,ae(r),e)};var fn=function(e){var r=[];if(null!=e)for(var n in Object(e))r.push(n);return r},vn=Object.prototype.hasOwnProperty;var hn=function(e){if(!Z(e))return fn(e);var r=J(e),n=[];for(var t in e)("constructor"!=t||!r&&vn.call(e,t))&&n.push(t);return n};var pn=function(e){return ie(e)?V(e,!0):hn(e)};var dn=function(e,r){return e&&sn(r,pn(r),e)},yn=n(function(e,r){var n=r&&!r.nodeType&&r,t=n&&e&&!e.nodeType&&e,o=t&&t.exports===n?f.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(e,r){if(r)return e.slice();var n=e.length,t=i?i(n):new e.constructor(n);return e.copy(t),t}});var mn=function(e,r){var n=-1,t=e.length;for(r||(r=Array(t));++n<t;)r[n]=e[n];return r};var gn=function(e,r){for(var n=-1,t=null==e?0:e.length,o=0,i=[];++n<t;){var a=e[n];r(a,n,e)&&(i[o++]=a)}return i};var bn=function(){return[]},wn=Object.prototype.propertyIsEnumerable,jn=Object.getOwnPropertySymbols,_n=jn?function(e){return null==e?[]:(e=Object(e),gn(jn(e),function(r){return wn.call(e,r)}))}:bn;var kn=function(e,r){return sn(e,_n(e),r)};var xn=function(e,r){for(var n=-1,t=r.length,o=e.length;++n<t;)e[o+n]=r[n];return e},Cn=X(Object.getPrototypeOf,Object),An=Object.getOwnPropertySymbols?function(e){for(var r=[];e;)xn(r,_n(e)),e=Cn(e);return r}:bn;var Sn=function(e,r){return sn(e,An(e),r)};var On=function(e,r,n){var t=r(e);return H(e)?t:xn(t,n(e))};var In=function(e){return On(e,ae,_n)};var Nn=function(e){return On(e,pn,An)},Hn=Object.prototype.hasOwnProperty;var Tn=function(e){var r=e.length,n=new e.constructor(r);return r&&"string"==typeof e[0]&&Hn.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Mn=f.Uint8Array;var Dn=function(e){var r=new e.constructor(e.byteLength);return new Mn(r).set(new Mn(e)),r};var En=function(e,r){var n=r?Dn(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},Ln=/\w*$/;var Pn=function(e){var r=new e.constructor(e.source,Ln.exec(e));return r.lastIndex=e.lastIndex,r},zn=v?v.prototype:void 0,$n=zn?zn.valueOf:void 0;var Bn=function(e){return $n?Object($n.call(e)):{}};var Rn=function(e,r){var n=r?Dn(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},Fn="[object Boolean]",Yn="[object Date]",Un="[object Map]",Wn="[object Number]",Vn="[object RegExp]",Gn="[object Set]",Jn="[object String]",Xn="[object Symbol]",qn="[object ArrayBuffer]",Kn="[object DataView]",Qn="[object Float32Array]",Zn="[object Float64Array]",et="[object Int8Array]",rt="[object Int16Array]",nt="[object Int32Array]",tt="[object Uint8Array]",ot="[object Uint8ClampedArray]",it="[object Uint16Array]",at="[object Uint32Array]";var lt=function(e,r,n){var t=e.constructor;switch(r){case qn:return Dn(e);case Fn:case Yn:return new t(+e);case Kn:return En(e,n);case Qn:case Zn:case et:case rt:case nt:case tt:case ot:case it:case at:return Rn(e,n);case Un:return new t;case Wn:case Jn:return new t(e);case Vn:return Pn(e);case Gn:return new t;case Xn:return Bn(e)}},ut=Object.create,st=function(){function e(){}return function(r){if(!Z(r))return{};if(ut)return ut(r);e.prototype=r;var n=new e;return e.prototype=void 0,n}}();var ct=function(e){return"function"!=typeof e.constructor||J(e)?{}:st(Cn(e))},ft="[object Map]";var vt=function(e){return x(e)&&Pe(e)==ft},ht=F&&F.isMap,pt=ht?R(ht):vt,dt="[object Set]";var yt=function(e){return x(e)&&Pe(e)==dt},mt=F&&F.isSet,gt=mt?R(mt):yt,bt=1,wt=2,jt=4,_t="[object Arguments]",kt="[object Function]",xt="[object GeneratorFunction]",Ct="[object Object]",At={};At[_t]=At["[object Array]"]=At["[object ArrayBuffer]"]=At["[object DataView]"]=At["[object Boolean]"]=At["[object Date]"]=At["[object Float32Array]"]=At["[object Float64Array]"]=At["[object Int8Array]"]=At["[object Int16Array]"]=At["[object Int32Array]"]=At["[object Map]"]=At["[object Number]"]=At[Ct]=At["[object RegExp]"]=At["[object Set]"]=At["[object String]"]=At["[object Symbol]"]=At["[object Uint8Array]"]=At["[object Uint8ClampedArray]"]=At["[object Uint16Array]"]=At["[object Uint32Array]"]=!0,At["[object Error]"]=At[kt]=At["[object WeakMap]"]=!1;var St=function e(r,n,t,o,i,l){var u,s=n&bt,c=n&wt,f=n&jt;if(t&&(u=i?t(r,o,i,l):t(r)),void 0!==u)return u;if(!Z(r))return r;var v=H(r);if(v){if(u=Tn(r),!s)return mn(r,u)}else{var h=Pe(r),p=h==kt||h==xt;if(M(r))return yn(r,s);if(h==Ct||h==_t||p&&!i){if(u=c||p?{}:ct(r),!s)return c?Sn(r,dn(u,r)):kn(r,cn(u,r))}else{if(!At[h])return i?r:{};u=lt(r,h,s)}}l||(l=new tn);var d=l.get(r);if(d)return d;l.set(r,u),gt(r)?r.forEach(function(o){u.add(e(o,n,t,o,r,l))}):pt(r)&&r.forEach(function(o,i){u.set(i,e(o,n,t,i,r,l))});var y=f?c?Nn:In:c?keysIn:ae,m=v?void 0:y(r);return a(m||r,function(o,i){m&&(o=r[i=o]),un(u,i,e(o,n,t,i,r,l))}),u},Ot=1,It=4;var Nt=function(e){return St(e,Ot|It)},Ht="[object Number]";var Tt=function(e){return"number"==typeof e||x(e)&&k(e)==Ht},Mt="[object Boolean]";var Dt=function(e){return!0===e||!1===e||x(e)&&k(e)==Mt};var Et=function(e,r){for(var n=-1,t=null==e?0:e.length,o=Array(t);++n<t;)o[n]=r(e[n],n,e);return o},Lt=1/0,Pt=v?v.prototype:void 0,zt=Pt?Pt.toString:void 0;var $t=function e(r){if("string"==typeof r)return r;if(H(r))return Et(r,e)+"";if(lr(r))return zt?zt.call(r):"";var n=r+"";return"0"==n&&1/r==-Lt?"-0":n};var Bt=function(e){return null==e?"":$t(e)},Rt=1/0,Ft=17976931348623157e292;var Yt=function(e){return e?(e=pr(e))===Rt||e===-Rt?(e<0?-1:1)*Ft:e==e?e:0:0===e?e:0};var Ut=function(e){var r=Yt(e),n=r%1;return r==r?n?r-n:r:0};function Wt(e){return"[object Array]"===Object.prototype.toString.call(e)}function Vt(e){return"[object Object]"===Object.prototype.toString.call(e)}var Gt=function(e){return"number"==typeof e&&e==Ut(e)};function Jt(e){return!(!function(e){return"[object String]"===Object.prototype.toString.call(e)}(e)||""===e)}function Xt(e){var r=!1;return Jt(e)?r=!isNaN(Number(e)):function(e){return"[object Number]"===Object.prototype.toString.call(e)}(e)&&(r=!0),r}function qt(e){return Xt(e)?Yt(e):0}var Kt=f.isFinite,Qt=Math.min;var Zt=function(e){var r=Math[e];return function(e,n){if(e=pr(e),(n=null==n?0:Qt(Ut(n),292))&&Kt(e)){var t=(Bt(e)+"e").split("e"),o=r(t[0]+"e"+(+t[1]+n));return+((t=(Bt(o)+"e").split("e"))[0]+"e"+(+t[1]-n))}return r(e)}}("round");function eo(e){return!!function(e){return!!Xt(e)&&(e=qt(e),Gt(e))}(e)&&function(e){if(!Xt(e))return 0;e=qt(e);var r=Zt(e);return"0"===String(r)?0:r}(e)>0}var ro=function(e,r){var n=[];return le(e,function(e,t,o){r(e,t,o)&&n.push(e)}),n},no="__lodash_hash_undefined__";var to=function(e){return this.__data__.set(e,no),this};var oo=function(e){return this.__data__.has(e)};function io(e){var r=-1,n=null==e?0:e.length;for(this.__data__=new Zr;++r<n;)this.add(e[r])}io.prototype.add=io.prototype.push=to,io.prototype.has=oo;var ao=io;var lo=function(e,r){for(var n=-1,t=null==e?0:e.length;++n<t;)if(r(e[n],n,e))return!0;return!1};var uo=function(e,r){return e.has(r)},so=1,co=2;var fo=function(e,r,n,t,o,i){var a=n&so,l=e.length,u=r.length;if(l!=u&&!(a&&u>l))return!1;var s=i.get(e);if(s&&i.get(r))return s==r;var c=-1,f=!0,v=n&co?new ao:void 0;for(i.set(e,r),i.set(r,e);++c<l;){var h=e[c],p=r[c];if(t)var d=a?t(p,h,c,r,e,i):t(h,p,c,e,r,i);if(void 0!==d){if(d)continue;f=!1;break}if(v){if(!lo(r,function(e,r){if(!uo(v,r)&&(h===e||o(h,e,n,t,i)))return v.push(r)})){f=!1;break}}else if(h!==p&&!o(h,p,n,t,i)){f=!1;break}}return i.delete(e),i.delete(r),f};var vo=function(e){var r=-1,n=Array(e.size);return e.forEach(function(e,t){n[++r]=[t,e]}),n};var ho=function(e){var r=-1,n=Array(e.size);return e.forEach(function(e){n[++r]=e}),n},po=1,yo=2,mo="[object Boolean]",go="[object Date]",bo="[object Error]",wo="[object Map]",jo="[object Number]",_o="[object RegExp]",ko="[object Set]",xo="[object String]",Co="[object Symbol]",Ao="[object ArrayBuffer]",So="[object DataView]",Oo=v?v.prototype:void 0,Io=Oo?Oo.valueOf:void 0;var No=function(e,r,n,t,o,i,a){switch(n){case So:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Ao:return!(e.byteLength!=r.byteLength||!i(new Mn(e),new Mn(r)));case mo:case go:case jo:return wr(+e,+r);case bo:return e.name==r.name&&e.message==r.message;case _o:case xo:return e==r+"";case wo:var l=vo;case ko:var u=t&po;if(l||(l=ho),e.size!=r.size&&!u)return!1;var s=a.get(e);if(s)return s==r;t|=yo,a.set(e,r);var c=fo(l(e),l(r),t,o,i,a);return a.delete(e),c;case Co:if(Io)return Io.call(e)==Io.call(r)}return!1},Ho=1,To=Object.prototype.hasOwnProperty;var Mo=function(e,r,n,t,o,i){var a=n&Ho,l=In(e),u=l.length;if(u!=In(r).length&&!a)return!1;for(var s=u;s--;){var c=l[s];if(!(a?c in r:To.call(r,c)))return!1}var f=i.get(e);if(f&&i.get(r))return f==r;var v=!0;i.set(e,r),i.set(r,e);for(var h=a;++s<u;){var p=e[c=l[s]],d=r[c];if(t)var y=a?t(d,p,c,r,e,i):t(p,d,c,e,r,i);if(!(void 0===y?p===d||o(p,d,n,t,i):y)){v=!1;break}h||(h="constructor"==c)}if(v&&!h){var m=e.constructor,g=r.constructor;m!=g&&"constructor"in e&&"constructor"in r&&!("function"==typeof m&&m instanceof m&&"function"==typeof g&&g instanceof g)&&(v=!1)}return i.delete(e),i.delete(r),v},Do=1,Eo="[object Arguments]",Lo="[object Array]",Po="[object Object]",zo=Object.prototype.hasOwnProperty;var $o=function(e,r,n,t,o,i){var a=H(e),l=H(r),u=a?Lo:Pe(e),s=l?Lo:Pe(r),c=(u=u==Eo?Po:u)==Po,f=(s=s==Eo?Po:s)==Po,v=u==s;if(v&&M(e)){if(!M(r))return!1;a=!0,c=!1}if(v&&!c)return i||(i=new tn),a||U(e)?fo(e,r,n,t,o,i):No(e,r,u,n,t,o,i);if(!(n&Do)){var h=c&&zo.call(e,"__wrapped__"),p=f&&zo.call(r,"__wrapped__");if(h||p){var d=h?e.value():e,y=p?r.value():r;return i||(i=new tn),o(d,y,n,t,i)}}return!!v&&(i||(i=new tn),Mo(e,r,n,t,o,i))};var Bo=function e(r,n,t,o,i){return r===n||(null==r||null==n||!x(r)&&!x(n)?r!=r&&n!=n:$o(r,n,t,o,e,i))},Ro=1,Fo=2;var Yo=function(e,r,n,t){var o=n.length,i=o,a=!t;if(null==e)return!i;for(e=Object(e);o--;){var l=n[o];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<i;){var u=(l=n[o])[0],s=e[u],c=l[1];if(a&&l[2]){if(void 0===s&&!(u in e))return!1}else{var f=new tn;if(t)var v=t(s,c,u,e,r,f);if(!(void 0===v?Bo(c,s,Ro|Fo,t,f):v))return!1}}return!0};var Uo=function(e){return e==e&&!Z(e)};var Wo=function(e){for(var r=ae(e),n=r.length;n--;){var t=r[n],o=e[t];r[n]=[t,o,Uo(o)]}return r};var Vo=function(e,r){return function(n){return null!=n&&(n[e]===r&&(void 0!==r||e in Object(n)))}};var Go=function(e){var r=Wo(e);return 1==r.length&&r[0][2]?Vo(r[0][0],r[0][1]):function(n){return n===e||Yo(n,e,r)}},Jo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xo=/^\w*$/;var qo=function(r,n){if(H(r))return!1;var t=e(r);return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=r&&!lr(r))||(Xo.test(r)||!Jo.test(r)||null!=n&&r in Object(n))},Ko="Expected a function";function Qo(e,r){if("function"!=typeof e||null!=r&&"function"!=typeof r)throw new TypeError(Ko);var n=function n(){var t=arguments,o=r?r.apply(this,t):t[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,t);return n.cache=i.set(o,a)||i,a};return n.cache=new(Qo.Cache||Zr),n}Qo.Cache=Zr;var Zo=Qo,ei=500;var ri=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ni=/\\(\\)?/g,ti=function(e){var r=Zo(e,function(e){return n.size===ei&&n.clear(),e}),n=r.cache;return r}(function(e){var r=[];return 46===e.charCodeAt(0)&&r.push(""),e.replace(ri,function(e,n,t,o){r.push(t?o.replace(ni,"$1"):n||e)}),r});var oi=function(e,r){return H(e)?e:qo(e,r)?[e]:ti(Bt(e))},ii=1/0;var ai=function(e){if("string"==typeof e||lr(e))return e;var r=e+"";return"0"==r&&1/e==-ii?"-0":r};var li=function(e,r){for(var n=0,t=(r=oi(r,e)).length;null!=e&&n<t;)e=e[ai(r[n++])];return n&&n==t?e:void 0};var ui=function(e,r,n){var t=null==e?void 0:li(e,r);return void 0===t?n:t};var si=function(e,r){return null!=e&&r in Object(e)};var ci=function(e,r,n){for(var t=-1,o=(r=oi(r,e)).length,i=!1;++t<o;){var a=ai(r[t]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++t!=o?i:!!(o=null==e?0:e.length)&&z(o)&&L(a,o)&&(H(e)||N(e))};var fi=function(e,r){return null!=e&&ci(e,r,si)},vi=1,hi=2;var pi=function(e,r){return qo(e)&&Uo(r)?Vo(ai(e),r):function(n){var t=ui(n,e);return void 0===t&&t===r?fi(n,e):Bo(r,t,vi|hi)}};var di=function(e){return function(r){return li(r,e)}};var yi=function(e){return qo(e)?Be(ai(e)):di(e)};var mi=function(r){return"function"==typeof r?r:null==r?ue:"object"==e(r)?H(r)?pi(r[0],r[1]):Go(r):yi(r)};var gi=function(e,r){return(H(e)?gn:ro)(e,mi(r))};var bi=function(e,r,n){for(var t=-1,o=e.length;++t<o;){var i=e[t],a=r(i);if(null!=a&&(void 0===l?a==a&&!lr(a):n(a,l)))var l=a,u=i}return u};var wi=function(e,r){return e>r};var ji=function(e,r){return e&&e.length?bi(e,mi(r),wi):void 0};function _i(e,r){for(var n=or(e),t=0,o=r(t),i=n-1,a=r(i),l=!0,u=null;l;){var s=Math.floor((i+t)/2),c=r(s);if(o<0&&c<0&&a<0){u=null,l=!1;break}if(o>0&&c>0&&a>0){u=null,l=!1;break}if(0===o){u=t,l=!1;break}if(0===c){u=s,l=!1;break}if(0===a){u=i,l=!1;break}if(s===t||s===i){var f=[{i:t,v:o},{i:s,v:c},{i:i,v:a}];f=gi(f,function(e){return e.v<=0}),u=ji(f,"v").i,l=!1;break}o*c>0?(t=s,o=c):(i=s,a=c)}return u}var ki={};var xi,Ci={set:function(e,r){ki[e]=r},get:function(e){return ki[e]},remove:function(e){delete ki[e]}},Ai={props:{data:{},listHeight:{type:Number,default:400},itemMinHeight:{type:Number,default:24},itemsPreload:{type:Number,default:40},iconColor:{type:String,default:"#999999"},keyColor:{type:String,default:"#666666"},keyNumbersColor:{type:String,default:"#aaaaaa"},numColor:{type:String,default:"#1c00d4"},strColor:{type:String,default:"#ebaf61"},bolColor:{type:String,default:"#80d85f"},funColor:{type:String,default:"#ca56da"},defaultColor:{type:String,default:"#222222"},defDisplayChildren:{type:Boolean,default:!0}},data:function(){return{mmkey:null,changeDisplayChildren:!0,changeDisplayChildrenIndex:null,changeHeight:!0,lineNumberWidth:0,scrollTop:0,scrollRatio:1,contentHeight:0,contentHeightMax:1e7,itemsHeight:0,styleLineNumber:{display:"table-cell","padding-right":"10px","text-align":"right","font-size":"0.8rem",color:"#f26","user-select":"none"},useItems:[]}},beforeDestroy:function(){Ci.remove(this.mmkey)},mounted:function(){this.change()},watch:{data:{immediate:!0,handler:function(e){var r=this;null===r.mmkey?r.mmkey=function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=[],o=n.length;if(eo(r))for(e=0;e<r;e++)t[e]=n[0|Math.random()*o];else{if("rfc4122"!==r)return"";var i;for(t[8]=t[13]=t[18]=t[23]="-",t[14]="4",e=0;e<36;e++)t[e]||(i=0|16*Math.random(),t[e]=n[19===e?3&i|8:i])}return t.join("")}():Ci.remove(r.mmkey);var n=r.parseData(r.data),t=13*(Math.ceil(Math.pow(or(n),.1))+1);Ci.set(r.mmkey,n),r.lineNumberWidth=t,r.change()}}},computed:{},methods:{change:(xi=i(t.mark(function e(){var r,n,o,i;return t.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e,t,o,i=((o=new Promise(function(){e=arguments[0],t=arguments[1]})).resolve=e,o.reject=t,o);return n+=1,r.genUseItems(),setTimeout(function(){var e=r.updateItems();i.resolve(e)},50),n>=5&&i.resolve(!1),i},r=this,n=0,e.next=5,o();case 5:i=e.sent;case 6:if(!i){e.next=12;break}return e.next=9,o();case 9:i=e.sent,e.next=6;break;case 12:case"end":return e.stop()}},e,this)})),function(){return xi.apply(this,arguments)}),genUseItems:function(){var e,r,n,t,o,i=this,a=Ci.get(i.mmkey),l=i.contentHeight-i.listHeight,u=i.itemsHeight;if(l>=0){var s=(o=Math.min(i.scrollTop,l))/l,c=i.listHeight/i.scrollRatio/l;n=s/(1+c),t=(n=Math.max(n,0))+c,t=Math.min(t,1),e=n*u,r=t*u}else o=0,n=0,t=1,e=0,r=i.itemsHeight;var f=or(a),v=_i(a,function(r){var n=a[r];return e-(n.y+n.height)});null===v&&(v=0);var h=Math.max(v-i.itemsPreload,0),p=_i(a,function(e){var n=a[e];return r-n.y});null===p&&(p=f-1);for(var d=Math.min(p+i.itemsPreload,f-1),y=[],m=h;m<=d;m++){var g=Nt(a[m]);g.screenY=(g.y/u-n)*i.contentHeight*i.scrollRatio+o,g.nowShow=m>=v,y.push(g)}i.useItems=y},updateItems:function(){var e=this,r=Ci.get(e.mmkey),n=or(r);if(e.changeDisplayChildren){var t=0;null!==e.changeDisplayChildrenIndex&&(t=e.changeDisplayChildrenIndex);for(var o=!1,i=null,a=null,l=t;l<n;l++){var u=r[l];if(o||u.displayChildren||(o=!0,i=u.level,a=l),a!==l&&o){if(u.level>i)!1!==u.show&&(u.show=!1);else if(u.level===i){!1!==u.show&&(u.show=!1);break}}else!0!==u.show&&(u.show=!0)}}fe(e.$refs.itemDiv,function(t){if(t.getAttribute("nowShow")){var o=Ut(t.getAttribute("index"));if(o>=0&&o<n){var i=t.clientHeight;r[o].height!==i&&(r[o].height=i,e.changeHeight=!0)}}});var s=e.changeHeight||e.changeDisplayChildren;if(s){for(var c=0,f=0,v=0;v<n;v++){var h=r[v];h.y!==c&&(h.y=c),h.show?(c+=h.height,h.useHeight!==h.height&&(h.useHeight=h.height)):0!==h.useHeight&&(h.useHeight=0),h.useY!==f&&(h.useY=f),f+=h.useHeight}e.itemsHeight!==c&&(e.itemsHeight=c,e.contentHeight=Math.min(e.itemsHeight,e.contentHeightMax),e.scrollRatio=e.itemsHeight/e.contentHeight),e.changeDisplayChildren=!1,e.changeDisplayChildrenIndex=null,e.changeHeight=!1}return s},parseData:function(e){var r=this,n=-1,t=[];function o(e){if(Tt(e))return{type:"num",value:Bt(e)};if($e(e))return{type:"str",value:'"'.concat(e,'"')};if(Dt(e)){var r="false";return e&&(r="true"),{type:"bol",value:r}}return oe(e)?{type:"fun",value:e.toString()}:{type:"default",value:e}}function i(e){var o=e.level,i=e.key,a=e.keyNumbers,l=e.value,u=e.valueColor,s=e.valueComma,c=e.valueTail,f=e.hasChildren,v={index:n+=1,level:o,paddingLeft:24*o+16,key:i,keyNumbers:a,value:l,valueColor:u,valueComma:s,valueTail:c,hasChildren:f,displayChildren:r.defDisplayChildren,show:!0,height:r.itemMinHeight,useHeight:0,y:n*r.itemMinHeight,useY:n*r.itemMinHeight,screenY:0,nowShow:!1};t.push(v)}function a(e){var r=e.level,n=e.key,t=e.value,o=e.last,a=or(t),l={type:"arr",n:a},s="[";null!==n&&(s="".concat(n," :  [")),i({level:r,key:s,value:null,valueColor:null,valueTail:"]",keyNumbers:l,valueComma:!1,hasChildren:!0});for(var c=0;c<a;c++)u({level:r+1,key:c,value:t[c],last:c+1===a});var f="],";o&&(f="]"),i({level:r,key:f,value:null,valueColor:null,keyNumbers:null,valueComma:!1,hasChildren:!1})}function l(e){var r=e.level,n=e.key,t=e.value,o=e.last,a=or(ae(t)),l={type:"obj",n:a},s="{";null!==n&&(s="".concat(n," :  {")),i({level:r,key:s,value:null,valueColor:null,valueTail:"}",keyNumbers:l,valueComma:!1,hasChildren:!0});for(var c=Object.keys(t),f=0;f<c.length;f++){var v=c[f];u({level:r+1,key:v,value:t[v],last:v+1===a})}var h="},";o&&(h="}"),i({level:r,key:h,value:null,valueColor:null,keyNumbers:null,valueComma:!1,hasChildren:!1})}function u(e){var n=e.level,t=e.key,u=e.value,s=e.last;if(Wt(u))a({level:n,key:t,value:u,last:s});else if(Vt(u))l({level:n,key:t,value:u,last:s});else{var c=o(u),f=r["".concat(c.type,"Color")];i({level:n,key:"".concat(t," :  "),value:c.value,valueColor:f,keyNumbers:null,valueComma:!s,hasChildren:!1})}}if(Wt(e))a({level:0,key:null,value:e,last:!0});else if(Vt(e))l({level:0,key:null,value:e,last:!0});else{var s=o(e),c=r["".concat(s.type,"Color")];i({level:0,key:null,value:s.value,valueColor:c,keyNumbers:null,valueComma:null,hasChildren:!1})}return t},toggleItems:function(e){var r=this,n=Ci.get(r.mmkey);n[e.index].displayChildren=!n[e.index].displayChildren,setTimeout(function(){r.changeDisplayChildren=!0,r.changeDisplayChildrenIndex=e.index,r.change()},10)},scrollItems:gr(function(e){var r=this;setTimeout(function(){r.scrollTop=e.target.scrollTop,r.change()},10)},100)}};var Si,Oi=function(e,r,n,t,o,i,a,l,u,s){"boolean"!=typeof a&&(u=l,l=a,a=!1);var c,f="function"==typeof n?n.options:n;if(e&&e.render&&(f.render=e.render,f.staticRenderFns=e.staticRenderFns,f._compiled=!0,o&&(f.functional=!0)),t&&(f._scopeId=t),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,u(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},f._ssrRegister=c):r&&(c=a?function(){r.call(this,s(this.$root.$options.shadowRoot))}:function(e){r.call(this,l(e))}),c)if(f.functional){var v=f.render;f.render=function(e,r){return c.call(r),v(e,r)}}else{var h=f.beforeCreate;f.beforeCreate=h?[].concat(h,c):[c]}return n},Ii="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var Ni={};var Hi=function(e){return function(e,r){return function(e,r){var n=Ii?r.media||"default":e,t=Ni[n]||(Ni[n]={ids:new Set,styles:[]});if(!t.ids.has(e)){t.ids.add(e);var o=r.source;if(r.map&&(o+="\n/*# sourceURL="+r.map.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r.map))))+" */"),t.element||(t.element=document.createElement("style"),t.element.type="text/css",r.media&&t.element.setAttribute("media",r.media),void 0===Si&&(Si=document.head||document.getElementsByTagName("head")[0]),Si.appendChild(t.element)),"styleSheet"in t.element)t.styles.push(o),t.element.styleSheet.cssText=t.styles.filter(Boolean).join("\n");else{var i=t.ids.size-1,a=document.createTextNode(o),l=t.element.childNodes;l[i]&&t.element.removeChild(l[i]),l.length?t.element.insertBefore(a,l[i]):t.element.appendChild(a)}}}(e,r)}};const Ti=Ai;var Mi=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{style:[{position:"relative","overflow-y":"auto","overflow-x":"hidden",height:e.listHeight+"px"}],on:{scroll:e.scrollItems}},[n("div",{style:[{height:e.contentHeight+"px"}]}),e._v(" "),e._l(e.useItems,function(r,t){return[r.screenY<=e.contentHeight&&r.show?[n("div",{key:t,ref:"itemDiv",refInFor:!0,style:[{position:"absolute",top:r.screenY+"px",opacity:r.nowShow?1:.01}],attrs:{nowShow:r.nowShow,index:r.index}},[n("div",{style:[e.styleLineNumber,{width:e.lineNumberWidth+"px"}]},[e._v(e._s(r.index+1))]),e._v(" "),n("div",{style:[{display:"table-cell","padding-left":r.paddingLeft+"px"}]},[n("div",{staticStyle:{position:"relative"}},[n("div",{staticStyle:{position:"absolute",top:"0px",left:"0px",transform:"translateX(-100%)"}},[r.hasChildren?n("span",{on:{click:function(n){return e.toggleItems(r)}}},[n("span",{class:[{caretRight:!0,showChildren:r.displayChildren}]},[n("span",{staticClass:"center"},[n("svg",{attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",fill:e.iconColor,width:"11px",height:"11px",x:"0px",y:"0px",viewBox:"0 0 415.346 415.346","xml:space":"preserve"}},[n("g",[n("path",{attrs:{d:"M41.712,415.346c-11.763,0-21.3-9.537-21.3-21.3V21.299C20.412,9.536,29.949,0,41.712,0l346.122,191.697 c0,0,15.975,15.975,0,31.951C371.859,239.622,41.712,415.346,41.712,415.346z"}})])])])])]):n("span",{staticStyle:{display:"inline-block",width:"16px"}})]),e._v(" "),n("div",{staticStyle:{"text-indent":"-2rem","margin-left":"2em"}},[r.key?n("span",{style:[{color:e.keyColor}]},[n("span",[e._v(e._s(r.key))]),e._v(" "),r.keyNumbers?n("span",{style:[{margin:"0px 10px",color:e.keyNumbersColor}]},["arr"===r.keyNumbers.type?n("span",[e._v("["+e._s(r.keyNumbers.n)+"]")]):e._e(),e._v(" "),"obj"===r.keyNumbers.type?n("span",[n("span",[e._v("{")]),n("span",[e._v(e._s(r.keyNumbers.n))]),n("span",[e._v("}")])]):e._e()]):e._e(),e._v(" "),r.displayChildren?e._e():n("span",[n("span",{staticStyle:{"margin-right":"10px"}},[e._v("...")]),e._v(e._s(r.valueTail))])]):e._e(),e._v(" "),r.value?[n("span",{style:[{color:r.valueColor}]},[e._v(e._s(r.value))]),e._v(" "),r.valueComma?n("span",{style:[{color:e.keyColor}]},[e._v(",")]):e._e()]:e._e()],2)])])])]:e._e()]})],2)};Mi._withStripped=!0;return Oi({render:Mi,staticRenderFns:[]},function(e){e&&e("data-v-58e932b4_0",{source:"\n.caretRight[data-v-58e932b4] {\r\n    transform: translateY(-1px);\r\n    cursor: pointer;\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    margin-right: 5px;\n}\n.center[data-v-58e932b4] {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\n}\n.showChildren[data-v-58e932b4] {\r\n    transform: rotate(90deg);\n}\r\n",map:{version:3,sources:["D:\\開源-JS-102-3-w-component-vue\\w-component-vue\\src\\components\\WJsonView.vue"],names:[],mappings:";AAuxBA;IACA,2BAAA;IACA,eAAA;IACA,qBAAA;IACA,sBAAA;IACA,iBAAA;AACA;AACA;IACA,aAAA;IACA,mBAAA;IACA,uBAAA;AACA;AACA;IACA,wBAAA;AACA",file:"WJsonView.vue",sourcesContent:["<template>\r\n    <div\r\n        :style=\"[{'position':'relative','overflow-y':'auto','overflow-x':'hidden','height':listHeight+'px'}]\"\r\n        @scroll=\"scrollItems\"\r\n    >\r\n\r\n        <div :style=\"[{'height':`${contentHeight}px`}]\"></div>\r\n\r\n        <template v-for=\"(item,kitem) in useItems\">\r\n            <template v-if=\"item.screenY<=contentHeight && item.show\">\r\n                <div\r\n                    ref=\"itemDiv\"\r\n                    :nowShow=\"item.nowShow\"\r\n                    :style=\"[{'position':'absolute','top':`${item.screenY}px`,'opacity':item.nowShow?1:0.01}]\"\r\n                    :index=\"item.index\"\r\n                    :key=\"kitem\"\r\n                >\r\n\r\n                    <div :style=\"[styleLineNumber,{'width':lineNumberWidth+'px'}]\">{{item.index+1}}</div>\r\n\r\n                    <div :style=\"[{'display':'table-cell','padding-left':item.paddingLeft+'px'}]\">\r\n\r\n                        <div style=\"position:relative;\">\r\n\r\n                            <div style=\"position:absolute; top:0px; left:0px; transform:translateX(-100%); \">\r\n                                <span v-if=\"item.hasChildren\" @click=\"toggleItems(item)\">\r\n                                    <span :class=\"[{'caretRight':true,'showChildren':item.displayChildren}]\">\r\n                                        <span class=\"center\">\r\n                                            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" :fill=\"iconColor\" width=\"11px\" height=\"11px\" x=\"0px\" y=\"0px\" viewBox=\"0 0 415.346 415.346\" xml:space=\"preserve\"><g><path d=\"M41.712,415.346c-11.763,0-21.3-9.537-21.3-21.3V21.299C20.412,9.536,29.949,0,41.712,0l346.122,191.697 c0,0,15.975,15.975,0,31.951C371.859,239.622,41.712,415.346,41.712,415.346z\"/></g></svg>\r\n                                        </span>\r\n                                    </span>\r\n                                </span>\r\n                                <span style=\"display:inline-block; width:16px;\" v-else></span>\r\n                            </div>\r\n\r\n                            <div style=\"text-indent:-2rem; margin-left:2em;\">\r\n\r\n                                <span :style=\"[{'color':keyColor}]\" v-if=\"item.key\">\r\n\r\n                                    <span>{{item.key}}</span>\r\n\r\n                                    <span :style=\"[{'margin':'0px 10px','color':keyNumbersColor}]\" v-if=\"item.keyNumbers\">\r\n                                        <span v-if=\"item.keyNumbers.type==='arr'\">[{{item.keyNumbers.n}}]</span>\r\n                                        <span v-if=\"item.keyNumbers.type==='obj'\"><span>{</span><span>{{item.keyNumbers.n}}</span><span>}</span></span>\r\n                                    </span>\r\n\r\n                                    <span v-if=\"!item.displayChildren\"><span style=\"margin-right:10px;\">...</span>{{item.valueTail}}</span>\r\n\r\n                                </span>\r\n\r\n                                <template v-if=\"item.value\">\r\n\r\n                                    <span :style=\"[{'color':item.valueColor}]\">{{item.value}}</span>\r\n\r\n                                    <span :style=\"[{'color':keyColor}]\" v-if=\"item.valueComma\">,</span>\r\n\r\n                                </template>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n            </template>\r\n        </template>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport each from 'lodash/each'\r\nimport size from 'lodash/size'\r\nimport keys from 'lodash/keys'\r\nimport debounce from 'lodash/debounce'\r\nimport cloneDeep from 'lodash/cloneDeep'\r\nimport isNumber from 'lodash/isNumber'\r\nimport isString from 'lodash/isString'\r\nimport isBoolean from 'lodash/isBoolean'\r\n// import isArray from 'lodash/isArray' //會誤判function\r\n// import isObject from 'lodash/isObject' //會誤判function\r\nimport isFunction from 'lodash/isFunction'\r\nimport toString from 'lodash/toString'\r\nimport toInteger from 'lodash/toInteger'\r\nimport isarr from 'wsemi/src/isarr.mjs'\r\nimport isobj from 'wsemi/src/isobj.mjs'\r\nimport genID from 'wsemi/src/genID.mjs'\r\nimport genPm from 'wsemi/src/genPm.mjs'\r\nimport binarySearch from '../js/binarySearch.mjs'\r\nimport globalMemory from '../js/globalMemory.mjs'\r\n\r\n// function g(items) {\r\n//     return items.map((v) => {\r\n//         return {\r\n//             i: v.index,\r\n//             //v: `${v.key}: ${v.value}`,\r\n//             s: v.show,\r\n//             //d: v.displayChildren,\r\n//             y: v.y,\r\n//             useY: v.useY,\r\n//             screenY: v.screenY,\r\n//         }\r\n//     })\r\n// }\r\n\r\n//gm\r\nlet gm = globalMemory()\r\n\r\n/**\r\n * @vue-prop {*} data 輸入資料陣列或物件\r\n * @vue-prop {Number} [listHeight=400] 輸入顯示區高度，單位為px，預設400\r\n * @vue-prop {Number} [itemMinHeight=24] 輸入各元素顯示高度，單位為px，預設24，會於真實顯示後自動更新高度\r\n * @vue-prop {Number} [itemsPreload=40] 輸入上下方預先載入元素數量，預設40\r\n * @vue-prop {String} [iconColor='#999999'] 輸入顯隱icon按鈕顏色字串，預設'#999999'\r\n * @vue-prop {String} [keyColor='#666666'] 輸入鍵值顏色字串，預設'#666666'\r\n * @vue-prop {String} [keyNumbersColor='#aaaaaa'] 輸入鍵值內含子節點數量顏色字串，預設'#aaaaaa'\r\n * @vue-prop {String} [numColor='#1c00d4'] 輸入值為數值時的顏色字串，預設'#1c00d4'\r\n * @vue-prop {String} [strColor='#ebaf61'] 輸入值為字串時的顏色字串，預設'#ebaf61'\r\n * @vue-prop {String} [bolColor='#ab0d90'] 輸入值為布林值時的顏色字串，預設'#ab0d90'\r\n * @vue-prop {String} [funColor='#ca56da'] 輸入值為函數時的顏色字串，預設'#ca56da'\r\n * @vue-prop {String} [defaultColor='#222222'] 輸入值為其他類型時的顏色字串，預設'#222222'\r\n * @vue-prop {Boolean} [defDisplayChildren=true] 輸入是否預先展開全部節點，預設true\r\n */\r\nexport default {\r\n    props: {\r\n        data: {},\r\n        listHeight: {\r\n            type: Number,\r\n            default: 400,\r\n        },\r\n        itemMinHeight: {\r\n            type: Number,\r\n            default: 24,\r\n        },\r\n        itemsPreload: {\r\n            type: Number,\r\n            default: 40,\r\n        },\r\n        iconColor: {\r\n            type: String,\r\n            default: '#999999',\r\n        },\r\n        keyColor: {\r\n            type: String,\r\n            default: '#666666',\r\n        },\r\n        keyNumbersColor: {\r\n            type: String,\r\n            default: '#aaaaaa',\r\n        },\r\n        numColor: {\r\n            type: String,\r\n            default: '#1c00d4',\r\n        },\r\n        strColor: {\r\n            type: String,\r\n            default: '#ebaf61',\r\n        },\r\n        bolColor: {\r\n            type: String,\r\n            default: '#80d85f',\r\n        },\r\n        funColor: {\r\n            type: String,\r\n            default: '#ca56da',\r\n        },\r\n        defaultColor: {\r\n            type: String,\r\n            default: '#222222',\r\n        },\r\n        defDisplayChildren: {\r\n            type: Boolean,\r\n            default: true,\r\n        },\r\n    },\r\n    data: function() {\r\n        return {\r\n            mmkey: null,\r\n            changeDisplayChildren: true, //變更displayChildren\r\n            changeDisplayChildrenIndex: null, //變更displayChildren的item指標\r\n            changeHeight: true, //變更高度\r\n            lineNumberWidth: 0, //列號區寬度\r\n            scrollTop: 0, //目前捲軸位置\r\n            scrollRatio: 1, //目前全部節點高度與捲軸內容高度的比值\r\n            contentHeight: 0, //實際撐開用內容高度, 大部分情況等於scrollHeight, 可能會差異一個水平捲軸的高度16px, 此處以contentHeight為計算基準\r\n            contentHeightMax: 1e7, //最大撐開用內容高度, chrome當元素高度超過1.4e7px, 排版沒問題但顯示會被截斷, 故需要通過設定最大高度做映射\r\n            itemsHeight: 0, //儲存全部項目高度\r\n            styleLineNumber: {\r\n                'display': 'table-cell',\r\n                'padding-right': '10px',\r\n                'text-align': 'right',\r\n                'font-size': '0.8rem',\r\n                'color': '#f26',\r\n                'user-select': 'none',\r\n            },\r\n            //items: [],\r\n            useItems: [],\r\n        }\r\n    },\r\n    beforeDestroy: function() {\r\n        //console.log('beforeMount')\r\n\r\n        let vo = this\r\n\r\n        //remove\r\n        gm.remove(vo.mmkey)\r\n\r\n    },\r\n    mounted: function() {\r\n        //console.log('mounted')\r\n\r\n        let vo = this\r\n\r\n        //change, watch時觸發的change因為元素沒實際高度故無法自動調整, 得於mounted再觸發一次\r\n        vo.change()\r\n\r\n    },\r\n    watch: {\r\n\r\n        data: {\r\n            immediate: true,\r\n            handler(value) {\r\n                //console.log('watch data', value)\r\n\r\n                let vo = this\r\n\r\n                //check\r\n                if (vo.mmkey === null) {\r\n\r\n                    //mmkey\r\n                    vo.mmkey = genID()\r\n\r\n                }\r\n                else {\r\n\r\n                    //remove\r\n                    gm.remove(vo.mmkey)\r\n\r\n                }\r\n\r\n                //items\r\n                let items = vo.parseData(vo.data)\r\n\r\n                //lineNumberWidth, 每個字元使用13px寬度\r\n                let lineNumberWidth = (Math.ceil(Math.pow(size(items), 0.1)) + 1) * 13\r\n\r\n                //save items\r\n                //vo.items = items\r\n                gm.set(vo.mmkey, items)\r\n\r\n                //save lineNumberWidth\r\n                vo.lineNumberWidth = lineNumberWidth\r\n\r\n                //change\r\n                vo.change()\r\n\r\n            }\r\n        }\r\n\r\n    },\r\n    computed: {\r\n    },\r\n    methods: {\r\n\r\n        change: async function() {\r\n            //console.log('methods change')\r\n\r\n            let vo = this\r\n\r\n            //core\r\n            let i = 0\r\n            function core() {\r\n                let pm = genPm()\r\n\r\n                //count\r\n                i += 1\r\n\r\n                //genUseItems\r\n                vo.genUseItems()\r\n\r\n                //updateItems\r\n                setTimeout(function() {\r\n                    let b = vo.updateItems()\r\n                    pm.resolve(b)\r\n                }, 50)\r\n\r\n                //break, 重複更新5次視為上限, 避免因數據量大導致事件驅動較慢, 導致持續拉取未顯示區節點, 並導致持續更新高度而無法跳出無限迴圈\r\n                if (i >= 5) {\r\n                    pm.resolve(false)\r\n                }\r\n\r\n                return pm\r\n            }\r\n\r\n            //若任何元素高度有變更則再重新計算需顯示的節點, 此時的確有可能會載入新節點, 所以原本給予節點之預設高度不能太高, 偵測時元素就多是變高, 所以需顯示的節點就會變少, 避免造成重新載入新節點狀況\r\n            let r = await core()\r\n            while (r) {\r\n                r = await core()\r\n            }\r\n\r\n        },\r\n\r\n        genUseItems: function() {\r\n            //console.log('methods genUseItems')\r\n\r\n            let vo = this\r\n\r\n            //items\r\n            //let items = vo.items\r\n            let items = gm.get(vo.mmkey)\r\n\r\n            //y1, y2\r\n            let y1\r\n            let y2\r\n            let he = vo.contentHeight - vo.listHeight\r\n            let heAll = vo.itemsHeight\r\n            let r1\r\n            let r2\r\n            let scrollTop\r\n            if (he >= 0) {\r\n                scrollTop = Math.min(vo.scrollTop, he)\r\n                let r = scrollTop / he //0~1\r\n                let rd12 = vo.listHeight / vo.scrollRatio / he //顯示區上下處的正規化縮放比率差, 需針對最大撐開高度對應實際全部節點高度的比率做修正\r\n                r1 = r / (1 + rd12) //顯示區上方的正規化縮放比率\r\n                r1 = Math.max(r1, 0)\r\n                r2 = r1 + rd12 //顯示區下方的正規化縮放比率\r\n                r2 = Math.min(r2, 1)\r\n                y1 = r1 * heAll\r\n                y2 = r2 * heAll\r\n            }\r\n            else {\r\n                scrollTop = 0\r\n                r1 = 0\r\n                r2 = 1\r\n                y1 = 0\r\n                y2 = vo.itemsHeight\r\n            }\r\n\r\n            //n\r\n            let n = size(items)\r\n\r\n            //indStart, 該元素區有侵入顯示區\r\n            let indStartActual = binarySearch(items, (ind) => {\r\n                let v = items[ind]\r\n                let dy = y1 - (v.y + v.height)\r\n                return dy\r\n            })\r\n            if (indStartActual === null) {\r\n                indStartActual = 0\r\n            }\r\n            let indStart = Math.max(indStartActual - vo.itemsPreload, 0)\r\n\r\n            //indEnd, 該元素區有侵入顯示區\r\n            let indEndActual = binarySearch(items, (ind) => {\r\n                let v = items[ind]\r\n                let dy = y2 - v.y\r\n                return dy\r\n            })\r\n            if (indEndActual === null) {\r\n                indEndActual = n - 1\r\n            }\r\n            let indEnd = Math.min(indEndActual + vo.itemsPreload, n - 1)\r\n\r\n            //useItems\r\n            let useItems = []\r\n            for (let k = indStart; k <= indEnd; k++) {\r\n                let v = cloneDeep(items[k])\r\n                v.screenY = ((v.y / heAll) - r1) * vo.contentHeight * vo.scrollRatio + scrollTop //換算成實際顯示y向的px位置\r\n                v.nowShow = k >= indStartActual //顯示區下方之預載節點都直接顯示供重算高度\r\n                useItems.push(v)\r\n            }\r\n\r\n            //save\r\n            vo.useItems = useItems\r\n\r\n        },\r\n\r\n        updateItems: function() {\r\n            //console.log('methods updateItems')\r\n\r\n            let vo = this\r\n\r\n            //items\r\n            //let items = vo.items\r\n            let items = gm.get(vo.mmkey)\r\n\r\n            //n\r\n            let n = size(items)\r\n\r\n            //check\r\n            if (vo.changeDisplayChildren) {\r\n\r\n                //check\r\n                let index = 0\r\n                if (vo.changeDisplayChildrenIndex !== null) {\r\n                    index = vo.changeDisplayChildrenIndex\r\n                }\r\n\r\n                //update show\r\n                let hide = false\r\n                let level = null\r\n                let ind = null\r\n                for (let k = index; k < n; k++) {\r\n                    let v = items[k]\r\n\r\n                    //detect start\r\n                    if (!hide && !v.displayChildren) {\r\n                        hide = true\r\n                        level = v.level\r\n                        ind = k\r\n                    }\r\n\r\n                    //detect level\r\n                    if (ind !== k && hide) {\r\n                        if (v.level > level) {\r\n                            if (v.show !== false) {\r\n                                v.show = false\r\n                            }\r\n                        }\r\n                        else if (v.level === level) {\r\n                            if (v.show !== false) {\r\n                                v.show = false\r\n                            }\r\n                            break\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (v.show !== true) {\r\n                            v.show = true\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            //update height\r\n            each(vo.$refs.itemDiv, (v) => {\r\n                let nowShow = v.getAttribute('nowShow')\r\n                if (nowShow) {\r\n                    let index = toInteger(v.getAttribute('index'))\r\n                    if (index >= 0 && index < n) {\r\n                        let h = v.clientHeight\r\n                        if (items[index].height !== h) {\r\n                            items[index].height = h\r\n                            vo.changeHeight = true\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n\r\n            //check\r\n            let changed = vo.changeHeight || vo.changeDisplayChildren\r\n            if (changed) {\r\n\r\n                //update y, useY, useHeight\r\n                let y = 0\r\n                let useY = 0\r\n                for (let k = 0; k < n; k++) {\r\n                    let v = items[k]\r\n\r\n                    //y\r\n                    if (v.y !== y) {\r\n                        v.y = y\r\n                    }\r\n\r\n                    //useHeight\r\n                    if (v.show) {\r\n                        y += v.height\r\n                        if (v.useHeight !== v.height) {\r\n                            v.useHeight = v.height\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (v.useHeight !== 0) {\r\n                            v.useHeight = 0\r\n                        }\r\n                    }\r\n\r\n                    //useY\r\n                    if (v.useY !== useY) {\r\n                        v.useY = useY\r\n                    }\r\n                    useY += v.useHeight\r\n\r\n                }\r\n\r\n                //update itemsHeight\r\n                if (vo.itemsHeight !== y) {\r\n                    vo.itemsHeight = y\r\n                    vo.contentHeight = Math.min(vo.itemsHeight, vo.contentHeightMax)\r\n                    vo.scrollRatio = vo.itemsHeight / vo.contentHeight\r\n                }\r\n\r\n                //reset\r\n                vo.changeDisplayChildren = false\r\n                vo.changeDisplayChildrenIndex = null\r\n                vo.changeHeight = false\r\n\r\n            }\r\n\r\n            return changed\r\n        },\r\n\r\n        parseData: function(d) {\r\n            //console.log('methods parseData', d)\r\n\r\n            let vo = this\r\n\r\n            let index = -1\r\n            let items = []\r\n\r\n            function cValue(v) {\r\n                if (isNumber(v)) {\r\n                    return {\r\n                        type: 'num',\r\n                        value: toString(v),\r\n                    }\r\n                }\r\n                else if (isString(v)) {\r\n                    return {\r\n                        type: 'str',\r\n                        value: `\"${v}\"`,\r\n                    }\r\n                }\r\n                else if (isBoolean(v)) {\r\n                    let c = 'false'\r\n                    if (v) {\r\n                        c = 'true'\r\n                    }\r\n                    return {\r\n                        type: 'bol',\r\n                        value: c,\r\n                    }\r\n                }\r\n                else if (isFunction(v)) {\r\n                    return {\r\n                        type: 'fun',\r\n                        value: v.toString(),\r\n                    }\r\n                }\r\n                return {\r\n                    type: 'default',\r\n                    value: v,\r\n                }\r\n            }\r\n\r\n            function addItem({ level, key, keyNumbers, value, valueColor, valueComma, valueTail, hasChildren }) {\r\n                index += 1\r\n                let item = {\r\n                    index, //節點指標\r\n                    level, //int, 節點層數(縮排)\r\n                    paddingLeft: level * 24 + 16, //num, 給予16px放置顯隱icon\r\n                    key, //str, 鍵\r\n                    keyNumbers, //obj, 鍵值為陣列或物件顯示所含節點數量\r\n                    value, //str, 值\r\n                    valueColor, //str, 數值顏色, 需依照值型別給予\r\n                    valueComma, //bol, 數值後方是否顯示\",\"\r\n                    valueTail, //str, 數值後方結尾符號, 僅用於陣列或物件, 供displayChildren=false時額外顯示出結尾符號\r\n                    hasChildren, //bol, 是否有子節點, 僅陣列或物件才為true\r\n                    displayChildren: vo.defDisplayChildren, //bol, 是否顯示子節點\r\n                    show: true, //bol, 是否顯示此節點\r\n                    height: vo.itemMinHeight, //num, 節點高度, 日後動態更新\r\n                    useHeight: 0, //num, 真實使用高度, 受show影響, 加速用\r\n                    y: index * vo.itemMinHeight, //num, 節點y向位置, 預設先由最小列高計算\r\n                    useY: index * vo.itemMinHeight, //num, 真實y向位置, 預設先由最小列高計算\r\n                    screenY: 0, //num, 節點換算比率後的顯示y向位置\r\n                    nowShow: false, //bol, 預先載入時是否隸屬於顯示區域內, 不顯示者\r\n                }\r\n                items.push(item)\r\n            }\r\n\r\n            function pArray({ level, key, value, last }) {\r\n\r\n                let n = size(value)\r\n                let keyNumbers = {\r\n                    type: 'arr',\r\n                    n,\r\n                }\r\n\r\n                let _key = `[`\r\n                if (key !== null) {\r\n                    _key = `${key} :  [`\r\n                }\r\n                addItem({\r\n                    level,\r\n                    key: _key,\r\n                    value: null,\r\n                    valueColor: null,\r\n                    valueTail: ']',\r\n                    keyNumbers,\r\n                    valueComma: false,\r\n                    hasChildren: true,\r\n                })\r\n\r\n                // each(value, (v, k) => {\r\n                //     pSelf({\r\n                //         level: level + 1,\r\n                //         key: k,\r\n                //         value: v,\r\n                //         last: (k + 1) === n,\r\n                //     })\r\n                // })\r\n                for (let k = 0; k < n; k++) {\r\n                    pSelf({\r\n                        level: level + 1,\r\n                        key: k,\r\n                        value: value[k],\r\n                        last: (k + 1) === n,\r\n                    })\r\n                }\r\n\r\n                let cend = `],`\r\n                if (last) {\r\n                    cend = `]`\r\n                }\r\n                addItem({\r\n                    level,\r\n                    key: cend,\r\n                    value: null,\r\n                    valueColor: null,\r\n                    keyNumbers: null,\r\n                    valueComma: false,\r\n                    hasChildren: false,\r\n                })\r\n\r\n            }\r\n\r\n            function pObject({ level, key, value, last }) {\r\n\r\n                let n = size(keys(value))\r\n                let keyNumbers = {\r\n                    type: 'obj',\r\n                    n,\r\n                }\r\n\r\n                let _key = `{`\r\n                if (key !== null) {\r\n                    _key = `${key} :  {`\r\n                }\r\n                addItem({\r\n                    level,\r\n                    key: _key,\r\n                    value: null,\r\n                    valueColor: null,\r\n                    valueTail: '}',\r\n                    keyNumbers,\r\n                    valueComma: false,\r\n                    hasChildren: true,\r\n                })\r\n\r\n                // each(value, (v, k) => {\r\n                //     pSelf({\r\n                //         level: level + 1,\r\n                //         key: k,\r\n                //         value: v,\r\n                //         last: (k + 1) === n,\r\n                //     })\r\n                // })\r\n                let kks = Object.keys(value)\r\n                for (let i = 0; i < kks.length; i++) {\r\n                    let k = kks[i]\r\n                    pSelf({\r\n                        level: level + 1,\r\n                        key: k,\r\n                        value: value[k],\r\n                        last: (k + 1) === n,\r\n                    })\r\n                }\r\n\r\n                let cend = `},`\r\n                if (last) {\r\n                    cend = `}`\r\n                }\r\n                addItem({\r\n                    level,\r\n                    key: cend,\r\n                    value: null,\r\n                    valueColor: null,\r\n                    keyNumbers: null,\r\n                    valueComma: false,\r\n                    hasChildren: false,\r\n                })\r\n\r\n            }\r\n\r\n            function pSelf({ level, key, value, last }) {\r\n                if (isarr(value)) {\r\n                    pArray({ level, key, value, last })\r\n                }\r\n                else if (isobj(value)) {\r\n                    pObject({ level, key, value, last })\r\n                }\r\n                else {\r\n                    let r = cValue(value)\r\n                    let c = vo[`${r.type}Color`]\r\n                    addItem({\r\n                        level,\r\n                        key: `${key} :  `,\r\n                        value: r.value,\r\n                        valueColor: c,\r\n                        keyNumbers: null,\r\n                        valueComma: !last,\r\n                        hasChildren: false,\r\n                    })\r\n                }\r\n            }\r\n\r\n            if (isarr(d)) {\r\n                pArray({\r\n                    level: 0,\r\n                    key: null,\r\n                    value: d,\r\n                    last: true,\r\n                })\r\n            }\r\n            else if (isobj(d)) {\r\n                pObject({\r\n                    level: 0,\r\n                    key: null,\r\n                    value: d,\r\n                    last: true,\r\n                })\r\n            }\r\n            else {\r\n                let r = cValue(d)\r\n                let c = vo[`${r.type}Color`]\r\n                addItem({\r\n                    level: 0,\r\n                    key: null,\r\n                    value: r.value,\r\n                    valueColor: c,\r\n                    keyNumbers: null,\r\n                    valueComma: null,\r\n                    hasChildren: false,\r\n                })\r\n            }\r\n\r\n            return items\r\n        },\r\n\r\n        toggleItems: function(item) {\r\n            //console.log('methods toggleItems',item)\r\n\r\n            let vo = this\r\n\r\n            //items\r\n            //let items = vo.items\r\n            let items = gm.get(vo.mmkey)\r\n\r\n            //toggle, 先變更displayChildren使頁面icon動畫先更新\r\n            items[item.index].displayChildren = !items[item.index].displayChildren\r\n\r\n            //setTimeout\r\n            setTimeout(() => {\r\n\r\n                //changeDisplayChildren, changeDisplayChildrenIndex\r\n                vo.changeDisplayChildren = true\r\n                vo.changeDisplayChildrenIndex = item.index\r\n\r\n                //change\r\n                vo.change()\r\n\r\n            }, 10)\r\n\r\n        },\r\n\r\n        scrollItems: debounce(function(e) {\r\n            //console.log('methods scrollItems', e.target.scrollTop)\r\n\r\n            let vo = this\r\n\r\n            //setTimeout\r\n            setTimeout(() => {\r\n\r\n                //save\r\n                vo.scrollTop = e.target.scrollTop\r\n\r\n                //change\r\n                vo.change()\r\n\r\n            }, 10)\r\n\r\n        }, 100),\r\n\r\n    },\r\n}\r\n<\/script>\r\n\r\n<style scoped>\r\n.caretRight {\r\n    transform: translateY(-1px);\r\n    cursor: pointer;\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    margin-right: 5px;\r\n}\r\n.center {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n.showChildren {\r\n    transform: rotate(90deg);\r\n}\r\n</style>\r\n\r\n"]},media:void 0})},Ti,"data-v-58e932b4",!1,void 0,Hi,void 0)});
//# sourceMappingURL=w-json-view.umd.js.map
