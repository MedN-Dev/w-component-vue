!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self)["w-json-view"]=n()}(this,function(){"use strict";var e=function(e,n){for(var r=-1,t=null==e?0:e.length;++r<t&&!1!==n(e[r],r,e););return e};var n=function(e){return function(n,r,t){for(var i=-1,l=Object(n),o=t(n),a=o.length;a--;){var s=o[e?a:++i];if(!1===r(l[s],s,l))break}return n}}();var r=function(e,n){for(var r=-1,t=Array(e);++r<e;)t[r]=n(r);return t};function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function l(e,n){return e(n={exports:{}},n.exports),n.exports}var o="object"==t(i)&&i&&i.Object===Object&&i,a="object"==("undefined"==typeof self?"undefined":t(self))&&self&&self.Object===Object&&self,s=o||a||Function("return this")(),u=s.Symbol,c=Object.prototype,v=c.hasOwnProperty,d=c.toString,h=u?u.toStringTag:void 0;var f=function(e){var n=v.call(e,h),r=e[h];try{e[h]=void 0;var t=!0}catch(e){}var i=d.call(e);return t&&(n?e[h]=r:delete e[h]),i},p=Object.prototype.toString;var m=function(e){return p.call(e)},y="[object Null]",g="[object Undefined]",b=u?u.toStringTag:void 0;var C=function(e){return null==e?void 0===e?g:y:b&&b in Object(e)?f(e):m(e)};var x=function(e){return null!=e&&"object"==t(e)},k="[object Arguments]";var _=function(e){return x(e)&&C(e)==k},j=Object.prototype,w=j.hasOwnProperty,A=j.propertyIsEnumerable,S=_(function(){return arguments}())?_:function(e){return x(e)&&w.call(e,"callee")&&!A.call(e,"callee")},H=Array.isArray;var N=function(){return!1},I=l(function(e,n){var r=n&&!n.nodeType&&n,t=r&&e&&!e.nodeType&&e,i=t&&t.exports===r?s.Buffer:void 0,l=(i?i.isBuffer:void 0)||N;e.exports=l}),T=9007199254740991,O=/^(?:0|[1-9]\d*)$/;var D=function(e,n){var r=t(e);return!!(n=null==n?T:n)&&("number"==r||"symbol"!=r&&O.test(e))&&e>-1&&e%1==0&&e<n},M=9007199254740991;var $=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=M},R={};R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R["[object Arguments]"]=R["[object Array]"]=R["[object ArrayBuffer]"]=R["[object Boolean]"]=R["[object DataView]"]=R["[object Date]"]=R["[object Error]"]=R["[object Function]"]=R["[object Map]"]=R["[object Number]"]=R["[object Object]"]=R["[object RegExp]"]=R["[object Set]"]=R["[object String]"]=R["[object WeakMap]"]=!1;var Y=function(e){return x(e)&&$(e.length)&&!!R[C(e)]};var z=function(e){return function(n){return e(n)}},B=l(function(e,n){var r=n&&!n.nodeType&&n,t=r&&e&&!e.nodeType&&e,i=t&&t.exports===r&&o.process,l=function(){try{var e=t&&t.require&&t.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=l}),E=B&&B.isTypedArray,P=E?z(E):Y,U=Object.prototype.hasOwnProperty;var W=function(e,n){var t=H(e),i=!t&&S(e),l=!t&&!i&&I(e),o=!t&&!i&&!l&&P(e),a=t||i||l||o,s=a?r(e.length,String):[],u=s.length;for(var c in e)!n&&!U.call(e,c)||a&&("length"==c||l&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||D(c,u))||s.push(c);return s},F=Object.prototype;var V=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||F)};var L=function(e,n){return function(r){return e(n(r))}}(Object.keys,Object),J=Object.prototype.hasOwnProperty;var X=function(e){if(!V(e))return L(e);var n=[];for(var r in Object(e))J.call(e,r)&&"constructor"!=r&&n.push(r);return n};var q=function(e){var n=t(e);return null!=e&&("object"==n||"function"==n)},G="[object AsyncFunction]",K="[object Function]",Q="[object GeneratorFunction]",Z="[object Proxy]";var ee=function(e){if(!q(e))return!1;var n=C(e);return n==K||n==Q||n==G||n==Z};var ne=function(e){return null!=e&&$(e.length)&&!ee(e)};var re=function(e){return ne(e)?W(e):X(e)};var te=function(e,n){return function(r,t){if(null==r)return r;if(!ne(r))return e(r,t);for(var i=r.length,l=n?i:-1,o=Object(r);(n?l--:++l<i)&&!1!==t(o[l],l,o););return r}}(function(e,r){return e&&n(e,r,re)});var ie=function(e){return e};var le=function(e){return"function"==typeof e?e:ie};var oe,ae=function(n,r){return(H(n)?e:te)(n,le(r))},se=s["__core-js_shared__"],ue=(oe=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||""))?"Symbol(src)_1."+oe:"";var ce=function(e){return!!ue&&ue in e},ve=Function.prototype.toString;var de=function(e){if(null!=e){try{return ve.call(e)}catch(e){}try{return e+""}catch(e){}}return""},he=/^\[object .+?Constructor\]$/,fe=Function.prototype,pe=Object.prototype,me=fe.toString,ye=pe.hasOwnProperty,ge=RegExp("^"+me.call(ye).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var be=function(e){return!(!q(e)||ce(e))&&(ee(e)?ge:he).test(de(e))};var Ce=function(e,n){return null==e?void 0:e[n]};var xe=function(e,n){var r=Ce(e,n);return be(r)?r:void 0},ke=xe(s,"DataView"),_e=xe(s,"Map"),je=xe(s,"Promise"),we=xe(s,"Set"),Ae=xe(s,"WeakMap"),Se=de(ke),He=de(_e),Ne=de(je),Ie=de(we),Te=de(Ae),Oe=C;(ke&&"[object DataView]"!=Oe(new ke(new ArrayBuffer(1)))||_e&&"[object Map]"!=Oe(new _e)||je&&"[object Promise]"!=Oe(je.resolve())||we&&"[object Set]"!=Oe(new we)||Ae&&"[object WeakMap]"!=Oe(new Ae))&&(Oe=function(e){var n=C(e),r="[object Object]"==n?e.constructor:void 0,t=r?de(r):"";if(t)switch(t){case Se:return"[object DataView]";case He:return"[object Map]";case Ne:return"[object Promise]";case Ie:return"[object Set]";case Te:return"[object WeakMap]"}return n});var De=Oe,Me="[object String]";var $e=function(e){return"string"==typeof e||!H(e)&&x(e)&&C(e)==Me};var Re=function(e){return function(n){return null==n?void 0:n[e]}}("length"),Ye=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var ze=function(e){return Ye.test(e)},Be="[\\ud800-\\udfff]",Ee="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Pe="\\ud83c[\\udffb-\\udfff]",Ue="[^\\ud800-\\udfff]",We="(?:\\ud83c[\\udde6-\\uddff]){2}",Fe="[\\ud800-\\udbff][\\udc00-\\udfff]",Ve="(?:"+Ee+"|"+Pe+")"+"?",Le="[\\ufe0e\\ufe0f]?"+Ve+("(?:\\u200d(?:"+[Ue,We,Fe].join("|")+")[\\ufe0e\\ufe0f]?"+Ve+")*"),Je="(?:"+[Ue+Ee+"?",Ee,We,Fe,Be].join("|")+")",Xe=RegExp(Pe+"(?="+Pe+")|"+Je+Le,"g");var qe=function(e){for(var n=Xe.lastIndex=0;Xe.test(e);)++n;return n};var Ge=function(e){return ze(e)?qe(e):Re(e)},Ke="[object Map]",Qe="[object Set]";var Ze=function(e){if(null==e)return 0;if(ne(e))return $e(e)?Ge(e):e.length;var n=De(e);return n==Ke||n==Qe?e.size:X(e).length},en="[object Symbol]";var nn=function(e){return"symbol"==t(e)||x(e)&&C(e)==en},rn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tn=/^\w*$/;var ln=function(e,n){if(H(e))return!1;var r=t(e);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!nn(e))||(tn.test(e)||!rn.test(e)||null!=n&&e in Object(n))},on=xe(Object,"create");var an=function(){this.__data__=on?on(null):{},this.size=0};var sn=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},un="__lodash_hash_undefined__",cn=Object.prototype.hasOwnProperty;var vn=function(e){var n=this.__data__;if(on){var r=n[e];return r===un?void 0:r}return cn.call(n,e)?n[e]:void 0},dn=Object.prototype.hasOwnProperty;var hn=function(e){var n=this.__data__;return on?void 0!==n[e]:dn.call(n,e)},fn="__lodash_hash_undefined__";var pn=function(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=on&&void 0===n?fn:n,this};function mn(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var t=e[n];this.set(t[0],t[1])}}mn.prototype.clear=an,mn.prototype.delete=sn,mn.prototype.get=vn,mn.prototype.has=hn,mn.prototype.set=pn;var yn=mn;var gn=function(){this.__data__=[],this.size=0};var bn=function(e,n){return e===n||e!=e&&n!=n};var Cn=function(e,n){for(var r=e.length;r--;)if(bn(e[r][0],n))return r;return-1},xn=Array.prototype.splice;var kn=function(e){var n=this.__data__,r=Cn(n,e);return!(r<0)&&(r==n.length-1?n.pop():xn.call(n,r,1),--this.size,!0)};var _n=function(e){var n=this.__data__,r=Cn(n,e);return r<0?void 0:n[r][1]};var jn=function(e){return Cn(this.__data__,e)>-1};var wn=function(e,n){var r=this.__data__,t=Cn(r,e);return t<0?(++this.size,r.push([e,n])):r[t][1]=n,this};function An(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var t=e[n];this.set(t[0],t[1])}}An.prototype.clear=gn,An.prototype.delete=kn,An.prototype.get=_n,An.prototype.has=jn,An.prototype.set=wn;var Sn=An;var Hn=function(){this.size=0,this.__data__={hash:new yn,map:new(_e||Sn),string:new yn}};var Nn=function(e){var n=t(e);return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e};var In=function(e,n){var r=e.__data__;return Nn(n)?r["string"==typeof n?"string":"hash"]:r.map};var Tn=function(e){var n=In(this,e).delete(e);return this.size-=n?1:0,n};var On=function(e){return In(this,e).get(e)};var Dn=function(e){return In(this,e).has(e)};var Mn=function(e,n){var r=In(this,e),t=r.size;return r.set(e,n),this.size+=r.size==t?0:1,this};function $n(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var t=e[n];this.set(t[0],t[1])}}$n.prototype.clear=Hn,$n.prototype.delete=Tn,$n.prototype.get=On,$n.prototype.has=Dn,$n.prototype.set=Mn;var Rn=$n,Yn="Expected a function";function zn(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new TypeError(Yn);var r=function r(){var t=arguments,i=n?n.apply(this,t):t[0],l=r.cache;if(l.has(i))return l.get(i);var o=e.apply(this,t);return r.cache=l.set(i,o)||l,o};return r.cache=new(zn.Cache||Rn),r}zn.Cache=Rn;var Bn=zn,En=500;var Pn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Un=/\\(\\)?/g,Wn=function(e){var n=Bn(e,function(e){return r.size===En&&r.clear(),e}),r=n.cache;return n}(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(Pn,function(e,r,t,i){n.push(t?i.replace(Un,"$1"):r||e)}),n});var Fn=function(e,n){for(var r=-1,t=null==e?0:e.length,i=Array(t);++r<t;)i[r]=n(e[r],r,e);return i},Vn=1/0,Ln=u?u.prototype:void 0,Jn=Ln?Ln.toString:void 0;var Xn=function e(n){if("string"==typeof n)return n;if(H(n))return Fn(n,e)+"";if(nn(n))return Jn?Jn.call(n):"";var r=n+"";return"0"==r&&1/n==-Vn?"-0":r};var qn=function(e){return null==e?"":Xn(e)};var Gn=function(e,n){return H(e)?e:ln(e,n)?[e]:Wn(qn(e))},Kn=1/0;var Qn=function(e){if("string"==typeof e||nn(e))return e;var n=e+"";return"0"==n&&1/e==-Kn?"-0":n};var Zn=function(e,n){for(var r=0,t=(n=Gn(n,e)).length;null!=e&&r<t;)e=e[Qn(n[r++])];return r&&r==t?e:void 0};var er=function(e,n,r){var t=null==e?void 0:Zn(e,n);return void 0===t?r:t},nr=function(){return s.Date.now()},rr=NaN,tr=/^\s+|\s+$/g,ir=/^[-+]0x[0-9a-f]+$/i,lr=/^0b[01]+$/i,or=/^0o[0-7]+$/i,ar=parseInt;var sr=function(e){if("number"==typeof e)return e;if(nn(e))return rr;if(q(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=q(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(tr,"");var r=lr.test(e);return r||or.test(e)?ar(e.slice(2),r?2:8):ir.test(e)?rr:+e},ur="Expected a function",cr=Math.max,vr=Math.min;var dr="[object Number]";var hr=function(e){return"number"==typeof e||x(e)&&C(e)==dr},fr="[object Boolean]";var pr=function(e){return!0===e||!1===e||x(e)&&C(e)==fr},mr=1/0,yr=17976931348623157e292;var gr=function(e){return e?(e=sr(e))===mr||e===-mr?(e<0?-1:1)*yr:e==e?e:0:0===e?e:0};var br=function(e){var n=gr(e),r=n%1;return n==n?r?n-r:n:0};function Cr(e,n){var r=function(e,n){for(var r=0,t=n(r),i=e-1,l=n(i),o=!0,a=null;o;){var s=Math.floor((i+r)/2),u=n(s);if(t<0&&u<0&&l<0){a=null,o=!1;break}if(t>0&&u>0&&l>0){a=null,o=!1;break}if(s===r){a=r,o=!1;break}if(s===i){a=i,o=!1;break}if(0===t){a=r,o=!1;break}if(0===u){a=s,o=!1;break}if(0===l){a=i,o=!1;break}t*u>0?(r=s,t=u):(i=s,l=u)}return a}(e.length,n),t=null,i=null;return r?(t=n(r),i=e[r]):i=e[r],{index:r,value:t,result:i}}function xr(e){return"[object Array]"===Object.prototype.toString.call(e)}function kr(e){return"[object Object]"===Object.prototype.toString.call(e)}var _r={props:{data:{},listHeight:{type:Number,default:400},itemMinHeight:{type:Number,default:24},itemsPreload:{type:Number,default:40},iconColor:{type:String,default:"#999999"},keyColor:{type:String,default:"#666666"},keyNumbersColor:{type:String,default:"#aaaaaa"},numColor:{type:String,default:"#1c00d4"},strColor:{type:String,default:"#ebaf61"},bolColor:{type:String,default:"#80d85f"},funColor:{type:String,default:"#ca56da"},defaultColor:{type:String,default:"#222222"},defDisplayChildren:{type:Boolean,default:!0}},data:function(){return{changeDisplayChildren:!0,changeDisplayChildrenIndex:null,changeHeight:!0,lineNumberWidth:0,scrollTop:0,scrollRatio:1,contentHeight:0,contentHeightMax:1e7,itemsHeight:0,styleLineNumber:{display:"table-cell","padding-right":"10px","text-align":"right","font-size":"0.8rem",color:"#f26","user-select":"none"},items:[],useItems:[]}},mounted:function(){this.change()},watch:{data:{immediate:!0,handler:function(e){var n=this,r=n.parseData(n.data),t=13*(Math.ceil(Math.pow(Ze(r),.1))+1);n.items=r,n.lineNumberWidth=t,n.change()}}},computed:{},methods:{change:function(){var e=this;e.getUseItems(),setTimeout(function(){e.updateItems()&&e.getUseItems()},10)},getUseItems:function(){var e,n,r,t,i,l=this,o=l.items,a=l.contentHeight-l.listHeight,s=l.itemsHeight;if(a>=0){var u=(i=Math.min(l.scrollTop,a))/a,c=l.listHeight/l.scrollRatio/a;r=u/(1+c),t=(r=Math.max(r,0))+c,t=Math.min(t,1),e=r*s,n=t*s}else i=0,r=0,t=1,e=0,n=l.itemsHeight;var v,d=Ze(o);v=Cr(o,function(n){var r=o[n];return e-(r.y+r.height)}).result;var h=er(v,"index",0);h=Math.max(h-l.itemsPreload,0),v=Cr(o,function(e){return o[e].y-n}).result;var f=er(v,"index",d);f=Math.min(f+l.itemsPreload,d-1);for(var p=[],m=h;m<=f;m++){var y=o[m];y.screenY=(y.y/s-r)*l.contentHeight*l.scrollRatio+i,p.push(y)}l.useItems=p},updateItems:function(){var e=this,n=e.items;if(e.changeDisplayChildren){var r=0;null!==e.changeDisplayChildrenIndex&&(r=e.changeDisplayChildrenIndex);for(var t=!1,i=null,l=null,o=r;o<n.length;o++){var a=n[o];t||a.displayChildren||(t=!0,i=a.level,l=o),l!==o&&t?a.level>i?!1!==a.show&&(a.show=!1):a.level===i&&(!1!==a.show&&(a.show=!1),t=!1,i=null):!0!==a.show&&(a.show=!0)}}ae(e.$refs.itemDiv,function(r){var t=br(r.getAttribute("index"));if(t>=0&&t<=Ze(n)-1){var i=r.clientHeight;n[t].height!==i&&(n[t].height=i,e.changeHeight=!0)}});var s=e.changeHeight||e.changeDisplayChildren;if(s){var u=0,c=0;ae(n,function(e){e.y!==u&&(e.y=u),e.show?(u+=e.height,e.useHeight!==e.height&&(e.useHeight=e.height)):0!==e.useHeight&&(e.useHeight=0),e.useY!==c&&(e.useY=c),c+=e.useHeight}),e.itemsHeight!==u&&(e.itemsHeight=u,e.contentHeight=Math.min(e.itemsHeight,e.contentHeightMax),e.scrollRatio=e.itemsHeight/e.contentHeight),e.changeDisplayChildren=!1,e.changeDisplayChildrenIndex=null,e.changeHeight=!1}return s},parseData:function(e){var n=this,r=0,t=[];function i(e){if(hr(e))return{type:"num",value:qn(e)};if($e(e))return{type:"str",value:'"'.concat(e,'"')};if(pr(e)){var n="false";return e&&(n="true"),{type:"bol",value:n}}return ee(e)?{type:"fun",value:e.toString()}:{type:"default",value:e}}function l(e){var i=e.level,l=e.key,o=e.keyNumbers,a=e.value,s=e.valueColor,u=e.valueComma,c=e.valueTail,v=e.hasChildren,d=(r+=1)-1;t.push({index:d,lineNumber:r,level:i,paddingLeft:24*i+16,key:l,keyNumbers:o,value:a,valueColor:s,valueComma:u,valueTail:c,hasChildren:v,displayChildren:n.defDisplayChildren,show:!0,height:n.itemMinHeight,useHeight:0,y:d*n.itemMinHeight,useY:d*n.itemMinHeight,screenY:0})}function o(e){var n=e.level,r=e.key,t=e.value,i=e.last,o=Ze(t),a={type:"arr",n:o},u="[";null!==r&&(u="".concat(r," :  [")),l({level:n,key:u,value:null,valueColor:null,valueTail:"]",keyNumbers:a,valueComma:!1,hasChildren:!0});var c=0;ae(t,function(e,r){s({level:n+1,key:r,value:e,last:(c+=1)===o})});var v="],";i&&(v="]"),l({level:n,key:v,value:null,valueColor:null,keyNumbers:null,valueComma:!1,hasChildren:!1})}function a(e){var n=e.level,r=e.key,t=e.value,i=e.last,o=Ze(re(t)),a={type:"obj",n:o},u="{";null!==r&&(u="".concat(r," :  {")),l({level:n,key:u,value:null,valueColor:null,valueTail:"}",keyNumbers:a,valueComma:!1,hasChildren:!0});var c=0;ae(t,function(e,r){s({level:n+1,key:r,value:e,last:(c+=1)===o})});var v="},";i&&(v="}"),l({level:n,key:v,value:null,valueColor:null,keyNumbers:null,valueComma:!1,hasChildren:!1})}function s(e){var r=e.level,t=e.key,s=e.value,u=e.last;if(xr(s))o({level:r,key:t,value:s,last:u});else if(kr(s))a({level:r,key:t,value:s,last:u});else{var c=i(s),v=n["".concat(c.type,"Color")];l({level:r,key:"".concat(t," :  "),value:c.value,valueColor:v,keyNumbers:null,valueComma:!u,hasChildren:!1})}}if(xr(e))o({level:0,key:null,value:e,last:!0});else if(kr(e))a({level:0,key:null,value:e,last:!0});else{var u=i(e),c=n["".concat(u.type,"Color")];l({level:0,key:null,value:u.value,valueColor:c,keyNumbers:null,valueComma:null,hasChildren:!1})}return t},toggleItems:function(e){var n=this;n.items[e.index].displayChildren=!n.items[e.index].displayChildren,setTimeout(function(){n.changeDisplayChildren=!0,n.changeDisplayChildrenIndex=e.index,n.change()},10)},scrollItems:function(e,n,r){var t,i,l,o,a,s,u=0,c=!1,v=!1,d=!0;if("function"!=typeof e)throw new TypeError(ur);function h(n){var r=t,l=i;return t=i=void 0,u=n,o=e.apply(l,r)}function f(e){var r=e-s;return void 0===s||r>=n||r<0||v&&e-u>=l}function p(){var e=nr();if(f(e))return m(e);a=setTimeout(p,function(e){var r=n-(e-s);return v?vr(r,l-(e-u)):r}(e))}function m(e){return a=void 0,d&&t?h(e):(t=i=void 0,o)}function y(){var e=nr(),r=f(e);if(t=arguments,i=this,s=e,r){if(void 0===a)return function(e){return u=e,a=setTimeout(p,n),c?h(e):o}(s);if(v)return clearTimeout(a),a=setTimeout(p,n),h(s)}return void 0===a&&(a=setTimeout(p,n)),o}return n=sr(n)||0,q(r)&&(c=!!r.leading,l=(v="maxWait"in r)?cr(sr(r.maxWait)||0,n):l,d="trailing"in r?!!r.trailing:d),y.cancel=function(){void 0!==a&&clearTimeout(a),u=0,t=s=i=a=void 0},y.flush=function(){return void 0===a?o:m(nr())},y}(function(e){var n=this;setTimeout(function(){n.scrollTop=e.target.scrollTop,n.change()},10)},100)}};var jr,wr=function(e,n,r,t,i,l,o,a,s,u){"boolean"!=typeof o&&(s=a,a=o,o=!1);var c,v="function"==typeof r?r.options:r;if(e&&e.render&&(v.render=e.render,v.staticRenderFns=e.staticRenderFns,v._compiled=!0,i&&(v.functional=!0)),t&&(v._scopeId=t),l?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,s(e)),e&&e._registeredComponents&&e._registeredComponents.add(l)},v._ssrRegister=c):n&&(c=o?function(){n.call(this,u(this.$root.$options.shadowRoot))}:function(e){n.call(this,a(e))}),c)if(v.functional){var d=v.render;v.render=function(e,n){return c.call(n),d(e,n)}}else{var h=v.beforeCreate;v.beforeCreate=h?[].concat(h,c):[c]}return r},Ar="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var Sr={};var Hr=function(e){return function(e,n){return function(e,n){var r=Ar?n.media||"default":e,t=Sr[r]||(Sr[r]={ids:new Set,styles:[]});if(!t.ids.has(e)){t.ids.add(e);var i=n.source;if(n.map&&(i+="\n/*# sourceURL="+n.map.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n.map))))+" */"),t.element||(t.element=document.createElement("style"),t.element.type="text/css",n.media&&t.element.setAttribute("media",n.media),void 0===jr&&(jr=document.head||document.getElementsByTagName("head")[0]),jr.appendChild(t.element)),"styleSheet"in t.element)t.styles.push(i),t.element.styleSheet.cssText=t.styles.filter(Boolean).join("\n");else{var l=t.ids.size-1,o=document.createTextNode(i),a=t.element.childNodes;a[l]&&t.element.removeChild(a[l]),a.length?t.element.insertBefore(o,a[l]):t.element.appendChild(o)}}}(e,n)}};const Nr=_r;var Ir=function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",{style:[{position:"relative","overflow-y":"auto","overflow-x":"hidden",height:e.listHeight+"px"}],on:{scroll:e.scrollItems}},[r("div",{style:[{height:e.contentHeight+"px"}]}),e._v(" "),e._l(e.useItems,function(n,t){return[n.screenY<=e.contentHeight&&n.show?[r("div",{key:t,ref:"itemDiv",refInFor:!0,style:[{position:"absolute",top:n.screenY+"px"}],attrs:{index:n.index}},[r("div",{style:[e.styleLineNumber,{width:e.lineNumberWidth+"px"}]},[e._v(e._s(n.lineNumber))]),e._v(" "),r("div",{style:[{display:"table-cell","padding-left":n.paddingLeft+"px"}]},[r("div",{staticStyle:{position:"relative"}},[r("div",{staticStyle:{position:"absolute",top:"0px",left:"0px",transform:"translateX(-100%)"}},[n.hasChildren?r("span",{on:{click:function(r){return e.toggleItems(n)}}},[r("span",{class:[{caretRight:!0,showChildren:n.displayChildren}]},[r("span",{staticClass:"center"},[r("svg",{attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",fill:e.iconColor,width:"11px",height:"11px",x:"0px",y:"0px",viewBox:"0 0 415.346 415.346","xml:space":"preserve"}},[r("g",[r("path",{attrs:{d:"M41.712,415.346c-11.763,0-21.3-9.537-21.3-21.3V21.299C20.412,9.536,29.949,0,41.712,0l346.122,191.697 c0,0,15.975,15.975,0,31.951C371.859,239.622,41.712,415.346,41.712,415.346z"}})])])])])]):r("span",{staticStyle:{display:"inline-block",width:"16px"}})]),e._v(" "),r("div",{staticStyle:{"text-indent":"-2rem","margin-left":"2em"}},[n.key?r("span",{style:[{color:e.keyColor}]},[r("span",[e._v(e._s(n.key))]),e._v(" "),n.keyNumbers?r("span",{style:[{margin:"0px 10px",color:e.keyNumbersColor}]},["arr"===n.keyNumbers.type?r("span",[e._v("["+e._s(n.keyNumbers.n)+"]")]):e._e(),e._v(" "),"obj"===n.keyNumbers.type?r("span",[r("span",[e._v("{")]),r("span",[e._v(e._s(n.keyNumbers.n))]),r("span",[e._v("}")])]):e._e()]):e._e(),e._v(" "),n.displayChildren?e._e():r("span",[r("span",{staticStyle:{"margin-right":"10px"}},[e._v("...")]),e._v(e._s(n.valueTail))])]):e._e(),e._v(" "),n.value?[r("span",{style:[{color:n.valueColor}]},[e._v(e._s(n.value))]),e._v(" "),n.valueComma?r("span",{style:[{color:e.keyColor}]},[e._v(",")]):e._e()]:e._e()],2)])])])]:e._e()]})],2)};Ir._withStripped=!0;return wr({render:Ir,staticRenderFns:[]},function(e){e&&e("data-v-d10605ee_0",{source:"\n.caretRight[data-v-d10605ee] {\r\n    transform: translateY(-1px);\r\n    cursor: pointer;\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    margin-right: 5px;\n}\n.center[data-v-d10605ee] {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\n}\n.showChildren[data-v-d10605ee] {\r\n    transform: rotate(90deg);\n}\r\n",map:{version:3,sources:["D:\\開源-JS-102-3-w-component-vue\\w-component-vue\\src\\components\\WJsonView.vue"],names:[],mappings:";AA0sBA;IACA,2BAAA;IACA,eAAA;IACA,qBAAA;IACA,sBAAA;IACA,iBAAA;AACA;AACA;IACA,aAAA;IACA,mBAAA;IACA,uBAAA;AACA;AACA;IACA,wBAAA;AACA",file:"WJsonView.vue",sourcesContent:["<template>\r\n    <div\r\n        :style=\"[{'position':'relative','overflow-y':'auto','overflow-x':'hidden','height':listHeight+'px'}]\"\r\n        @scroll=\"scrollItems\"\r\n    >\r\n\r\n        <div :style=\"[{'height':`${contentHeight}px`}]\"></div>\r\n\r\n        <template v-for=\"(item,kitem) in useItems\">\r\n            <template v-if=\"item.screenY<=contentHeight && item.show\">\r\n                <div\r\n                    ref=\"itemDiv\"\r\n                    :style=\"[{'position':'absolute','top':`${item.screenY}px`}]\"\r\n                    :index=\"item.index\"\r\n                    :key=\"kitem\"\r\n                >\r\n\r\n                    <div :style=\"[styleLineNumber,{'width':lineNumberWidth+'px'}]\">{{item.lineNumber}}</div>\r\n\r\n                    <div :style=\"[{'display':'table-cell','padding-left':item.paddingLeft+'px'}]\">\r\n\r\n                        <div style=\"position:relative;\">\r\n\r\n                            <div style=\"position:absolute; top:0px; left:0px; transform:translateX(-100%); \">\r\n                                <span v-if=\"item.hasChildren\" @click=\"toggleItems(item)\">\r\n                                    <span :class=\"[{'caretRight':true,'showChildren':item.displayChildren}]\">\r\n                                        <span class=\"center\">\r\n                                            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" :fill=\"iconColor\" width=\"11px\" height=\"11px\" x=\"0px\" y=\"0px\" viewBox=\"0 0 415.346 415.346\" xml:space=\"preserve\"><g><path d=\"M41.712,415.346c-11.763,0-21.3-9.537-21.3-21.3V21.299C20.412,9.536,29.949,0,41.712,0l346.122,191.697 c0,0,15.975,15.975,0,31.951C371.859,239.622,41.712,415.346,41.712,415.346z\"/></g></svg>\r\n                                        </span>\r\n                                    </span>\r\n                                </span>\r\n                                <span style=\"display:inline-block; width:16px;\" v-else></span>\r\n                            </div>\r\n\r\n                            <div style=\"text-indent:-2rem; margin-left:2em;\">\r\n\r\n                                <span :style=\"[{'color':keyColor}]\" v-if=\"item.key\">\r\n\r\n                                    <span>{{item.key}}</span>\r\n\r\n                                    <span :style=\"[{'margin':'0px 10px','color':keyNumbersColor}]\" v-if=\"item.keyNumbers\">\r\n                                        <span v-if=\"item.keyNumbers.type==='arr'\">[{{item.keyNumbers.n}}]</span>\r\n                                        <span v-if=\"item.keyNumbers.type==='obj'\"><span>{</span><span>{{item.keyNumbers.n}}</span><span>}</span></span>\r\n                                    </span>\r\n\r\n                                    <span v-if=\"!item.displayChildren\"><span style=\"margin-right:10px;\">...</span>{{item.valueTail}}</span>\r\n\r\n                                </span>\r\n\r\n                                <template v-if=\"item.value\">\r\n\r\n                                    <span :style=\"[{'color':item.valueColor}]\">{{item.value}}</span>\r\n\r\n                                    <span :style=\"[{'color':keyColor}]\" v-if=\"item.valueComma\">,</span>\r\n\r\n                                </template>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n            </template>\r\n        </template>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport each from 'lodash/each'\r\nimport size from 'lodash/size'\r\nimport keys from 'lodash/keys'\r\nimport get from 'lodash/get'\r\nimport debounce from 'lodash/debounce'\r\nimport isNumber from 'lodash/isNumber'\r\nimport isString from 'lodash/isString'\r\nimport isBoolean from 'lodash/isBoolean'\r\n// import isArray from 'lodash/isArray' //會誤判function\r\n// import isObject from 'lodash/isObject' //會誤判function\r\nimport isFunction from 'lodash/isFunction'\r\nimport toString from 'lodash/toString'\r\nimport toInteger from 'lodash/toInteger'\r\nimport binarySearch from '../js/binarySearch.mjs'\r\nimport isarr from 'wsemi/src/isarr.mjs'\r\nimport isobj from 'wsemi/src/isobj.mjs'\r\n\r\n// function g(items) {\r\n//     return items.map((v) => {\r\n//         return {\r\n//             i: v.index,\r\n//             //v: `${v.key}: ${v.value}`,\r\n//             s: v.show,\r\n//             //d: v.displayChildren,\r\n//             y: v.y,\r\n//             useY: v.useY,\r\n//             screenY: v.screenY,\r\n//         }\r\n//     })\r\n// }\r\n\r\n/**\r\n * @vue-prop {*} data 輸入資料陣列或物件\r\n * @vue-prop {Number} [listHeight=400] 輸入顯示區高度，單位為px，預設400\r\n * @vue-prop {Number} [itemMinHeight=24] 輸入各元素顯示高度，單位為px，預設24，會於真實顯示後自動更新高度\r\n * @vue-prop {Number} [itemsPreload=40] 輸入下方預先載入元素數量，預設40\r\n * @vue-prop {String} [iconColor='#999999'] 輸入顯隱icon按鈕顏色字串，預設'#999999'\r\n * @vue-prop {String} [keyColor='#666666'] 輸入鍵值顏色字串，預設'#666666'\r\n * @vue-prop {String} [keyNumbersColor='#aaaaaa'] 輸入鍵值內含子節點數量顏色字串，預設'#aaaaaa'\r\n * @vue-prop {String} [numColor='#1c00d4'] 輸入值為數值時的顏色字串，預設'#1c00d4'\r\n * @vue-prop {String} [strColor='#ebaf61'] 輸入值為字串時的顏色字串，預設'#ebaf61'\r\n * @vue-prop {String} [bolColor='#ab0d90'] 輸入值為布林值時的顏色字串，預設'#ab0d90'\r\n * @vue-prop {String} [funColor='#ca56da'] 輸入值為函數時的顏色字串，預設'#ca56da'\r\n * @vue-prop {String} [defaultColor='#222222'] 輸入值為其他類型時的顏色字串，預設'#222222'\r\n * @vue-prop {Boolean} [defDisplayChildren=true] 輸入是否預先展開全部節點，預設true\r\n */\r\nexport default {\r\n    props: {\r\n        data: {},\r\n        listHeight: {\r\n            type: Number,\r\n            default: 400,\r\n        },\r\n        itemMinHeight: {\r\n            type: Number,\r\n            default: 24,\r\n        },\r\n        itemsPreload: {\r\n            type: Number,\r\n            default: 40,\r\n        },\r\n        iconColor: {\r\n            type: String,\r\n            default: '#999999',\r\n        },\r\n        keyColor: {\r\n            type: String,\r\n            default: '#666666',\r\n        },\r\n        keyNumbersColor: {\r\n            type: String,\r\n            default: '#aaaaaa',\r\n        },\r\n        numColor: {\r\n            type: String,\r\n            default: '#1c00d4',\r\n        },\r\n        strColor: {\r\n            type: String,\r\n            default: '#ebaf61',\r\n        },\r\n        bolColor: {\r\n            type: String,\r\n            default: '#80d85f',\r\n        },\r\n        funColor: {\r\n            type: String,\r\n            default: '#ca56da',\r\n        },\r\n        defaultColor: {\r\n            type: String,\r\n            default: '#222222',\r\n        },\r\n        defDisplayChildren: {\r\n            type: Boolean,\r\n            default: true,\r\n        },\r\n    },\r\n    data: function() {\r\n        return {\r\n            changeDisplayChildren: true, //變更displayChildren\r\n            changeDisplayChildrenIndex: null, //變更displayChildren的item指標\r\n            changeHeight: true, //變更高度\r\n            lineNumberWidth: 0, //列號區寬度\r\n            scrollTop: 0, //目前捲軸位置\r\n            scrollRatio: 1, //目前全部節點高度與捲軸內容高度的比值\r\n            contentHeight: 0, //實際撐開用內容高度, 大部分情況等於scrollHeight, 可能會差異一個水平捲軸的高度16px, 此處以contentHeight為計算基準\r\n            contentHeightMax: 1e7, //最大撐開用內容高度, chrome當元素高度超過1.4e7px, 排版沒問題但顯示會被截斷, 故需要通過設定最大高度做映射\r\n            itemsHeight: 0, //儲存全部項目高度\r\n            styleLineNumber: {\r\n                'display': 'table-cell',\r\n                'padding-right': '10px',\r\n                'text-align': 'right',\r\n                'font-size': '0.8rem',\r\n                'color': '#f26',\r\n                'user-select': 'none',\r\n            },\r\n            items: [],\r\n            useItems: [],\r\n        }\r\n    },\r\n    mounted: function() {\r\n        //console.log('mounted')\r\n\r\n        let vo = this\r\n\r\n        //change, watch時觸發的change因為元素沒實際高度故無法自動調整, 得於mounted再觸發一次\r\n        vo.change()\r\n\r\n    },\r\n    watch: {\r\n\r\n        data: {\r\n            immediate: true,\r\n            handler(value) {\r\n                //console.log('watch data', value)\r\n\r\n                let vo = this\r\n\r\n                //items\r\n                let items = vo.parseData(vo.data)\r\n\r\n                //lineNumberWidth, 每個字元使用13px寬度\r\n                let lineNumberWidth = (Math.ceil(Math.pow(size(items), 0.1)) + 1) * 13\r\n\r\n                //save\r\n                vo.items = items\r\n                vo.lineNumberWidth = lineNumberWidth\r\n\r\n                //change\r\n                vo.change()\r\n\r\n            }\r\n        }\r\n\r\n    },\r\n    computed: {\r\n    },\r\n    methods: {\r\n\r\n        change: function() {\r\n            //console.log('methods change')\r\n            //console.time('change')\r\n\r\n            let vo = this\r\n\r\n            //getUseItems\r\n            vo.getUseItems()\r\n\r\n            //setTimeout\r\n            setTimeout(function() {\r\n\r\n                //updateItems\r\n                let changed = vo.updateItems()\r\n\r\n                //若任何元素高度有變更則再重新計算需顯示的節點, 此時的確有可能會載入新節點, 所以原本給予節點之預設高度不能太高, 偵測時元素就多是變高, 所以需顯示的節點就會變少, 避免造成重新載入新節點狀況\r\n                if (changed) {\r\n                    vo.getUseItems()\r\n                }\r\n\r\n                //console.timeEnd('change')\r\n            }, 10)\r\n\r\n        },\r\n\r\n        getUseItems: function() {\r\n            //console.log('methods getUseItems')\r\n\r\n            let vo = this\r\n\r\n            //items, 直接存取vo.item, 不能用cloneDeep對大數據太耗時\r\n            let items = (vo.items)\r\n\r\n            //y1, y2\r\n            let y1\r\n            let y2\r\n            let he = vo.contentHeight - vo.listHeight\r\n            let heAll = vo.itemsHeight\r\n            let r1\r\n            let r2\r\n            let scrollTop\r\n            if (he >= 0) {\r\n                scrollTop = Math.min(vo.scrollTop, he)\r\n                let r = scrollTop / he //0~1\r\n                let rd12 = vo.listHeight / vo.scrollRatio / he //顯示區上下處的正規化縮放比率差, 需針對最大撐開高度對應實際全部節點高度的比率做修正\r\n                r1 = r / (1 + rd12) //顯示區上方的正規化縮放比率\r\n                r1 = Math.max(r1, 0)\r\n                r2 = r1 + rd12 //顯示區下方的正規化縮放比率\r\n                r2 = Math.min(r2, 1)\r\n                y1 = r1 * heAll\r\n                y2 = r2 * heAll\r\n            }\r\n            else {\r\n                scrollTop = 0\r\n                r1 = 0\r\n                r2 = 1\r\n                y1 = 0\r\n                y2 = vo.itemsHeight\r\n            }\r\n\r\n            //indStart\r\n            let n = size(items)\r\n            let o\r\n            o = binarySearch(items, (ind) => {\r\n                let v = items[ind]\r\n                let dy = y1 - (v.y + v.height)\r\n                return dy\r\n            }).result\r\n            let indStart = get(o, 'index', 0)\r\n            indStart = Math.max(indStart - vo.itemsPreload, 0) //不預載前面節點, 避免拉動捲軸時因上方節點預載後高度變高, 自動把當前顯示節點往下推移\r\n\r\n            //indEnd\r\n            o = binarySearch(items, (ind) => {\r\n                let v = items[ind]\r\n                let dy = v.y - y2\r\n                return dy\r\n            }).result\r\n            let indEnd = get(o, 'index', n)\r\n            indEnd = Math.min(indEnd + vo.itemsPreload, n - 1)\r\n\r\n            //useItems\r\n            let useItems = []\r\n            for (let k = indStart; k <= indEnd; k++) {\r\n                let v = items[k]\r\n                v.screenY = ((v.y / heAll) - r1) * vo.contentHeight * vo.scrollRatio + scrollTop //換算成實際顯示y向的px位置\r\n                useItems.push(v)\r\n            }\r\n\r\n            //save\r\n            vo.useItems = useItems\r\n\r\n        },\r\n\r\n        updateItems: function() {\r\n            //console.log('methods updateItems')\r\n            //console.time('updateItems')\r\n\r\n            let vo = this\r\n\r\n            //items, 直接存取vo.item, 不能用cloneDeep對大數據太耗時\r\n            let items = (vo.items)\r\n\r\n            //check\r\n            if (vo.changeDisplayChildren) {\r\n\r\n                //check\r\n                let index = 0\r\n                if (vo.changeDisplayChildrenIndex !== null) {\r\n                    index = vo.changeDisplayChildrenIndex\r\n                }\r\n\r\n                //update show\r\n                let hide = false\r\n                let level = null\r\n                let ind = null\r\n                for (let k = index; k < items.length; k++) {\r\n                    let v = items[k]\r\n\r\n                    //detect start\r\n                    if (!hide && !v.displayChildren) {\r\n                        hide = true\r\n                        level = v.level\r\n                        ind = k\r\n                    }\r\n\r\n                    //detect level\r\n                    if (ind !== k && hide) {\r\n                        if (v.level > level) {\r\n                            if (v.show !== false) {\r\n                                v.show = false\r\n                            }\r\n                        }\r\n                        else if (v.level === level) {\r\n                            if (v.show !== false) {\r\n                                v.show = false\r\n                            }\r\n                            hide = false\r\n                            level = null\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (v.show !== true) {\r\n                            v.show = true\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            //update height\r\n            each(vo.$refs.itemDiv, (v) => {\r\n                let index = toInteger(v.getAttribute('index'))\r\n                if (index >= 0 && index <= size(items) - 1) {\r\n                    let h = v.clientHeight\r\n                    if (items[index].height !== h) {\r\n                        items[index].height = h\r\n                        vo.changeHeight = true\r\n                    }\r\n                }\r\n            })\r\n\r\n            //check\r\n            let changed = vo.changeHeight || vo.changeDisplayChildren\r\n            if (changed) {\r\n\r\n                //update y, useY, useHeight\r\n                let y = 0\r\n                let useY = 0\r\n                each(items, (v) => {\r\n\r\n                    //y\r\n                    if (v.y !== y) {\r\n                        v.y = y\r\n                    }\r\n\r\n                    //useHeight\r\n                    if (v.show) {\r\n                        y += v.height\r\n                        if (v.useHeight !== v.height) {\r\n                            v.useHeight = v.height\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (v.useHeight !== 0) {\r\n                            v.useHeight = 0\r\n                        }\r\n                    }\r\n\r\n                    //useY\r\n                    if (v.useY !== useY) {\r\n                        v.useY = useY\r\n                    }\r\n                    useY += v.useHeight\r\n\r\n                })\r\n\r\n                //update itemsHeight\r\n                if (vo.itemsHeight !== y) {\r\n                    vo.itemsHeight = y\r\n                    vo.contentHeight = Math.min(vo.itemsHeight, vo.contentHeightMax)\r\n                    vo.scrollRatio = vo.itemsHeight / vo.contentHeight\r\n                }\r\n\r\n                //reset\r\n                vo.changeDisplayChildren = false\r\n                vo.changeDisplayChildrenIndex = null\r\n                vo.changeHeight = false\r\n\r\n            }\r\n\r\n            //console.timeEnd('updateItems')\r\n            return changed\r\n        },\r\n\r\n        parseData: function(d) {\r\n            //console.log('methods parseData', d)\r\n\r\n            let vo = this\r\n\r\n            let lineNumber = 0\r\n            let items = []\r\n\r\n            function cValue(v) {\r\n                if (isNumber(v)) {\r\n                    return {\r\n                        type: 'num',\r\n                        value: toString(v),\r\n                    }\r\n                }\r\n                else if (isString(v)) {\r\n                    return {\r\n                        type: 'str',\r\n                        value: `\"${v}\"`,\r\n                    }\r\n                }\r\n                else if (isBoolean(v)) {\r\n                    let c = 'false'\r\n                    if (v) {\r\n                        c = 'true'\r\n                    }\r\n                    return {\r\n                        type: 'bol',\r\n                        value: c,\r\n                    }\r\n                }\r\n                else if (isFunction(v)) {\r\n                    return {\r\n                        type: 'fun',\r\n                        value: v.toString(),\r\n                    }\r\n                }\r\n                return {\r\n                    type: 'default',\r\n                    value: v,\r\n                }\r\n            }\r\n\r\n            function addItem({ level, key, keyNumbers, value, valueColor, valueComma, valueTail, hasChildren }) {\r\n                lineNumber += 1\r\n                let index = lineNumber - 1\r\n                items.push({\r\n                    index, //節點指標\r\n                    lineNumber, //int, 列編號\r\n                    level, //int, 節點層數(縮排)\r\n                    paddingLeft: level * 24 + 16, //num, 給予16px放置顯隱icon\r\n                    key, //str, 鍵\r\n                    keyNumbers, //obj, 鍵值為陣列或物件顯示所含節點數量\r\n                    value, //str, 值\r\n                    valueColor, //str, 數值顏色, 需依照值型別給予\r\n                    valueComma, //bol, 數值後方是否顯示\",\"\r\n                    valueTail, //str, 數值後方結尾符號, 僅用於陣列或物件, 供displayChildren=false時額外顯示出結尾符號\r\n                    hasChildren, //bol, 是否有子節點, 僅陣列或物件才為true\r\n                    displayChildren: vo.defDisplayChildren, //bol, 是否顯示子節點\r\n                    show: true, //bol, 是否顯示此節點\r\n                    height: vo.itemMinHeight, //num, 節點高度, 日後動態更新\r\n                    useHeight: 0, //num, 真實使用高度, 受show影響, 加速用\r\n                    y: index * vo.itemMinHeight, //num, 節點y向位置, 預設先由最小列高計算\r\n                    useY: index * vo.itemMinHeight, //num, 真實y向位置, 預設先由最小列高計算\r\n                    screenY: 0, //num, 節點換算比率後的顯示y向位置\r\n                })\r\n            }\r\n\r\n            function pArray({ level, key, value, last }) {\r\n\r\n                let n = size(value)\r\n                let keyNumbers = {\r\n                    type: 'arr',\r\n                    n,\r\n                }\r\n\r\n                let _key = `[`\r\n                if (key !== null) {\r\n                    _key = `${key} :  [`\r\n                }\r\n                addItem({\r\n                    level,\r\n                    key: _key,\r\n                    value: null,\r\n                    valueColor: null,\r\n                    valueTail: ']',\r\n                    keyNumbers,\r\n                    valueComma: false,\r\n                    hasChildren: true,\r\n                })\r\n\r\n                let i = 0\r\n                each(value, (v, k) => {\r\n                    i += 1\r\n                    pSelf({\r\n                        level: level + 1,\r\n                        key: k,\r\n                        value: v,\r\n                        last: i === n,\r\n                    })\r\n                })\r\n\r\n                let cend = `],`\r\n                if (last) {\r\n                    cend = `]`\r\n                }\r\n                addItem({\r\n                    level,\r\n                    key: cend,\r\n                    value: null,\r\n                    valueColor: null,\r\n                    keyNumbers: null,\r\n                    valueComma: false,\r\n                    hasChildren: false,\r\n                })\r\n\r\n            }\r\n\r\n            function pObject({ level, key, value, last }) {\r\n\r\n                let n = size(keys(value))\r\n                let keyNumbers = {\r\n                    type: 'obj',\r\n                    n,\r\n                }\r\n\r\n                let _key = `{`\r\n                if (key !== null) {\r\n                    _key = `${key} :  {`\r\n                }\r\n                addItem({\r\n                    level,\r\n                    key: _key,\r\n                    value: null,\r\n                    valueColor: null,\r\n                    valueTail: '}',\r\n                    keyNumbers,\r\n                    valueComma: false,\r\n                    hasChildren: true,\r\n                })\r\n\r\n                let i = 0\r\n                each(value, (v, k) => {\r\n                    i += 1\r\n                    pSelf({\r\n                        level: level + 1,\r\n                        key: k,\r\n                        value: v,\r\n                        last: i === n,\r\n                    })\r\n                })\r\n\r\n                let cend = `},`\r\n                if (last) {\r\n                    cend = `}`\r\n                }\r\n                addItem({\r\n                    level,\r\n                    key: cend,\r\n                    value: null,\r\n                    valueColor: null,\r\n                    keyNumbers: null,\r\n                    valueComma: false,\r\n                    hasChildren: false,\r\n                })\r\n\r\n            }\r\n\r\n            function pSelf({ level, key, value, last }) {\r\n                if (isarr(value)) {\r\n                    pArray({ level, key, value, last })\r\n                }\r\n                else if (isobj(value)) {\r\n                    pObject({ level, key, value, last })\r\n                }\r\n                else {\r\n                    let r = cValue(value)\r\n                    let c = vo[`${r.type}Color`]\r\n                    addItem({\r\n                        level,\r\n                        key: `${key} :  `,\r\n                        value: r.value,\r\n                        valueColor: c,\r\n                        keyNumbers: null,\r\n                        valueComma: !last,\r\n                        hasChildren: false,\r\n                    })\r\n                }\r\n            }\r\n\r\n            if (isarr(d)) {\r\n                pArray({\r\n                    level: 0,\r\n                    key: null,\r\n                    value: d,\r\n                    last: true,\r\n                })\r\n            }\r\n            else if (isobj(d)) {\r\n                pObject({\r\n                    level: 0,\r\n                    key: null,\r\n                    value: d,\r\n                    last: true,\r\n                })\r\n            }\r\n            else {\r\n                let r = cValue(d)\r\n                let c = vo[`${r.type}Color`]\r\n                addItem({\r\n                    level: 0,\r\n                    key: null,\r\n                    value: r.value,\r\n                    valueColor: c,\r\n                    keyNumbers: null,\r\n                    valueComma: null,\r\n                    hasChildren: false,\r\n                })\r\n            }\r\n\r\n            return items\r\n        },\r\n\r\n        toggleItems: function(item) {\r\n            //console.log('methods toggleItems',item)\r\n\r\n            let vo = this\r\n\r\n            //toggle\r\n            vo.items[item.index].displayChildren = !vo.items[item.index].displayChildren\r\n\r\n            //setTimeout\r\n            setTimeout(() => {\r\n\r\n                //changeDisplayChildren\r\n                vo.changeDisplayChildren = true\r\n                vo.changeDisplayChildrenIndex = item.index\r\n\r\n                //change\r\n                vo.change()\r\n\r\n            }, 10)\r\n\r\n        },\r\n\r\n        scrollItems: debounce(function(e) {\r\n            //console.log('methods scrollItems', e.target.scrollTop)\r\n\r\n            let vo = this\r\n\r\n            //setTimeout\r\n            setTimeout(() => {\r\n\r\n                //save\r\n                vo.scrollTop = e.target.scrollTop\r\n\r\n                //change\r\n                vo.change()\r\n\r\n            }, 10)\r\n\r\n        }, 100),\r\n\r\n    },\r\n}\r\n<\/script>\r\n\r\n<style scoped>\r\n.caretRight {\r\n    transform: translateY(-1px);\r\n    cursor: pointer;\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    margin-right: 5px;\r\n}\r\n.center {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n.showChildren {\r\n    transform: rotate(90deg);\r\n}\r\n</style>\r\n\r\n"]},media:void 0})},Nr,"data-v-d10605ee",!1,void 0,Hr,void 0)});
//# sourceMappingURL=w-json-view.umd.js.map
