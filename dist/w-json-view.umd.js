!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e=e||self)["w-json-view"]=r()}(this,function(){"use strict";var e=function(e,r){for(var n=-1,t=null==e?0:e.length;++n<t&&!1!==r(e[n],n,e););return e};var r=function(e){return function(r,n,t){for(var i=-1,o=Object(r),a=t(r),l=a.length;l--;){var u=a[e?l:++i];if(!1===n(o[u],u,o))break}return r}}();var n=function(e,r){for(var n=-1,t=Array(e);++n<e;)t[n]=r(n);return t};function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(e,r){return e(r={exports:{}},r.exports),r.exports}var a="object"==t(i)&&i&&i.Object===Object&&i,l="object"==("undefined"==typeof self?"undefined":t(self))&&self&&self.Object===Object&&self,u=a||l||Function("return this")(),s=u.Symbol,c=Object.prototype,v=c.hasOwnProperty,f=c.toString,p=s?s.toStringTag:void 0;var h=function(e){var r=v.call(e,p),n=e[p];try{e[p]=void 0;var t=!0}catch(e){}var i=f.call(e);return t&&(r?e[p]=n:delete e[p]),i},d=Object.prototype.toString;var m=function(e){return d.call(e)},y="[object Null]",g="[object Undefined]",b=s?s.toStringTag:void 0;var _=function(e){return null==e?void 0===e?g:y:b&&b in Object(e)?h(e):m(e)};var C=function(e){return null!=e&&"object"==t(e)},j="[object Arguments]";var k=function(e){return C(e)&&_(e)==j},w=Object.prototype,x=w.hasOwnProperty,A=w.propertyIsEnumerable,I=k(function(){return arguments}())?k:function(e){return C(e)&&x.call(e,"callee")&&!A.call(e,"callee")},N=Array.isArray;var O=function(){return!1},H=o(function(e,r){var n=r&&!r.nodeType&&r,t=n&&e&&!e.nodeType&&e,i=t&&t.exports===n?u.Buffer:void 0,o=(i?i.isBuffer:void 0)||O;e.exports=o}),S=9007199254740991,T=/^(?:0|[1-9]\d*)$/;var z=function(e,r){var n=t(e);return!!(r=null==r?S:r)&&("number"==n||"symbol"!=n&&T.test(e))&&e>-1&&e%1==0&&e<r},M=9007199254740991;var E=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=M},$={};$["[object Float32Array]"]=$["[object Float64Array]"]=$["[object Int8Array]"]=$["[object Int16Array]"]=$["[object Int32Array]"]=$["[object Uint8Array]"]=$["[object Uint8ClampedArray]"]=$["[object Uint16Array]"]=$["[object Uint32Array]"]=!0,$["[object Arguments]"]=$["[object Array]"]=$["[object ArrayBuffer]"]=$["[object Boolean]"]=$["[object DataView]"]=$["[object Date]"]=$["[object Error]"]=$["[object Function]"]=$["[object Map]"]=$["[object Number]"]=$["[object Object]"]=$["[object RegExp]"]=$["[object Set]"]=$["[object String]"]=$["[object WeakMap]"]=!1;var B=function(e){return C(e)&&E(e.length)&&!!$[_(e)]};var D=function(e){return function(r){return e(r)}},R=o(function(e,r){var n=r&&!r.nodeType&&r,t=n&&e&&!e.nodeType&&e,i=t&&t.exports===n&&a.process,o=function(){try{var e=t&&t.require&&t.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=o}),L=R&&R.isTypedArray,F=L?D(L):B,U=Object.prototype.hasOwnProperty;var W=function(e,r){var t=N(e),i=!t&&I(e),o=!t&&!i&&H(e),a=!t&&!i&&!o&&F(e),l=t||i||o||a,u=l?n(e.length,String):[],s=u.length;for(var c in e)!r&&!U.call(e,c)||l&&("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||z(c,s))||u.push(c);return u},P=Object.prototype;var V=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||P)};var J=function(e,r){return function(n){return e(r(n))}}(Object.keys,Object),X=Object.prototype.hasOwnProperty;var q=function(e){if(!V(e))return J(e);var r=[];for(var n in Object(e))X.call(e,n)&&"constructor"!=n&&r.push(n);return r};var Y=function(e){var r=t(e);return null!=e&&("object"==r||"function"==r)},G="[object AsyncFunction]",K="[object Function]",Q="[object GeneratorFunction]",Z="[object Proxy]";var ee=function(e){if(!Y(e))return!1;var r=_(e);return r==K||r==Q||r==G||r==Z};var re=function(e){return null!=e&&E(e.length)&&!ee(e)};var ne=function(e){return re(e)?W(e):q(e)};var te=function(e,r){return function(n,t){if(null==n)return n;if(!re(n))return e(n,t);for(var i=n.length,o=r?i:-1,a=Object(n);(r?o--:++o<i)&&!1!==t(a[o],o,a););return n}}(function(e,n){return e&&r(e,n,ne)});var ie=function(e){return e};var oe=function(e){return"function"==typeof e?e:ie};var ae,le=function(r,n){return(N(r)?e:te)(r,oe(n))},ue=u["__core-js_shared__"],se=(ae=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||""))?"Symbol(src)_1."+ae:"";var ce=function(e){return!!se&&se in e},ve=Function.prototype.toString;var fe=function(e){if(null!=e){try{return ve.call(e)}catch(e){}try{return e+""}catch(e){}}return""},pe=/^\[object .+?Constructor\]$/,he=Function.prototype,de=Object.prototype,me=he.toString,ye=de.hasOwnProperty,ge=RegExp("^"+me.call(ye).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var be=function(e){return!(!Y(e)||ce(e))&&(ee(e)?ge:pe).test(fe(e))};var _e=function(e,r){return null==e?void 0:e[r]};var Ce=function(e,r){var n=_e(e,r);return be(n)?n:void 0},je=Ce(u,"DataView"),ke=Ce(u,"Map"),we=Ce(u,"Promise"),xe=Ce(u,"Set"),Ae=Ce(u,"WeakMap"),Ie=fe(je),Ne=fe(ke),Oe=fe(we),He=fe(xe),Se=fe(Ae),Te=_;(je&&"[object DataView]"!=Te(new je(new ArrayBuffer(1)))||ke&&"[object Map]"!=Te(new ke)||we&&"[object Promise]"!=Te(we.resolve())||xe&&"[object Set]"!=Te(new xe)||Ae&&"[object WeakMap]"!=Te(new Ae))&&(Te=function(e){var r=_(e),n="[object Object]"==r?e.constructor:void 0,t=n?fe(n):"";if(t)switch(t){case Ie:return"[object DataView]";case Ne:return"[object Map]";case Oe:return"[object Promise]";case He:return"[object Set]";case Se:return"[object WeakMap]"}return r});var ze=Te,Me="[object String]";var Ee=function(e){return"string"==typeof e||!N(e)&&C(e)&&_(e)==Me};var $e=function(e){return function(r){return null==r?void 0:r[e]}},Be=$e("length"),De=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Re=function(e){return De.test(e)},Le="[\\ud800-\\udfff]",Fe="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ue="\\ud83c[\\udffb-\\udfff]",We="[^\\ud800-\\udfff]",Pe="(?:\\ud83c[\\udde6-\\uddff]){2}",Ve="[\\ud800-\\udbff][\\udc00-\\udfff]",Je="(?:"+Fe+"|"+Ue+")"+"?",Xe="[\\ufe0e\\ufe0f]?"+Je+("(?:\\u200d(?:"+[We,Pe,Ve].join("|")+")[\\ufe0e\\ufe0f]?"+Je+")*"),qe="(?:"+[We+Fe+"?",Fe,Pe,Ve,Le].join("|")+")",Ye=RegExp(Ue+"(?="+Ue+")|"+qe+Xe,"g");var Ge=function(e){for(var r=Ye.lastIndex=0;Ye.test(e);)++r;return r};var Ke=function(e){return Re(e)?Ge(e):Be(e)},Qe="[object Map]",Ze="[object Set]";var er=function(e){if(null==e)return 0;if(re(e))return Ee(e)?Ke(e):e.length;var r=ze(e);return r==Qe||r==Ze?e.size:q(e).length},rr="[object Symbol]";var nr=function(e){return"symbol"==t(e)||C(e)&&_(e)==rr},tr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ir=/^\w*$/;var or=function(e,r){if(N(e))return!1;var n=t(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!nr(e))||(ir.test(e)||!tr.test(e)||null!=r&&e in Object(r))},ar=Ce(Object,"create");var lr=function(){this.__data__=ar?ar(null):{},this.size=0};var ur=function(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r},sr="__lodash_hash_undefined__",cr=Object.prototype.hasOwnProperty;var vr=function(e){var r=this.__data__;if(ar){var n=r[e];return n===sr?void 0:n}return cr.call(r,e)?r[e]:void 0},fr=Object.prototype.hasOwnProperty;var pr=function(e){var r=this.__data__;return ar?void 0!==r[e]:fr.call(r,e)},hr="__lodash_hash_undefined__";var dr=function(e,r){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ar&&void 0===r?hr:r,this};function mr(e){var r=-1,n=null==e?0:e.length;for(this.clear();++r<n;){var t=e[r];this.set(t[0],t[1])}}mr.prototype.clear=lr,mr.prototype.delete=ur,mr.prototype.get=vr,mr.prototype.has=pr,mr.prototype.set=dr;var yr=mr;var gr=function(){this.__data__=[],this.size=0};var br=function(e,r){return e===r||e!=e&&r!=r};var _r=function(e,r){for(var n=e.length;n--;)if(br(e[n][0],r))return n;return-1},Cr=Array.prototype.splice;var jr=function(e){var r=this.__data__,n=_r(r,e);return!(n<0)&&(n==r.length-1?r.pop():Cr.call(r,n,1),--this.size,!0)};var kr=function(e){var r=this.__data__,n=_r(r,e);return n<0?void 0:r[n][1]};var wr=function(e){return _r(this.__data__,e)>-1};var xr=function(e,r){var n=this.__data__,t=_r(n,e);return t<0?(++this.size,n.push([e,r])):n[t][1]=r,this};function Ar(e){var r=-1,n=null==e?0:e.length;for(this.clear();++r<n;){var t=e[r];this.set(t[0],t[1])}}Ar.prototype.clear=gr,Ar.prototype.delete=jr,Ar.prototype.get=kr,Ar.prototype.has=wr,Ar.prototype.set=xr;var Ir=Ar;var Nr=function(){this.size=0,this.__data__={hash:new yr,map:new(ke||Ir),string:new yr}};var Or=function(e){var r=t(e);return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e};var Hr=function(e,r){var n=e.__data__;return Or(r)?n["string"==typeof r?"string":"hash"]:n.map};var Sr=function(e){var r=Hr(this,e).delete(e);return this.size-=r?1:0,r};var Tr=function(e){return Hr(this,e).get(e)};var zr=function(e){return Hr(this,e).has(e)};var Mr=function(e,r){var n=Hr(this,e),t=n.size;return n.set(e,r),this.size+=n.size==t?0:1,this};function Er(e){var r=-1,n=null==e?0:e.length;for(this.clear();++r<n;){var t=e[r];this.set(t[0],t[1])}}Er.prototype.clear=Nr,Er.prototype.delete=Sr,Er.prototype.get=Tr,Er.prototype.has=zr,Er.prototype.set=Mr;var $r=Er,Br="Expected a function";function Dr(e,r){if("function"!=typeof e||null!=r&&"function"!=typeof r)throw new TypeError(Br);var n=function n(){var t=arguments,i=r?r.apply(this,t):t[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,t);return n.cache=o.set(i,a)||o,a};return n.cache=new(Dr.Cache||$r),n}Dr.Cache=$r;var Rr=Dr,Lr=500;var Fr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ur=/\\(\\)?/g,Wr=function(e){var r=Rr(e,function(e){return n.size===Lr&&n.clear(),e}),n=r.cache;return r}(function(e){var r=[];return 46===e.charCodeAt(0)&&r.push(""),e.replace(Fr,function(e,n,t,i){r.push(t?i.replace(Ur,"$1"):n||e)}),r});var Pr=function(e,r){for(var n=-1,t=null==e?0:e.length,i=Array(t);++n<t;)i[n]=r(e[n],n,e);return i},Vr=1/0,Jr=s?s.prototype:void 0,Xr=Jr?Jr.toString:void 0;var qr=function e(r){if("string"==typeof r)return r;if(N(r))return Pr(r,e)+"";if(nr(r))return Xr?Xr.call(r):"";var n=r+"";return"0"==n&&1/r==-Vr?"-0":n};var Yr=function(e){return null==e?"":qr(e)};var Gr=function(e,r){return N(e)?e:or(e,r)?[e]:Wr(Yr(e))},Kr=1/0;var Qr=function(e){if("string"==typeof e||nr(e))return e;var r=e+"";return"0"==r&&1/e==-Kr?"-0":r};var Zr=function(e,r){for(var n=0,t=(r=Gr(r,e)).length;null!=e&&n<t;)e=e[Qr(r[n++])];return n&&n==t?e:void 0};var en=function(e,r,n){var t=null==e?void 0:Zr(e,r);return void 0===t?n:t};var rn=function(){this.__data__=new Ir,this.size=0};var nn=function(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n};var tn=function(e){return this.__data__.get(e)};var on=function(e){return this.__data__.has(e)},an=200;var ln=function(e,r){var n=this.__data__;if(n instanceof Ir){var t=n.__data__;if(!ke||t.length<an-1)return t.push([e,r]),this.size=++n.size,this;n=this.__data__=new $r(t)}return n.set(e,r),this.size=n.size,this};function un(e){var r=this.__data__=new Ir(e);this.size=r.size}un.prototype.clear=rn,un.prototype.delete=nn,un.prototype.get=tn,un.prototype.has=on,un.prototype.set=ln;var sn=un,cn="__lodash_hash_undefined__";var vn=function(e){return this.__data__.set(e,cn),this};var fn=function(e){return this.__data__.has(e)};function pn(e){var r=-1,n=null==e?0:e.length;for(this.__data__=new $r;++r<n;)this.add(e[r])}pn.prototype.add=pn.prototype.push=vn,pn.prototype.has=fn;var hn=pn;var dn=function(e,r){for(var n=-1,t=null==e?0:e.length;++n<t;)if(r(e[n],n,e))return!0;return!1};var mn=function(e,r){return e.has(r)},yn=1,gn=2;var bn=function(e,r,n,t,i,o){var a=n&yn,l=e.length,u=r.length;if(l!=u&&!(a&&u>l))return!1;var s=o.get(e);if(s&&o.get(r))return s==r;var c=-1,v=!0,f=n&gn?new hn:void 0;for(o.set(e,r),o.set(r,e);++c<l;){var p=e[c],h=r[c];if(t)var d=a?t(h,p,c,r,e,o):t(p,h,c,e,r,o);if(void 0!==d){if(d)continue;v=!1;break}if(f){if(!dn(r,function(e,r){if(!mn(f,r)&&(p===e||i(p,e,n,t,o)))return f.push(r)})){v=!1;break}}else if(p!==h&&!i(p,h,n,t,o)){v=!1;break}}return o.delete(e),o.delete(r),v},_n=u.Uint8Array;var Cn=function(e){var r=-1,n=Array(e.size);return e.forEach(function(e,t){n[++r]=[t,e]}),n};var jn=function(e){var r=-1,n=Array(e.size);return e.forEach(function(e){n[++r]=e}),n},kn=1,wn=2,xn="[object Boolean]",An="[object Date]",In="[object Error]",Nn="[object Map]",On="[object Number]",Hn="[object RegExp]",Sn="[object Set]",Tn="[object String]",zn="[object Symbol]",Mn="[object ArrayBuffer]",En="[object DataView]",$n=s?s.prototype:void 0,Bn=$n?$n.valueOf:void 0;var Dn=function(e,r,n,t,i,o,a){switch(n){case En:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Mn:return!(e.byteLength!=r.byteLength||!o(new _n(e),new _n(r)));case xn:case An:case On:return br(+e,+r);case In:return e.name==r.name&&e.message==r.message;case Hn:case Tn:return e==r+"";case Nn:var l=Cn;case Sn:var u=t&kn;if(l||(l=jn),e.size!=r.size&&!u)return!1;var s=a.get(e);if(s)return s==r;t|=wn,a.set(e,r);var c=bn(l(e),l(r),t,i,o,a);return a.delete(e),c;case zn:if(Bn)return Bn.call(e)==Bn.call(r)}return!1};var Rn=function(e,r){for(var n=-1,t=r.length,i=e.length;++n<t;)e[i+n]=r[n];return e};var Ln=function(e,r,n){var t=r(e);return N(e)?t:Rn(t,n(e))};var Fn=function(e,r){for(var n=-1,t=null==e?0:e.length,i=0,o=[];++n<t;){var a=e[n];r(a,n,e)&&(o[i++]=a)}return o};var Un=function(){return[]},Wn=Object.prototype.propertyIsEnumerable,Pn=Object.getOwnPropertySymbols,Vn=Pn?function(e){return null==e?[]:(e=Object(e),Fn(Pn(e),function(r){return Wn.call(e,r)}))}:Un;var Jn=function(e){return Ln(e,ne,Vn)},Xn=1,qn=Object.prototype.hasOwnProperty;var Yn=function(e,r,n,t,i,o){var a=n&Xn,l=Jn(e),u=l.length;if(u!=Jn(r).length&&!a)return!1;for(var s=u;s--;){var c=l[s];if(!(a?c in r:qn.call(r,c)))return!1}var v=o.get(e);if(v&&o.get(r))return v==r;var f=!0;o.set(e,r),o.set(r,e);for(var p=a;++s<u;){var h=e[c=l[s]],d=r[c];if(t)var m=a?t(d,h,c,r,e,o):t(h,d,c,e,r,o);if(!(void 0===m?h===d||i(h,d,n,t,o):m)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var y=e.constructor,g=r.constructor;y!=g&&"constructor"in e&&"constructor"in r&&!("function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g)&&(f=!1)}return o.delete(e),o.delete(r),f},Gn=1,Kn="[object Arguments]",Qn="[object Array]",Zn="[object Object]",et=Object.prototype.hasOwnProperty;var rt=function(e,r,n,t,i,o){var a=N(e),l=N(r),u=a?Qn:ze(e),s=l?Qn:ze(r),c=(u=u==Kn?Zn:u)==Zn,v=(s=s==Kn?Zn:s)==Zn,f=u==s;if(f&&H(e)){if(!H(r))return!1;a=!0,c=!1}if(f&&!c)return o||(o=new sn),a||F(e)?bn(e,r,n,t,i,o):Dn(e,r,u,n,t,i,o);if(!(n&Gn)){var p=c&&et.call(e,"__wrapped__"),h=v&&et.call(r,"__wrapped__");if(p||h){var d=p?e.value():e,m=h?r.value():r;return o||(o=new sn),i(d,m,n,t,o)}}return!!f&&(o||(o=new sn),Yn(e,r,n,t,i,o))};var nt=function e(r,n,t,i,o){return r===n||(null==r||null==n||!C(r)&&!C(n)?r!=r&&n!=n:rt(r,n,t,i,e,o))},tt=1,it=2;var ot=function(e,r,n,t){var i=n.length,o=i,a=!t;if(null==e)return!o;for(e=Object(e);i--;){var l=n[i];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<o;){var u=(l=n[i])[0],s=e[u],c=l[1];if(a&&l[2]){if(void 0===s&&!(u in e))return!1}else{var v=new sn;if(t)var f=t(s,c,u,e,r,v);if(!(void 0===f?nt(c,s,tt|it,t,v):f))return!1}}return!0};var at=function(e){return e==e&&!Y(e)};var lt=function(e){for(var r=ne(e),n=r.length;n--;){var t=r[n],i=e[t];r[n]=[t,i,at(i)]}return r};var ut=function(e,r){return function(n){return null!=n&&(n[e]===r&&(void 0!==r||e in Object(n)))}};var st=function(e){var r=lt(e);return 1==r.length&&r[0][2]?ut(r[0][0],r[0][1]):function(n){return n===e||ot(n,e,r)}};var ct=function(e,r){return null!=e&&r in Object(e)};var vt=function(e,r,n){for(var t=-1,i=(r=Gr(r,e)).length,o=!1;++t<i;){var a=Qr(r[t]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++t!=i?o:!!(i=null==e?0:e.length)&&E(i)&&z(a,i)&&(N(e)||I(e))};var ft=function(e,r){return null!=e&&vt(e,r,ct)},pt=1,ht=2;var dt=function(e,r){return or(e)&&at(r)?ut(Qr(e),r):function(n){var t=en(n,e);return void 0===t&&t===r?ft(n,e):nt(r,t,pt|ht)}};var mt=function(e){return function(r){return Zr(r,e)}};var yt=function(e){return or(e)?$e(Qr(e)):mt(e)};var gt=function(e){return"function"==typeof e?e:null==e?ie:"object"==t(e)?N(e)?dt(e[0],e[1]):st(e):yt(e)};var bt=function(e){return function(r,n,t){var i=Object(r);if(!re(r)){var o=gt(n);r=ne(r),n=function(e){return o(i[e],e,i)}}var a=e(r,n,t);return a>-1?i[o?r[a]:a]:void 0}};var _t=function(e,r,n,t){for(var i=e.length,o=n+(t?1:-1);t?o--:++o<i;)if(r(e[o],o,e))return o;return-1},Ct=NaN,jt=/^\s+|\s+$/g,kt=/^[-+]0x[0-9a-f]+$/i,wt=/^0b[01]+$/i,xt=/^0o[0-7]+$/i,At=parseInt;var It=function(e){if("number"==typeof e)return e;if(nr(e))return Ct;if(Y(e)){var r="function"==typeof e.valueOf?e.valueOf():e;e=Y(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(jt,"");var n=wt.test(e);return n||xt.test(e)?At(e.slice(2),n?2:8):kt.test(e)?Ct:+e},Nt=1/0,Ot=17976931348623157e292;var Ht=function(e){return e?(e=It(e))===Nt||e===-Nt?(e<0?-1:1)*Ot:e==e?e:0:0===e?e:0};var St=function(e){var r=Ht(e),n=r%1;return r==r?n?r-n:r:0},Tt=Math.max;var zt=bt(function(e,r,n){var t=null==e?0:e.length;if(!t)return-1;var i=null==n?0:St(n);return i<0&&(i=Tt(t+i,0)),_t(e,gt(r),i)}),Mt=Math.max,Et=Math.min;var $t=bt(function(e,r,n){var t=null==e?0:e.length;if(!t)return-1;var i=t-1;return void 0!==n&&(i=St(n),i=n<0?Mt(t+i,0):Et(i,t-1)),_t(e,gt(r),i,!0)}),Bt=function(){return u.Date.now()},Dt="Expected a function",Rt=Math.max,Lt=Math.min;var Ft=function(e,r,n){var t,i,o,a,l,u,s=0,c=!1,v=!1,f=!0;if("function"!=typeof e)throw new TypeError(Dt);function p(r){var n=t,o=i;return t=i=void 0,s=r,a=e.apply(o,n)}function h(e){var n=e-u;return void 0===u||n>=r||n<0||v&&e-s>=o}function d(){var e=Bt();if(h(e))return m(e);l=setTimeout(d,function(e){var n=r-(e-u);return v?Lt(n,o-(e-s)):n}(e))}function m(e){return l=void 0,f&&t?p(e):(t=i=void 0,a)}function y(){var e=Bt(),n=h(e);if(t=arguments,i=this,u=e,n){if(void 0===l)return function(e){return s=e,l=setTimeout(d,r),c?p(e):a}(u);if(v)return clearTimeout(l),l=setTimeout(d,r),p(u)}return void 0===l&&(l=setTimeout(d,r)),a}return r=It(r)||0,Y(n)&&(c=!!n.leading,o=(v="maxWait"in n)?Rt(It(n.maxWait)||0,r):o,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==l&&clearTimeout(l),s=0,t=u=i=l=void 0},y.flush=function(){return void 0===l?a:m(Bt())},y};function Ut(e){return"[object String]"===Object.prototype.toString.call(e)}function Wt(e){return!(!Ut(e)||""===e)}function Pt(e){var r=!1;return Wt(e)?r=!isNaN(Number(e)):function(e){return"[object Number]"===Object.prototype.toString.call(e)}(e)&&(r=!0),r}var Vt="[object Boolean]";var Jt=function(e){return!0===e||!1===e||C(e)&&_(e)==Vt};function Xt(e){return"[object Array]"===Object.prototype.toString.call(e)}function qt(e){return"[object Object]"===Object.prototype.toString.call(e)}function Yt(e){return Wt(e)||Pt(e)?String(e):""}var Gt=u.isFinite,Kt=Math.min;var Qt=function(e){var r=Math[e];return function(e,n){if(e=It(e),(n=null==n?0:Kt(St(n),292))&&Gt(e)){var t=(Yr(e)+"e").split("e"),i=r(t[0]+"e"+(+t[1]+n));return+((t=(Yr(i)+"e").split("e"))[0]+"e"+(+t[1]-n))}return r(e)}}("round");function Zt(e){if(!Pt(e))return 0;e=function(e){return Pt(e)?Ht(e):0}(e);var r=Qt(e);return"0"===String(r)?0:r}var ei={props:{data:{},listHeight:{type:Number,default:400},itemMinHeight:{type:Number,default:24}},data:function(){return{lineNumberWidth:0,preItemsHeight:0,aftItemsHeight:0,scrollTop:0,itemsHeight:0,styleItem:{iconColor:"#999",keyColor:"#666",keyNumbersColor:"#aaa",numColor:"#1C00D4",strColor:"#EBAF61",bolColor:"#AB0D90",funColor:"#ca56da",unknownColor:"#222",defDisplayChildren:!0},styleLineNumber:{display:"table-cell","padding-right":"10px","text-align":"right","font-size":"0.8rem",color:"#f26","user-select":"none"},items:[],useItems:[]}},mounted:function(){},watch:{data:{immediate:!0,handler:function(e){var r=this,n=r.parseData(r.data),t=13*(Math.ceil(Math.pow(er(n),.1))+1);r.items=n,r.lineNumberWidth=t,r.change()}}},computed:{},methods:{change:function(){this.getUseItems(),this.updateItems(),this.getUseItems()},getUseItems:function(){var e,r=this,n=r.items,t=r.scrollTop,i=t+r.listHeight,o=er(n);e=$t(n,function(e,r){return e.y+e.useHeight<t});var a=en(e,"index",0);a=Math.max(a-10,0),e=zt(n,function(e,r){return e.y>i});var l=en(e,"index",o);l=Math.min(l+10,o-1);var u=[],s=0,c=0;le(n,function(e,r){r<a?s+=e.useHeight:r>l?c+=e.useHeight:e.show&&u.push(e)}),r.useItems=u,r.preItemsHeight=s,r.aftItemsHeight=c},updateItems:function(){var e=this.items;le(this.$refs.block,function(r){var n=Zt(r.getAttribute("index"));if(n>=0&&n<=er(e)-1){var t=r.clientHeight;e[n].height!==t&&(e[n].height=t)}});var r=!1,n=null,t=null;le(e,function(e,i){r||e.displayChildren||(r=!0,n=e.level,t=i),t!==i&&r?e.level>n?!1!==e.show&&(e.show=!1):e.level===n&&(!1!==e.show&&(e.show=!1),r=!1,n=null):!0!==e.show&&(e.show=!0)});var i=0;le(e,function(e){e.y!==i&&(e.y=i),e.show?(i+=e.height,e.useHeight!==e.height&&(e.useHeight=e.height)):0!==e.useHeight&&(e.useHeight=0)}),this.itemsHeight!==i&&(this.itemsHeight=i)},parseData:function(e){var r=this,n=0,t=[];function i(e){if(Pt(e))return{type:"num",value:Yt(e)};if(Ut(e))return{type:"str",value:'"'.concat(e,'"')};if(function(e){return Jt(e)}(e)){var r="false";return e&&(r="true"),{type:"bol",value:r}}return function(e){var r=Object.prototype.toString.call(e);return"[object Function]"===r||"[object AsyncFunction]"===r}(e)?{type:"fun",value:e.toString()}:{type:"unknown",value:e}}function o(e){var i=e.level,o=e.key,a=e.keyNumbers,l=e.value,u=e.valueColor,s=e.valueComma,c=e.valueTail,v=e.hasChildren,f=(n+=1)-1;t.push({index:f,lineNumber:n,level:i,paddingLeft:24*i+16,key:o,keyNumbers:a,value:l,valueColor:u,valueComma:s,valueTail:c,hasChildren:v,displayChildren:r.styleItem.defDisplayChildren,show:!0,height:r.itemMinHeight,useHeight:0,y:f*r.itemMinHeight})}function a(e){var r=e.level,n=e.key,t=e.value,i=e.last,a=er(t),l={type:"arr",n:a},s="[";null!==n&&(s="".concat(n," :  [")),o({level:r,key:s,value:null,valueColor:null,valueTail:"]",keyNumbers:l,valueComma:!1,hasChildren:!0});var c=0;le(t,function(e,n){u({level:r+1,key:n,value:e,last:(c+=1)===a})});var v="],";i&&(v="]"),o({level:r,key:v,value:null,valueColor:null,keyNumbers:null,valueComma:!1,hasChildren:!1})}function l(e){var r=e.level,n=e.key,t=e.value,i=e.last,a=er(ne(t)),l={type:"obj",n:a},s="{";null!==n&&(s="".concat(n," :  {")),o({level:r,key:s,value:null,valueColor:null,valueTail:"}",keyNumbers:l,valueComma:!1,hasChildren:!0});var c=0;le(t,function(e,n){u({level:r+1,key:n,value:e,last:(c+=1)===a})});var v="},";i&&(v="}"),o({level:r,key:v,value:null,valueColor:null,keyNumbers:null,valueComma:!1,hasChildren:!1})}function u(e){var n=e.level,t=e.key,u=e.value,s=e.last;if(Xt(u))a({level:n,key:t,value:u,last:s});else if(qt(u))l({level:n,key:t,value:u,last:s});else{var c=i(u),v=r.styleItem["".concat(c.type,"Color")];o({level:n,key:"".concat(t," :  "),value:c.value,valueColor:v,keyNumbers:null,valueComma:!s,hasChildren:!1})}}if(Xt(e))a({level:0,key:null,value:e,last:!0});else if(qt(e))l({level:0,key:null,value:e,last:!0});else{var s=i(e),c=r.styleItem["".concat(s.type,"Color")];o({level:0,key:null,value:s.value,valueColor:c,keyNumbers:null,valueComma:null,hasChildren:!1})}return t},toggleItems:function(e){var r=this;r.items[e.index].displayChildren=!r.items[e.index].displayChildren,setTimeout(function(){r.change()},10)},scrollItems:Ft(function(e){var r=this;setTimeout(function(){var n=e.target.scrollTop;r.scrollTop=n,r.change()},10)},100)}};var ri,ni=function(e,r,n,t,i,o,a,l,u,s){"boolean"!=typeof a&&(u=l,l=a,a=!1);var c,v="function"==typeof n?n.options:n;if(e&&e.render&&(v.render=e.render,v.staticRenderFns=e.staticRenderFns,v._compiled=!0,i&&(v.functional=!0)),t&&(v._scopeId=t),o?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,u(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},v._ssrRegister=c):r&&(c=a?function(){r.call(this,s(this.$root.$options.shadowRoot))}:function(e){r.call(this,l(e))}),c)if(v.functional){var f=v.render;v.render=function(e,r){return c.call(r),f(e,r)}}else{var p=v.beforeCreate;v.beforeCreate=p?[].concat(p,c):[c]}return n},ti="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var ii={};var oi=function(e){return function(e,r){return function(e,r){var n=ti?r.media||"default":e,t=ii[n]||(ii[n]={ids:new Set,styles:[]});if(!t.ids.has(e)){t.ids.add(e);var i=r.source;if(r.map&&(i+="\n/*# sourceURL="+r.map.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r.map))))+" */"),t.element||(t.element=document.createElement("style"),t.element.type="text/css",r.media&&t.element.setAttribute("media",r.media),void 0===ri&&(ri=document.head||document.getElementsByTagName("head")[0]),ri.appendChild(t.element)),"styleSheet"in t.element)t.styles.push(i),t.element.styleSheet.cssText=t.styles.filter(Boolean).join("\n");else{var o=t.ids.size-1,a=document.createTextNode(i),l=t.element.childNodes;l[o]&&t.element.removeChild(l[o]),l.length?t.element.insertBefore(a,l[o]):t.element.appendChild(a)}}}(e,r)}};const ai=ei;var li=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{style:[{position:"relative","overflow-y":"auto",height:e.listHeight+"px"}],on:{scroll:e.scrollItems}},[n("div",{style:[{height:e.itemsHeight+"px"}]}),e._v(" "),n("div",{style:[{position:"absolute",top:"0px"}]},[n("div",{style:[{height:e.preItemsHeight+"px"}]}),e._v(" "),e._l(e.useItems,function(r,t){return[r.show?n("div",{key:t,ref:"block",refInFor:!0,attrs:{index:r.index}},[n("div",{style:[e.styleLineNumber,{width:e.lineNumberWidth+"px"}]},[e._v(e._s(r.lineNumber))]),e._v(" "),n("div",{style:[{display:"table-cell","padding-left":r.paddingLeft+"px"}]},[n("div",{staticStyle:{position:"relative"}},[n("div",{staticStyle:{position:"absolute",top:"0px",left:"0px",transform:"translateX(-100%)"}},[r.hasChildren?n("span",{on:{click:function(n){return e.toggleItems(r)}}},[n("span",{class:[{caretRight:!0,showChildren:r.displayChildren}]},[n("span",{staticClass:"center"},[n("svg",{attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",fill:e.styleItem.iconColor,width:"11px",height:"11px",x:"0px",y:"0px",viewBox:"0 0 415.346 415.346","xml:space":"preserve"}},[n("g",[n("path",{attrs:{d:"M41.712,415.346c-11.763,0-21.3-9.537-21.3-21.3V21.299C20.412,9.536,29.949,0,41.712,0l346.122,191.697 c0,0,15.975,15.975,0,31.951C371.859,239.622,41.712,415.346,41.712,415.346z"}})])])])])]):n("span",{staticStyle:{display:"inline-block",width:"16px"}})]),e._v(" "),n("div",{staticStyle:{"text-indent":"-2rem","margin-left":"2em"}},[r.key?n("span",{style:[{color:e.styleItem.keyColor}]},[n("span",[e._v(e._s(r.key))]),e._v(" "),r.keyNumbers?n("span",{style:[{margin:"0px 10px",color:e.styleItem.keyNumbersColor}]},["arr"===r.keyNumbers.type?n("span",[e._v("["+e._s(r.keyNumbers.n)+"]")]):e._e(),e._v(" "),"obj"===r.keyNumbers.type?n("span",[n("span",[e._v("{")]),n("span",[e._v(e._s(r.keyNumbers.n))]),n("span",[e._v("}")])]):e._e()]):e._e(),e._v(" "),r.displayChildren?e._e():n("span",[n("span",{staticStyle:{"margin-right":"10px"}},[e._v("...")]),e._v(e._s(r.valueTail))])]):e._e(),e._v(" "),r.value?[n("span",{style:[{color:r.valueColor}]},[e._v(e._s(r.value))]),e._v(" "),r.valueComma?n("span",{style:[{color:r.keyColor}]},[e._v(",")]):e._e()]:e._e()],2)])])]):e._e()]}),e._v(" "),n("div",{style:[{height:e.aftItemsHeight+"px"}]})],2)])};li._withStripped=!0;return ni({render:li,staticRenderFns:[]},function(e){e&&e("data-v-73011a33_0",{source:"\n.caretRight[data-v-73011a33] {\r\n    transform: translateY(-1px);\r\n    cursor: pointer;\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    margin-right: 5px;\n}\n.center[data-v-73011a33] {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\n}\n.showChildren[data-v-73011a33] {\r\n    transform: rotate(90deg);\n}\r\n",map:{version:3,sources:["D:\\開源-JS-102-3-w-component-vue\\w-component-vue\\src\\components\\WJsonView.vue"],names:[],mappings:";AAyjBA;IACA,2BAAA;IACA,eAAA;IACA,qBAAA;IACA,sBAAA;IACA,iBAAA;AACA;AACA;IACA,aAAA;IACA,mBAAA;IACA,uBAAA;AACA;AACA;IACA,wBAAA;AACA",file:"WJsonView.vue",sourcesContent:["<template>\r\n    <div :style=\"[{'position':'relative','overflow-y':'auto','height':listHeight+'px'}]\" @scroll=\"scrollItems\">\r\n\r\n        <div :style=\"[{'height':itemsHeight+'px'}]\"></div>\r\n\r\n        <div :style=\"[{'position':'absolute','top':'0px'}]\">\r\n\r\n            <div :style=\"[{'height':preItemsHeight+'px'}]\"></div>\r\n\r\n            <template v-for=\"(item,kitem) in useItems\">\r\n                <div ref=\"block\" :index=\"item.index\" :key=\"kitem\" v-if=\"item.show\">\r\n\r\n                    <div :style=\"[styleLineNumber,{'width':lineNumberWidth+'px'}]\">{{item.lineNumber}}</div>\r\n\r\n                    <div :style=\"[{'display':'table-cell','padding-left':item.paddingLeft+'px'}]\">\r\n\r\n                        <div style=\"position:relative;\">\r\n\r\n                            <div style=\"position:absolute; top:0px; left:0px; transform:translateX(-100%); \">\r\n                                <span v-if=\"item.hasChildren\" @click=\"toggleItems(item)\">\r\n                                    <span :class=\"[{'caretRight':true,'showChildren':item.displayChildren}]\">\r\n                                        <span class=\"center\">\r\n                                            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" :fill=\"styleItem.iconColor\" width=\"11px\" height=\"11px\" x=\"0px\" y=\"0px\" viewBox=\"0 0 415.346 415.346\" xml:space=\"preserve\"><g><path d=\"M41.712,415.346c-11.763,0-21.3-9.537-21.3-21.3V21.299C20.412,9.536,29.949,0,41.712,0l346.122,191.697 c0,0,15.975,15.975,0,31.951C371.859,239.622,41.712,415.346,41.712,415.346z\"/></g></svg>\r\n                                        </span>\r\n                                    </span>\r\n                                </span>\r\n                                <span style=\"display:inline-block; width:16px;\" v-else></span>\r\n                            </div>\r\n\r\n                            <div style=\"text-indent:-2rem; margin-left:2em;\">\r\n\r\n                                <span :style=\"[{'color':styleItem.keyColor}]\" v-if=\"item.key\">\r\n\r\n                                    <span>{{item.key}}</span>\r\n\r\n                                    <span :style=\"[{'margin':'0px 10px','color':styleItem.keyNumbersColor}]\" v-if=\"item.keyNumbers\">\r\n                                        <span v-if=\"item.keyNumbers.type==='arr'\">[{{item.keyNumbers.n}}]</span>\r\n                                        <span v-if=\"item.keyNumbers.type==='obj'\"><span>{</span><span>{{item.keyNumbers.n}}</span><span>}</span></span>\r\n                                    </span>\r\n\r\n                                    <span v-if=\"!item.displayChildren\"><span style=\"margin-right:10px;\">...</span>{{item.valueTail}}</span>\r\n\r\n                                </span>\r\n\r\n                                <template v-if=\"item.value\">\r\n\r\n                                    <span :style=\"[{'color':item.valueColor}]\">{{item.value}}</span>\r\n\r\n                                    <span :style=\"[{'color':item.keyColor}]\" v-if=\"item.valueComma\">,</span>\r\n\r\n                                </template>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n            </template>\r\n\r\n            <div :style=\"[{'height':aftItemsHeight+'px'}]\"></div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport each from 'lodash/each'\r\nimport size from 'lodash/size'\r\nimport keys from 'lodash/keys'\r\nimport get from 'lodash/get'\r\nimport find from 'lodash/find'\r\nimport findLast from 'lodash/findLast'\r\nimport debounce from 'lodash/debounce'\r\nimport isnum from 'wsemi/src/isnum.mjs'\r\nimport isstr from 'wsemi/src/isstr.mjs'\r\nimport isbol from 'wsemi/src/isbol.mjs'\r\nimport isarr from 'wsemi/src/isarr.mjs'\r\nimport isobj from 'wsemi/src/isobj.mjs'\r\nimport isfun from 'wsemi/src/isfun.mjs'\r\nimport cstr from 'wsemi/src/cstr.mjs'\r\nimport cint from 'wsemi/src/cint.mjs'\r\n\r\n/**\r\n * @vue-prop {*} data 輸入資料陣列或物件\r\n * @vue-prop {Number} [listHeight=400] 輸入顯示區高度，單位為px，預設400\r\n * @vue-prop {Number} [itemMinHeight=24] 輸入各元素顯示高度，單位為px，預設24，會於真實顯示後自動更新高度\r\n */\r\nexport default {\r\n    props: {\r\n        data: {},\r\n        listHeight: {\r\n            type: Number,\r\n            default: 400,\r\n        },\r\n        itemMinHeight: {\r\n            type: Number,\r\n            default: 24,\r\n        },\r\n    },\r\n    data: function() {\r\n        return {\r\n            lineNumberWidth: 0, //列號區寬度\r\n            preItemsHeight: 0, //上方空白區高度\r\n            aftItemsHeight: 0, //下方空白區高度\r\n            scrollTop: 0, //目前捲軸位置\r\n            itemsHeight: 0, //儲存全部項目高度\r\n            styleItem: {\r\n                iconColor: '#999',\r\n                keyColor: '#666',\r\n                keyNumbersColor: '#aaa',\r\n                numColor: '#1C00D4',\r\n                strColor: '#EBAF61',\r\n                bolColor: '#AB0D90',\r\n                funColor: '#ca56da',\r\n                unknownColor: '#222',\r\n                defDisplayChildren: true,\r\n            },\r\n            styleLineNumber: {\r\n                'display': 'table-cell',\r\n                'padding-right': '10px',\r\n                'text-align': 'right',\r\n                'font-size': '0.8rem',\r\n                'color': '#f26',\r\n                'user-select': 'none',\r\n            },\r\n            items: [],\r\n            useItems: [],\r\n        }\r\n    },\r\n    mounted: function() {\r\n    },\r\n    watch: {\r\n\r\n        data: {\r\n            immediate: true,\r\n            handler(value) {\r\n                //console.log('watch data', value)\r\n\r\n                let vo = this\r\n\r\n                //items\r\n                let items = vo.parseData(vo.data)\r\n\r\n                //lineNumberWidth, 每個字元使用13px寬度\r\n                let lineNumberWidth = (Math.ceil(Math.pow(size(items), 0.1)) + 1) * 13\r\n\r\n                //save\r\n                vo.items = items\r\n                vo.lineNumberWidth = lineNumberWidth\r\n\r\n                //change\r\n                vo.change()\r\n\r\n            }\r\n        }\r\n\r\n    },\r\n    computed: {\r\n    },\r\n    methods: {\r\n\r\n        change: function() {\r\n            //console.log('methods change')\r\n\r\n            let vo = this\r\n\r\n            vo.getUseItems()\r\n            vo.updateItems()\r\n            vo.getUseItems()\r\n\r\n        },\r\n\r\n        getUseItems: function() {\r\n            //console.log('methods getUseItems')\r\n\r\n            let vo = this\r\n\r\n            //items, 直接存取vo.item, 不能用cloneDeep對大數據太耗時\r\n            let items = (vo.items)\r\n\r\n            //y1, y2\r\n            let y1 = vo.scrollTop\r\n            let y2 = y1 + vo.listHeight\r\n\r\n            //indStart, indEnd\r\n            let n = size(items)\r\n            let idf = 10\r\n            let o\r\n            o = findLast(items, (v, k) => {\r\n                return (v.y + v.useHeight) < y1\r\n            })\r\n            let indStart = get(o, 'index', 0)\r\n            indStart = Math.max(indStart - idf, 0)\r\n            o = find(items, (v, k) => {\r\n                return v.y > y2\r\n            })\r\n            let indEnd = get(o, 'index', n)\r\n            indEnd = Math.min(indEnd + idf, n - 1)\r\n\r\n            //useItems\r\n            let useItems = []\r\n            let preItemsHeight = 0\r\n            let aftItemsHeight = 0\r\n            each(items, (v, k) => {\r\n                if (k < indStart) {\r\n                    preItemsHeight += v.useHeight\r\n                }\r\n                else if (k > indEnd) {\r\n                    aftItemsHeight += v.useHeight\r\n                }\r\n                else if (v.show) {\r\n                    useItems.push(v)\r\n                }\r\n            })\r\n\r\n            //save\r\n            vo.useItems = useItems\r\n            vo.preItemsHeight = preItemsHeight\r\n            vo.aftItemsHeight = aftItemsHeight\r\n\r\n        },\r\n\r\n        updateItems: function() {\r\n            //console.log('methods updateItems')\r\n\r\n            let vo = this\r\n\r\n            //items, 直接存取vo.item, 不能用cloneDeep對大數據太耗時\r\n            let items = (vo.items)\r\n\r\n            //update height\r\n            each(vo.$refs.block, (v) => {\r\n                let index = cint(v.getAttribute('index'))\r\n                if (index >= 0 && index <= size(items) - 1) {\r\n                    let h = v.clientHeight\r\n                    if (items[index].height !== h) {\r\n                        items[index].height = h\r\n                    }\r\n                }\r\n            })\r\n\r\n            //update show\r\n            let hide = false\r\n            let level = null\r\n            let ind = null\r\n            each(items, (v, k) => {\r\n\r\n                //detect start\r\n                if (!hide && !v.displayChildren) {\r\n                    hide = true\r\n                    level = v.level\r\n                    ind = k\r\n                }\r\n\r\n                //detect level\r\n                if (ind !== k && hide) {\r\n                    if (v.level > level) {\r\n                        if (v.show !== false) {\r\n                            v.show = false\r\n                        }\r\n                    }\r\n                    else if (v.level === level) {\r\n                        if (v.show !== false) {\r\n                            v.show = false\r\n                        }\r\n                        hide = false\r\n                        level = null\r\n                    }\r\n                }\r\n                else {\r\n                    if (v.show !== true) {\r\n                        v.show = true\r\n                    }\r\n                }\r\n\r\n            })\r\n\r\n            //update y, useHeight\r\n            let y = 0\r\n            each(items, (v) => {\r\n                if (v.y !== y) {\r\n                    v.y = y\r\n                }\r\n                if (v.show) {\r\n                    y += v.height\r\n                    if (v.useHeight !== v.height) {\r\n                        v.useHeight = v.height\r\n                    }\r\n                }\r\n                else {\r\n                    if (v.useHeight !== 0) {\r\n                        v.useHeight = 0\r\n                    }\r\n                }\r\n            })\r\n\r\n            //update itemsHeight\r\n            if (vo.itemsHeight !== y) {\r\n                vo.itemsHeight = y\r\n            }\r\n\r\n        },\r\n\r\n        parseData: function(d) {\r\n            //console.log('methods parseData', d)\r\n\r\n            let vo = this\r\n\r\n            let lineNumber = 0\r\n            let items = []\r\n\r\n            function cValue(v) {\r\n                if (isnum(v)) {\r\n                    return {\r\n                        type: 'num',\r\n                        value: cstr(v),\r\n                    }\r\n                }\r\n                else if (isstr(v)) {\r\n                    return {\r\n                        type: 'str',\r\n                        value: `\"${v}\"`,\r\n                    }\r\n                }\r\n                else if (isbol(v)) {\r\n                    let c = 'false'\r\n                    if (v) {\r\n                        c = 'true'\r\n                    }\r\n                    return {\r\n                        type: 'bol',\r\n                        value: c,\r\n                    }\r\n                }\r\n                else if (isfun(v)) {\r\n                    return {\r\n                        type: 'fun',\r\n                        value: v.toString(),\r\n                    }\r\n                }\r\n                return {\r\n                    type: 'unknown',\r\n                    value: v,\r\n                }\r\n            }\r\n\r\n            function addItem({ level, key, keyNumbers, value, valueColor, valueComma, valueTail, hasChildren }) {\r\n                lineNumber += 1\r\n                let index = lineNumber - 1\r\n                items.push({\r\n                    index, //節點指標\r\n                    lineNumber, //int, 列編號\r\n                    level, //int, 節點層數(縮排)\r\n                    paddingLeft: level * 24 + 16, //num, 給予16px放置顯隱icon\r\n                    key, //str, 鍵\r\n                    keyNumbers, //obj, 鍵值為陣列或物件顯示所含節點數量\r\n                    value, //str, 值\r\n                    valueColor, //str, 數值顏色, 需依照值型別給予\r\n                    valueComma, //bol, 數值後方是否顯示\",\"\r\n                    valueTail, //str, 數值後方結尾符號, 僅用於陣列或物件, 供displayChildren=false時額外顯示出結尾符號\r\n                    hasChildren, //bol, 是否有子節點, 僅陣列或物件才為true\r\n                    displayChildren: vo.styleItem.defDisplayChildren, //bol, 是否顯示子節點\r\n                    show: true, //bol, 是否顯示此節點\r\n                    height: vo.itemMinHeight, //num, 節點高度, 日後動態更新\r\n                    useHeight: 0, //num, 真實使用高度, 受show影響, 加速用\r\n                    y: index * vo.itemMinHeight, //num, 真實y向位置, 預設先由最小列高計算\r\n                })\r\n            }\r\n\r\n            function pArray({ level, key, value, last }) {\r\n\r\n                let n = size(value)\r\n                let keyNumbers = {\r\n                    type: 'arr',\r\n                    n,\r\n                }\r\n\r\n                let _key = `[`\r\n                if (key !== null) {\r\n                    _key = `${key} :  [`\r\n                }\r\n                addItem({\r\n                    level,\r\n                    key: _key,\r\n                    value: null,\r\n                    valueColor: null,\r\n                    valueTail: ']',\r\n                    keyNumbers,\r\n                    valueComma: false,\r\n                    hasChildren: true,\r\n                })\r\n\r\n                let i = 0\r\n                each(value, (v, k) => {\r\n                    i += 1\r\n                    pSelf({\r\n                        level: level + 1,\r\n                        key: k,\r\n                        value: v,\r\n                        last: i === n,\r\n                    })\r\n                })\r\n\r\n                let cend = `],`\r\n                if (last) {\r\n                    cend = `]`\r\n                }\r\n                addItem({\r\n                    level,\r\n                    key: cend,\r\n                    value: null,\r\n                    valueColor: null,\r\n                    keyNumbers: null,\r\n                    valueComma: false,\r\n                    hasChildren: false,\r\n                })\r\n\r\n            }\r\n\r\n            function pObject({ level, key, value, last }) {\r\n\r\n                let n = size(keys(value))\r\n                let keyNumbers = {\r\n                    type: 'obj',\r\n                    n,\r\n                }\r\n\r\n                let _key = `{`\r\n                if (key !== null) {\r\n                    _key = `${key} :  {`\r\n                }\r\n                addItem({\r\n                    level,\r\n                    key: _key,\r\n                    value: null,\r\n                    valueColor: null,\r\n                    valueTail: '}',\r\n                    keyNumbers,\r\n                    valueComma: false,\r\n                    hasChildren: true,\r\n                })\r\n\r\n                let i = 0\r\n                each(value, (v, k) => {\r\n                    i += 1\r\n                    pSelf({\r\n                        level: level + 1,\r\n                        key: k,\r\n                        value: v,\r\n                        last: i === n,\r\n                    })\r\n                })\r\n\r\n                let cend = `},`\r\n                if (last) {\r\n                    cend = `}`\r\n                }\r\n                addItem({\r\n                    level,\r\n                    key: cend,\r\n                    value: null,\r\n                    valueColor: null,\r\n                    keyNumbers: null,\r\n                    valueComma: false,\r\n                    hasChildren: false,\r\n                })\r\n\r\n            }\r\n\r\n            function pSelf({ level, key, value, last }) {\r\n                if (isarr(value)) {\r\n                    pArray({ level, key, value, last })\r\n                }\r\n                else if (isobj(value)) {\r\n                    pObject({ level, key, value, last })\r\n                }\r\n                else {\r\n                    let r = cValue(value)\r\n                    let c = vo.styleItem[`${r.type}Color`]\r\n                    addItem({\r\n                        level,\r\n                        key: `${key} :  `,\r\n                        value: r.value,\r\n                        valueColor: c,\r\n                        keyNumbers: null,\r\n                        valueComma: !last,\r\n                        hasChildren: false,\r\n                    })\r\n                }\r\n            }\r\n\r\n            if (isarr(d)) {\r\n                pArray({\r\n                    level: 0,\r\n                    key: null,\r\n                    value: d,\r\n                    last: true,\r\n                })\r\n            }\r\n            else if (isobj(d)) {\r\n                pObject({\r\n                    level: 0,\r\n                    key: null,\r\n                    value: d,\r\n                    last: true,\r\n                })\r\n            }\r\n            else {\r\n                let r = cValue(d)\r\n                let c = vo.styleItem[`${r.type}Color`]\r\n                addItem({\r\n                    level: 0,\r\n                    key: null,\r\n                    value: r.value,\r\n                    valueColor: c,\r\n                    keyNumbers: null,\r\n                    valueComma: null,\r\n                    hasChildren: false,\r\n                })\r\n            }\r\n\r\n            return items\r\n        },\r\n\r\n        toggleItems: function(item) {\r\n            //console.log('methods toggleItems',item)\r\n\r\n            let vo = this\r\n\r\n            //toggle\r\n            vo.items[item.index].displayChildren = !vo.items[item.index].displayChildren\r\n\r\n            //setTimeout\r\n            setTimeout(() => {\r\n\r\n                //change\r\n                vo.change()\r\n\r\n            }, 10)\r\n\r\n        },\r\n\r\n        scrollItems: debounce(function(e) {\r\n            //console.log('methods scrollItems', e.target.scrollTop)\r\n\r\n            let vo = this\r\n\r\n            //setTimeout\r\n            setTimeout(() => {\r\n\r\n                //save scrollTop\r\n                let scrollTop = e.target.scrollTop\r\n                vo.scrollTop = scrollTop\r\n\r\n                //change\r\n                vo.change()\r\n\r\n            }, 10)\r\n\r\n        }, 100),\r\n\r\n    },\r\n}\r\n<\/script>\r\n\r\n<style scoped>\r\n.caretRight {\r\n    transform: translateY(-1px);\r\n    cursor: pointer;\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    margin-right: 5px;\r\n}\r\n.center {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n.showChildren {\r\n    transform: rotate(90deg);\r\n}\r\n</style>\r\n\r\n"]},media:void 0})},ai,"data-v-73011a33",!1,void 0,oi,void 0)});
//# sourceMappingURL=w-json-view.umd.js.map
