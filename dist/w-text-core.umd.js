!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self)["w-text-core"]=n()}(this,function(){"use strict";function e(e){return"[object String]"===Object.prototype.toString.call(e)}function n(n){var t=!1;return!function(n){return!(!e(n)||""===n)}(n)?function(e){return"[object Number]"===Object.prototype.toString.call(e)}(n)&&(t=!0):t=!isNaN(Number(n)),t}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=function(e){var n=t(e);return null!=e&&("object"==n||"function"==n)},o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a="object"==t(o)&&o&&o.Object===Object&&o,i="object"==("undefined"==typeof self?"undefined":t(self))&&self&&self.Object===Object&&self,u=a||i||Function("return this")(),l=u.Symbol,s=Object.prototype,c=s.hasOwnProperty,f=s.toString,d=l?l.toStringTag:void 0;var p=function(e){var n=c.call(e,d),t=e[d];try{e[d]=void 0;var r=!0}catch(e){}var o=f.call(e);return r&&(n?e[d]=t:delete e[d]),o},v=Object.prototype.toString;var m=function(e){return v.call(e)},y="[object Null]",g="[object Undefined]",h=l?l.toStringTag:void 0;var b=function(e){return null==e?void 0===e?g:y:h&&h in Object(e)?p(e):m(e)};var _=function(e){return null!=e&&"object"==t(e)},S="[object Symbol]";var C=function(e){return"symbol"==t(e)||_(e)&&b(e)==S},A=NaN,j=/^\s+|\s+$/g,x=/^[-+]0x[0-9a-f]+$/i,T=/^0b[01]+$/i,N=/^0o[0-7]+$/i,O=parseInt;var $=function(e){if("number"==typeof e)return e;if(C(e))return A;if(r(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=r(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(j,"");var t=T.test(e);return t||N.test(e)?O(e.slice(2),t?2:8):x.test(e)?A:+e},w=1/0,F=17976931348623157e292;var B=function(e){return e?(e=$(e))===w||e===-w?(e<0?-1:1)*F:e==e?e:0:0===e?e:0};function R(e){return n(e)?B(e):0}var P=function(e){var n=B(e),t=n%1;return n==n?t?n-t:n:0};var V=function(e){return"number"==typeof e&&e==P(e)};function E(e){return!!n(e)&&(e=R(e),V(e))}var k=function(e,n){for(var t=-1,r=null==e?0:e.length,o=Array(r);++t<r;)o[t]=n(e[t],t,e);return o},I=Array.isArray,U=1/0,L=l?l.prototype:void 0,M=L?L.toString:void 0;var J=function e(n){if("string"==typeof n)return n;if(I(n))return k(n,e)+"";if(C(n))return M?M.call(n):"";var t=n+"";return"0"==t&&1/n==-U?"-0":t};var W=function(e){return null==e?"":J(e)},X=u.isFinite,z=Math.min;var D=function(e){var n=Math[e];return function(e,t){if(e=$(e),(t=null==t?0:z(P(t),292))&&X(e)){var r=(W(e)+"e").split("e"),o=n(r[0]+"e"+(+r[1]+t));return+((r=(W(o)+"e").split("e"))[0]+"e"+(+r[1]-t))}return n(e)}}("round");function q(e){if(!n(e))return 0;e=R(e);var t=D(e);return"0"===String(t)?0:t}function G(t,r){var o,a=!1,i="";if("isstr"===r)e(t)||(a=!0,i="需要為字串",t="");else if("isnum"===r)n(t)||(a=!0,i="需要為數字",t=0);else if("isp0num"===r)n(o=t)&&R(o)>=0||(a=!0,i="需要為含0的正浮點數",t=0);else if("isn0num"===r)(function(e){return!!n(e)&&R(e)<=0})(t)||(a=!0,i="需要為含0的負浮點數",t=0);else if("isint"===r)E(t)||(a=!0,i="需要為整數",t=0);else if("ispint"===r)(function(e){return!!E(e)&&q(e)>0})(t)||(a=!0,i="需要為不含0正整數",t=0);else if("isp0int"===r)(function(e){return!!E(e)&&q(e)>=0})(t)||(a=!0,i="需要為含0正整數",t=0);else if("isnint"===r)(function(e){return!!E(e)&&q(e)<0})(t)||(a=!0,i="需要為不含0負整數",t=0);else if("isn0int"===r)(function(e){return!!E(e)&&q(e)<=0})(t)||(a=!0,i="需要為含0負整數",t=0);else if(function(e){var n=Object.prototype.toString.call(e);return"[object Function]"===n||"[object AsyncFunction]"===n}(r)){t=r(t)}else"any"===r?n(t)||e(t)||(a=!0,i="需要為字串或數字",t=""):(a=!0,i="需要指定驗證類型",t=null);return{value:t,err:a,errmsg:i}}var H={props:{type:{type:String,default:"any"},value:{type:[String,Number]},textAlign:{type:String,default:"left"},placeholder:{type:String,default:""},editable:{type:Boolean,default:!0},focused:{type:Boolean,default:!1}},data:function(){return{value_trans:""}},mounted:function(){},computed:{changeParam:function(){return this.value_trans=this.value,""}},methods:{changeFocused:function(e){var n=this;setTimeout(function(){n.$emit("update:focused",e)},1)},changeContent:function(e){var n=this,t=G(n.value_trans,n.type),r=t.value,o=t.errmsg;setTimeout(function(){n.value_trans=r,n.$emit("input",r,o),n.$emit(e,r,o)},1)},setValueTrans:function(e){this.value_trans=e}}};var K,Q=function(e,n,t,r,o,a,i,u,l,s){"boolean"!=typeof i&&(l=u,u=i,i=!1);var c,f="function"==typeof t?t.options:t;if(e&&e.render&&(f.render=e.render,f.staticRenderFns=e.staticRenderFns,f._compiled=!0,o&&(f.functional=!0)),r&&(f._scopeId=r),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},f._ssrRegister=c):n&&(c=i?function(){n.call(this,s(this.$root.$options.shadowRoot))}:function(e){n.call(this,u(e))}),c)if(f.functional){var d=f.render;f.render=function(e,n){return c.call(n),d(e,n)}}else{var p=f.beforeCreate;f.beforeCreate=p?[].concat(p,c):[c]}return t},Y="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var Z={};var ee=function(e){return function(e,n){return function(e,n){var t=Y?n.media||"default":e,r=Z[t]||(Z[t]={ids:new Set,styles:[]});if(!r.ids.has(e)){r.ids.add(e);var o=n.source;if(n.map&&(o+="\n/*# sourceURL="+n.map.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n.map))))+" */"),r.element||(r.element=document.createElement("style"),r.element.type="text/css",n.media&&r.element.setAttribute("media",n.media),void 0===K&&(K=document.head||document.getElementsByTagName("head")[0]),K.appendChild(r.element)),"styleSheet"in r.element)r.styles.push(o),r.element.styleSheet.cssText=r.styles.filter(Boolean).join("\n");else{var a=r.ids.size-1,i=document.createTextNode(o),u=r.element.childNodes;u[a]&&r.element.removeChild(u[a]),u.length?r.element.insertBefore(i,u[a]):r.element.appendChild(i)}}}(e,n)}};const ne=H;var te=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{changeParam:e.changeParam}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.value_trans,expression:"value_trans"}],ref:"inp",staticClass:"basic",style:[{width:"100%"},{height:"28px"},{"text-align":e.textAlign},{opacity:e.value_trans||e.focused?1:.6}],attrs:{type:"text",readonly:!e.editable,placeholder:e.placeholder},domProps:{value:e.value_trans},on:{focus:function(n){return e.changeFocused(!0)},blur:function(n){e.changeFocused(!1),e.changeContent("blur")},keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.changeContent("enter")},input:function(n){n.target.composing||(e.value_trans=n.target.value)}}})])};te._withStripped=!0;return Q({render:te,staticRenderFns:[]},function(e){e&&e("data-v-03f04f78_0",{source:"\n.basic[data-v-03f04f78] {\r\n    transition: all 0.7s;\r\n    outline: none;\n}\r\n",map:{version:3,sources:["D:\\開源-JS-102-3-w-component-vue\\w-component-vue\\src\\components\\WTextCore.vue"],names:[],mappings:";AA4IA;IACA,oBAAA;IACA,aAAA;AACA",file:"WTextCore.vue",sourcesContent:["<template>\r\n    <div :changeParam=\"changeParam\">\r\n\r\n        <input\r\n            ref=\"inp\"\r\n            class=\"basic\"\r\n            type=\"text\"\r\n            :style=\"[{'width':'100%'},{'height':'28px'},{'text-align':textAlign},{'opacity':(!value_trans && !focused)?0.6:1}]\"\r\n            :readonly=\"!editable\"\r\n            :placeholder=\"placeholder\"\r\n            v-model=\"value_trans\"\r\n            @focus=\"changeFocused(true)\"\r\n            @blur=\"changeFocused(false);changeContent('blur');\"\r\n            @keyup.enter=\"changeContent('enter')\"\r\n        >\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport verifyValue from 'wsemi/src/verifyValue.mjs'\r\n\r\n/**\r\n * @vue-prop {String} [type='any'] 輸入文字框類型字串，預設'any'\r\n * @vue-prop {String|Number} value 輸入文字框值\r\n * @vue-prop {String} [textAlign='left'] 輸入文字左右對齊字串，預設'left'\r\n * @vue-prop {String} [placeholder=''] 輸入無文字時的替代字符字串，預設''\r\n * @vue-prop {Boolean} [editable=true] 輸入是否為編輯模式，預設true\r\n * @vue-prop {Boolean} [focused=false] 輸入是否為駐點狀態，預設false\r\n */\r\nexport default {\r\n    props: {\r\n        type: {\r\n            type: String,\r\n            default: 'any',\r\n        },\r\n        value: {\r\n            type: [String, Number],\r\n        },\r\n        textAlign: {\r\n            type: String,\r\n            default: 'left',\r\n        },\r\n        placeholder: {\r\n            type: String,\r\n            default: '',\r\n        },\r\n        editable: {\r\n            type: Boolean,\r\n            default: true,\r\n        },\r\n        focused: {\r\n            type: Boolean,\r\n            default: false,\r\n        },\r\n    },\r\n    data: function() {\r\n        return {\r\n            value_trans: '',\r\n        }\r\n    },\r\n    mounted: function() {\r\n    },\r\n    computed: {\r\n\r\n        changeParam: function () {\r\n            //console.log('computed changeParam')\r\n\r\n            let vo = this\r\n\r\n            //value_trans\r\n            vo.value_trans = vo.value\r\n\r\n            return ''\r\n        },\r\n\r\n    },\r\n    methods: {\r\n\r\n        changeFocused: function(focused) {\r\n            //console.log('methods changeFocused', focused)\r\n\r\n            let vo = this\r\n\r\n            //save\r\n            //vo.focused_trans = focused\r\n\r\n            //setTimeout\r\n            setTimeout(function() {\r\n\r\n                //emit\r\n                vo.$emit('update:focused', focused)\r\n\r\n            }, 1)\r\n\r\n        },\r\n\r\n        changeContent: function (evname) {\r\n            //console.log('methods changeContent', evname)\r\n\r\n            let vo = this\r\n\r\n            //verifyValue\r\n            let r = verifyValue(vo.value_trans, vo.type)\r\n\r\n            //value, errmsg\r\n            let value = r.value\r\n            let errmsg = r.errmsg\r\n\r\n            //setTimeout\r\n            setTimeout(function() {\r\n\r\n                //reset for error condition\r\n                vo.value_trans = value\r\n\r\n                //emit\r\n                vo.$emit('input', value, errmsg)\r\n\r\n                //emit\r\n                vo.$emit(evname, value, errmsg)\r\n\r\n            }, 1)\r\n\r\n        },\r\n\r\n        setValueTrans: function(value) {\r\n            //console.log('methods setValueTrans', value)\r\n\r\n            let vo = this\r\n\r\n            //set value_trans\r\n            vo.value_trans = value\r\n\r\n        },\r\n\r\n    },\r\n}\r\n<\/script>\r\n\r\n<style scoped>\r\n.basic {\r\n    transition: all 0.7s;\r\n    outline: none;\r\n}\r\n</style>\r\n"]},media:void 0})},ne,"data-v-03f04f78",!1,void 0,ee,void 0)});
//# sourceMappingURL=w-text-core.umd.js.map
